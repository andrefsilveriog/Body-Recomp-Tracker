var Nk=Object.defineProperty;var Dk=(t,e,n)=>e in t?Nk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ne=(t,e,n)=>Dk(t,typeof e!="symbol"?e+"":e,n);function Mk(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function Ok(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var iE={exports:{}},Xc={},rE={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cl=Symbol.for("react.element"),Lk=Symbol.for("react.portal"),Vk=Symbol.for("react.fragment"),Fk=Symbol.for("react.strict_mode"),jk=Symbol.for("react.profiler"),Uk=Symbol.for("react.provider"),Bk=Symbol.for("react.context"),zk=Symbol.for("react.forward_ref"),$k=Symbol.for("react.suspense"),Wk=Symbol.for("react.memo"),Hk=Symbol.for("react.lazy"),Zy=Symbol.iterator;function qk(t){return t===null||typeof t!="object"?null:(t=Zy&&t[Zy]||t["@@iterator"],typeof t=="function"?t:null)}var sE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},oE=Object.assign,aE={};function oo(t,e,n){this.props=t,this.context=e,this.refs=aE,this.updater=n||sE}oo.prototype.isReactComponent={};oo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};oo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lE(){}lE.prototype=oo.prototype;function qp(t,e,n){this.props=t,this.context=e,this.refs=aE,this.updater=n||sE}var Kp=qp.prototype=new lE;Kp.constructor=qp;oE(Kp,oo.prototype);Kp.isPureReactComponent=!0;var e_=Array.isArray,uE=Object.prototype.hasOwnProperty,Gp={current:null},cE={key:!0,ref:!0,__self:!0,__source:!0};function hE(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)uE.call(e,i)&&!cE.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:cl,type:t,key:s,ref:o,props:r,_owner:Gp.current}}function Kk(t,e){return{$$typeof:cl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qp(t){return typeof t=="object"&&t!==null&&t.$$typeof===cl}function Gk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var t_=/\/+/g;function dd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Gk(""+t.key):e.toString(36)}function ku(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case cl:case Lk:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+dd(o,0):i,e_(r)?(n="",t!=null&&(n=t.replace(t_,"$&/")+"/"),ku(r,e,n,"",function(u){return u})):r!=null&&(Qp(r)&&(r=Kk(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(t_,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",e_(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+dd(s,a);o+=ku(s,e,n,l,r)}else if(l=qk(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+dd(s,a++),o+=ku(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Hl(t,e,n){if(t==null)return t;var i=[],r=0;return ku(t,i,"","",function(s){return e.call(n,s,r++)}),i}function Qk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bt={current:null},Cu={transition:null},Yk={ReactCurrentDispatcher:bt,ReactCurrentBatchConfig:Cu,ReactCurrentOwner:Gp};function dE(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Hl,forEach:function(t,e,n){Hl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Hl(t,function(){e++}),e},toArray:function(t){return Hl(t,function(e){return e})||[]},only:function(t){if(!Qp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ie.Component=oo;ie.Fragment=Vk;ie.Profiler=jk;ie.PureComponent=qp;ie.StrictMode=Fk;ie.Suspense=$k;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yk;ie.act=dE;ie.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=oE({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Gp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)uE.call(e,l)&&!cE.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:cl,type:t.type,key:r,ref:s,props:i,_owner:o}};ie.createContext=function(t){return t={$$typeof:Bk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Uk,_context:t},t.Consumer=t};ie.createElement=hE;ie.createFactory=function(t){var e=hE.bind(null,t);return e.type=t,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(t){return{$$typeof:zk,render:t}};ie.isValidElement=Qp;ie.lazy=function(t){return{$$typeof:Hk,_payload:{_status:-1,_result:t},_init:Qk}};ie.memo=function(t,e){return{$$typeof:Wk,type:t,compare:e===void 0?null:e}};ie.startTransition=function(t){var e=Cu.transition;Cu.transition={};try{t()}finally{Cu.transition=e}};ie.unstable_act=dE;ie.useCallback=function(t,e){return bt.current.useCallback(t,e)};ie.useContext=function(t){return bt.current.useContext(t)};ie.useDebugValue=function(){};ie.useDeferredValue=function(t){return bt.current.useDeferredValue(t)};ie.useEffect=function(t,e){return bt.current.useEffect(t,e)};ie.useId=function(){return bt.current.useId()};ie.useImperativeHandle=function(t,e,n){return bt.current.useImperativeHandle(t,e,n)};ie.useInsertionEffect=function(t,e){return bt.current.useInsertionEffect(t,e)};ie.useLayoutEffect=function(t,e){return bt.current.useLayoutEffect(t,e)};ie.useMemo=function(t,e){return bt.current.useMemo(t,e)};ie.useReducer=function(t,e,n){return bt.current.useReducer(t,e,n)};ie.useRef=function(t){return bt.current.useRef(t)};ie.useState=function(t){return bt.current.useState(t)};ie.useSyncExternalStore=function(t,e,n){return bt.current.useSyncExternalStore(t,e,n)};ie.useTransition=function(){return bt.current.useTransition()};ie.version="18.3.1";rE.exports=ie;var O=rE.exports;const Jc=Ok(O),Xk=Mk({__proto__:null,default:Jc},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jk=O,Zk=Symbol.for("react.element"),eC=Symbol.for("react.fragment"),tC=Object.prototype.hasOwnProperty,nC=Jk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iC={key:!0,ref:!0,__self:!0,__source:!0};function fE(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)tC.call(e,i)&&!iC.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Zk,type:t,key:s,ref:o,props:r,_owner:nC.current}}Xc.Fragment=eC;Xc.jsx=fE;Xc.jsxs=fE;iE.exports=Xc;var y=iE.exports,df={},pE={exports:{}},qt={},gE={exports:{}},mE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,q){var K=B.length;B.push(q);e:for(;0<K;){var he=K-1>>>1,te=B[he];if(0<r(te,q))B[he]=q,B[K]=te,K=he;else break e}}function n(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var q=B[0],K=B.pop();if(K!==q){B[0]=K;e:for(var he=0,te=B.length,fe=te>>>1;he<fe;){var H=2*(he+1)-1,oe=B[H],ye=H+1,wt=B[ye];if(0>r(oe,K))ye<te&&0>r(wt,oe)?(B[he]=wt,B[ye]=K,he=ye):(B[he]=oe,B[H]=K,he=H);else if(ye<te&&0>r(wt,K))B[he]=wt,B[ye]=K,he=ye;else break e}}return q}function r(B,q){var K=B.sortIndex-q.sortIndex;return K!==0?K:B.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,d=null,f=3,m=!1,v=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(B){for(var q=n(u);q!==null;){if(q.callback===null)i(u);else if(q.startTime<=B)i(u),q.sortIndex=q.expirationTime,e(l,q);else break;q=n(u)}}function R(B){if(w=!1,b(B),!v)if(n(l)!==null)v=!0,_e(M);else{var q=n(u);q!==null&&Se(R,q.startTime-B)}}function M(B,q){v=!1,w&&(w=!1,T(_),_=-1),m=!0;var K=f;try{for(b(q),d=n(l);d!==null&&(!(d.expirationTime>q)||B&&!P());){var he=d.callback;if(typeof he=="function"){d.callback=null,f=d.priorityLevel;var te=he(d.expirationTime<=q);q=t.unstable_now(),typeof te=="function"?d.callback=te:d===n(l)&&i(l),b(q)}else i(l);d=n(l)}if(d!==null)var fe=!0;else{var H=n(u);H!==null&&Se(R,H.startTime-q),fe=!1}return fe}finally{d=null,f=K,m=!1}}var D=!1,I=null,_=-1,k=5,C=-1;function P(){return!(t.unstable_now()-C<k)}function N(){if(I!==null){var B=t.unstable_now();C=B;var q=!0;try{q=I(!0,B)}finally{q?A():(D=!1,I=null)}}else D=!1}var A;if(typeof S=="function")A=function(){S(N)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,ce=re.port2;re.port1.onmessage=N,A=function(){ce.postMessage(null)}}else A=function(){E(N,0)};function _e(B){I=B,D||(D=!0,A())}function Se(B,q){_=E(function(){B(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,_e(M))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var K=f;f=q;try{return B()}finally{f=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var K=f;f=B;try{return q()}finally{f=K}},t.unstable_scheduleCallback=function(B,q,K){var he=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?he+K:he):K=he,B){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=K+te,B={id:h++,callback:q,priorityLevel:B,startTime:K,expirationTime:te,sortIndex:-1},K>he?(B.sortIndex=K,e(u,B),n(l)===null&&B===n(u)&&(w?(T(_),_=-1):w=!0,Se(R,K-he))):(B.sortIndex=te,e(l,B),v||m||(v=!0,_e(M))),B},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(B){var q=f;return function(){var K=f;f=q;try{return B.apply(this,arguments)}finally{f=K}}}})(mE);gE.exports=mE;var rC=gE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sC=O,Ht=rC;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yE=new Set,Aa={};function Qr(t,e){js(t,e),js(t+"Capture",e)}function js(t,e){for(Aa[t]=e,t=0;t<e.length;t++)yE.add(e[t])}var ni=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ff=Object.prototype.hasOwnProperty,oC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,n_={},i_={};function aC(t){return ff.call(i_,t)?!0:ff.call(n_,t)?!1:oC.test(t)?i_[t]=!0:(n_[t]=!0,!1)}function lC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uC(t,e,n,i){if(e===null||typeof e>"u"||lC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ot[t]=new kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ot[e]=new kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ot[t]=new kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ot[t]=new kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ot[t]=new kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ot[t]=new kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ot[t]=new kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ot[t]=new kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ot[t]=new kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yp=/[\-:]([a-z])/g;function Xp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yp,Xp);ot[e]=new kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yp,Xp);ot[e]=new kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yp,Xp);ot[e]=new kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ot[t]=new kt(t,1,!1,t.toLowerCase(),null,!1,!1)});ot.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ot[t]=new kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jp(t,e,n,i){var r=ot.hasOwnProperty(e)?ot[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uC(e,n,r,i)&&(n=null),i||r===null?aC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var ci=sC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ql=Symbol.for("react.element"),gs=Symbol.for("react.portal"),ms=Symbol.for("react.fragment"),Zp=Symbol.for("react.strict_mode"),pf=Symbol.for("react.profiler"),_E=Symbol.for("react.provider"),vE=Symbol.for("react.context"),eg=Symbol.for("react.forward_ref"),gf=Symbol.for("react.suspense"),mf=Symbol.for("react.suspense_list"),tg=Symbol.for("react.memo"),Ti=Symbol.for("react.lazy"),wE=Symbol.for("react.offscreen"),r_=Symbol.iterator;function Ro(t){return t===null||typeof t!="object"?null:(t=r_&&t[r_]||t["@@iterator"],typeof t=="function"?t:null)}var Oe=Object.assign,fd;function Ko(t){if(fd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);fd=e&&e[1]||""}return`
`+fd+t}var pd=!1;function gd(t,e){if(!t||pd)return"";pd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{pd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ko(t):""}function cC(t){switch(t.tag){case 5:return Ko(t.type);case 16:return Ko("Lazy");case 13:return Ko("Suspense");case 19:return Ko("SuspenseList");case 0:case 2:case 15:return t=gd(t.type,!1),t;case 11:return t=gd(t.type.render,!1),t;case 1:return t=gd(t.type,!0),t;default:return""}}function yf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ms:return"Fragment";case gs:return"Portal";case pf:return"Profiler";case Zp:return"StrictMode";case gf:return"Suspense";case mf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vE:return(t.displayName||"Context")+".Consumer";case _E:return(t._context.displayName||"Context")+".Provider";case eg:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tg:return e=t.displayName||null,e!==null?e:yf(t.type)||"Memo";case Ti:e=t._payload,t=t._init;try{return yf(t(e))}catch{}}return null}function hC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yf(e);case 8:return e===Zp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function EE(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dC(t){var e=EE(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Kl(t){t._valueTracker||(t._valueTracker=dC(t))}function TE(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=EE(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Ju(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _f(t,e){var n=e.checked;return Oe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function s_(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Yi(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function SE(t,e){e=e.checked,e!=null&&Jp(t,"checked",e,!1)}function vf(t,e){SE(t,e);var n=Yi(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wf(t,e.type,n):e.hasOwnProperty("defaultValue")&&wf(t,e.type,Yi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function o_(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wf(t,e,n){(e!=="number"||Ju(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Go=Array.isArray;function Cs(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Yi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Ef(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Oe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function a_(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Go(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Yi(n)}}function IE(t,e){var n=Yi(e.value),i=Yi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function l_(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xE(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xE(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gl,bE=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gl=Gl||document.createElement("div"),Gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Pa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var la={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fC=["Webkit","ms","Moz","O"];Object.keys(la).forEach(function(t){fC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),la[e]=la[t]})});function kE(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||la.hasOwnProperty(t)&&la[t]?(""+e).trim():e+"px"}function CE(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=kE(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var pC=Oe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Sf(t,e){if(e){if(pC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function If(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xf=null;function ng(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bf=null,As=null,Ps=null;function u_(t){if(t=fl(t)){if(typeof bf!="function")throw Error(U(280));var e=t.stateNode;e&&(e=ih(e),bf(t.stateNode,t.type,e))}}function AE(t){As?Ps?Ps.push(t):Ps=[t]:As=t}function PE(){if(As){var t=As,e=Ps;if(Ps=As=null,u_(t),e)for(t=0;t<e.length;t++)u_(e[t])}}function RE(t,e){return t(e)}function NE(){}var md=!1;function DE(t,e,n){if(md)return t(e,n);md=!0;try{return RE(t,e,n)}finally{md=!1,(As!==null||Ps!==null)&&(NE(),PE())}}function Ra(t,e){var n=t.stateNode;if(n===null)return null;var i=ih(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var kf=!1;if(ni)try{var No={};Object.defineProperty(No,"passive",{get:function(){kf=!0}}),window.addEventListener("test",No,No),window.removeEventListener("test",No,No)}catch{kf=!1}function gC(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ua=!1,Zu=null,ec=!1,Cf=null,mC={onError:function(t){ua=!0,Zu=t}};function yC(t,e,n,i,r,s,o,a,l){ua=!1,Zu=null,gC.apply(mC,arguments)}function _C(t,e,n,i,r,s,o,a,l){if(yC.apply(this,arguments),ua){if(ua){var u=Zu;ua=!1,Zu=null}else throw Error(U(198));ec||(ec=!0,Cf=u)}}function Yr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function ME(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function c_(t){if(Yr(t)!==t)throw Error(U(188))}function vC(t){var e=t.alternate;if(!e){if(e=Yr(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return c_(r),t;if(s===i)return c_(r),e;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function OE(t){return t=vC(t),t!==null?LE(t):null}function LE(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LE(t);if(e!==null)return e;t=t.sibling}return null}var VE=Ht.unstable_scheduleCallback,h_=Ht.unstable_cancelCallback,wC=Ht.unstable_shouldYield,EC=Ht.unstable_requestPaint,Ue=Ht.unstable_now,TC=Ht.unstable_getCurrentPriorityLevel,ig=Ht.unstable_ImmediatePriority,FE=Ht.unstable_UserBlockingPriority,tc=Ht.unstable_NormalPriority,SC=Ht.unstable_LowPriority,jE=Ht.unstable_IdlePriority,Zc=null,Cn=null;function IC(t){if(Cn&&typeof Cn.onCommitFiberRoot=="function")try{Cn.onCommitFiberRoot(Zc,t,void 0,(t.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:kC,xC=Math.log,bC=Math.LN2;function kC(t){return t>>>=0,t===0?32:31-(xC(t)/bC|0)|0}var Ql=64,Yl=4194304;function Qo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=Qo(a):(s&=o,s!==0&&(i=Qo(s)))}else o=n&~r,o!==0?i=Qo(o):s!==0&&(i=Qo(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-dn(e),r=1<<n,i|=t[n],e&=~r;return i}function CC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-dn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=CC(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function Af(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function UE(){var t=Ql;return Ql<<=1,!(Ql&4194240)&&(Ql=64),t}function yd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function hl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dn(e),t[e]=n}function PC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-dn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function rg(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-dn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var we=0;function BE(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zE,sg,$E,WE,HE,Pf=!1,Xl=[],Vi=null,Fi=null,ji=null,Na=new Map,Da=new Map,Ii=[],RC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function d_(t,e){switch(t){case"focusin":case"focusout":Vi=null;break;case"dragenter":case"dragleave":Fi=null;break;case"mouseover":case"mouseout":ji=null;break;case"pointerover":case"pointerout":Na.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Da.delete(e.pointerId)}}function Do(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=fl(e),e!==null&&sg(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function NC(t,e,n,i,r){switch(e){case"focusin":return Vi=Do(Vi,t,e,n,i,r),!0;case"dragenter":return Fi=Do(Fi,t,e,n,i,r),!0;case"mouseover":return ji=Do(ji,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Na.set(s,Do(Na.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Da.set(s,Do(Da.get(s)||null,t,e,n,i,r)),!0}return!1}function qE(t){var e=Ir(t.target);if(e!==null){var n=Yr(e);if(n!==null){if(e=n.tag,e===13){if(e=ME(n),e!==null){t.blockedOn=e,HE(t.priority,function(){$E(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Au(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);xf=i,n.target.dispatchEvent(i),xf=null}else return e=fl(n),e!==null&&sg(e),t.blockedOn=n,!1;e.shift()}return!0}function f_(t,e,n){Au(t)&&n.delete(e)}function DC(){Pf=!1,Vi!==null&&Au(Vi)&&(Vi=null),Fi!==null&&Au(Fi)&&(Fi=null),ji!==null&&Au(ji)&&(ji=null),Na.forEach(f_),Da.forEach(f_)}function Mo(t,e){t.blockedOn===e&&(t.blockedOn=null,Pf||(Pf=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,DC)))}function Ma(t){function e(r){return Mo(r,t)}if(0<Xl.length){Mo(Xl[0],t);for(var n=1;n<Xl.length;n++){var i=Xl[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Vi!==null&&Mo(Vi,t),Fi!==null&&Mo(Fi,t),ji!==null&&Mo(ji,t),Na.forEach(e),Da.forEach(e),n=0;n<Ii.length;n++)i=Ii[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ii.length&&(n=Ii[0],n.blockedOn===null);)qE(n),n.blockedOn===null&&Ii.shift()}var Rs=ci.ReactCurrentBatchConfig,ic=!0;function MC(t,e,n,i){var r=we,s=Rs.transition;Rs.transition=null;try{we=1,og(t,e,n,i)}finally{we=r,Rs.transition=s}}function OC(t,e,n,i){var r=we,s=Rs.transition;Rs.transition=null;try{we=4,og(t,e,n,i)}finally{we=r,Rs.transition=s}}function og(t,e,n,i){if(ic){var r=Rf(t,e,n,i);if(r===null)kd(t,e,i,rc,n),d_(t,i);else if(NC(r,t,e,n,i))i.stopPropagation();else if(d_(t,i),e&4&&-1<RC.indexOf(t)){for(;r!==null;){var s=fl(r);if(s!==null&&zE(s),s=Rf(t,e,n,i),s===null&&kd(t,e,i,rc,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else kd(t,e,i,null,n)}}var rc=null;function Rf(t,e,n,i){if(rc=null,t=ng(i),t=Ir(t),t!==null)if(e=Yr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=ME(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return rc=t,null}function KE(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TC()){case ig:return 1;case FE:return 4;case tc:case SC:return 16;case jE:return 536870912;default:return 16}default:return 16}}var Pi=null,ag=null,Pu=null;function GE(){if(Pu)return Pu;var t,e=ag,n=e.length,i,r="value"in Pi?Pi.value:Pi.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Pu=r.slice(t,1<i?1-i:void 0)}function Ru(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Jl(){return!0}function p_(){return!1}function Kt(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Jl:p_,this.isPropagationStopped=p_,this}return Oe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Jl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Jl)},persist:function(){},isPersistent:Jl}),e}var ao={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lg=Kt(ao),dl=Oe({},ao,{view:0,detail:0}),LC=Kt(dl),_d,vd,Oo,eh=Oe({},dl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ug,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Oo&&(Oo&&t.type==="mousemove"?(_d=t.screenX-Oo.screenX,vd=t.screenY-Oo.screenY):vd=_d=0,Oo=t),_d)},movementY:function(t){return"movementY"in t?t.movementY:vd}}),g_=Kt(eh),VC=Oe({},eh,{dataTransfer:0}),FC=Kt(VC),jC=Oe({},dl,{relatedTarget:0}),wd=Kt(jC),UC=Oe({},ao,{animationName:0,elapsedTime:0,pseudoElement:0}),BC=Kt(UC),zC=Oe({},ao,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$C=Kt(zC),WC=Oe({},ao,{data:0}),m_=Kt(WC),HC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},KC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=KC[t])?!!e[t]:!1}function ug(){return GC}var QC=Oe({},dl,{key:function(t){if(t.key){var e=HC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ru(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ug,charCode:function(t){return t.type==="keypress"?Ru(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ru(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YC=Kt(QC),XC=Oe({},eh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),y_=Kt(XC),JC=Oe({},dl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ug}),ZC=Kt(JC),e1=Oe({},ao,{propertyName:0,elapsedTime:0,pseudoElement:0}),t1=Kt(e1),n1=Oe({},eh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),i1=Kt(n1),r1=[9,13,27,32],cg=ni&&"CompositionEvent"in window,ca=null;ni&&"documentMode"in document&&(ca=document.documentMode);var s1=ni&&"TextEvent"in window&&!ca,QE=ni&&(!cg||ca&&8<ca&&11>=ca),__=" ",v_=!1;function YE(t,e){switch(t){case"keyup":return r1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function XE(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ys=!1;function o1(t,e){switch(t){case"compositionend":return XE(e);case"keypress":return e.which!==32?null:(v_=!0,__);case"textInput":return t=e.data,t===__&&v_?null:t;default:return null}}function a1(t,e){if(ys)return t==="compositionend"||!cg&&YE(t,e)?(t=GE(),Pu=ag=Pi=null,ys=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return QE&&e.locale!=="ko"?null:e.data;default:return null}}var l1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function w_(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!l1[t.type]:e==="textarea"}function JE(t,e,n,i){AE(i),e=sc(e,"onChange"),0<e.length&&(n=new lg("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var ha=null,Oa=null;function u1(t){uT(t,0)}function th(t){var e=ws(t);if(TE(e))return t}function c1(t,e){if(t==="change")return e}var ZE=!1;if(ni){var Ed;if(ni){var Td="oninput"in document;if(!Td){var E_=document.createElement("div");E_.setAttribute("oninput","return;"),Td=typeof E_.oninput=="function"}Ed=Td}else Ed=!1;ZE=Ed&&(!document.documentMode||9<document.documentMode)}function T_(){ha&&(ha.detachEvent("onpropertychange",eT),Oa=ha=null)}function eT(t){if(t.propertyName==="value"&&th(Oa)){var e=[];JE(e,Oa,t,ng(t)),DE(u1,e)}}function h1(t,e,n){t==="focusin"?(T_(),ha=e,Oa=n,ha.attachEvent("onpropertychange",eT)):t==="focusout"&&T_()}function d1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return th(Oa)}function f1(t,e){if(t==="click")return th(e)}function p1(t,e){if(t==="input"||t==="change")return th(e)}function g1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gn=typeof Object.is=="function"?Object.is:g1;function La(t,e){if(gn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!ff.call(e,r)||!gn(t[r],e[r]))return!1}return!0}function S_(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function I_(t,e){var n=S_(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=S_(n)}}function tT(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tT(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nT(){for(var t=window,e=Ju();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ju(t.document)}return e}function hg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function m1(t){var e=nT(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&tT(n.ownerDocument.documentElement,n)){if(i!==null&&hg(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=I_(n,s);var o=I_(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var y1=ni&&"documentMode"in document&&11>=document.documentMode,_s=null,Nf=null,da=null,Df=!1;function x_(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Df||_s==null||_s!==Ju(i)||(i=_s,"selectionStart"in i&&hg(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),da&&La(da,i)||(da=i,i=sc(Nf,"onSelect"),0<i.length&&(e=new lg("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=_s)))}function Zl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vs={animationend:Zl("Animation","AnimationEnd"),animationiteration:Zl("Animation","AnimationIteration"),animationstart:Zl("Animation","AnimationStart"),transitionend:Zl("Transition","TransitionEnd")},Sd={},iT={};ni&&(iT=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function nh(t){if(Sd[t])return Sd[t];if(!vs[t])return t;var e=vs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in iT)return Sd[t]=e[n];return t}var rT=nh("animationend"),sT=nh("animationiteration"),oT=nh("animationstart"),aT=nh("transitionend"),lT=new Map,b_="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ir(t,e){lT.set(t,e),Qr(e,[t])}for(var Id=0;Id<b_.length;Id++){var xd=b_[Id],_1=xd.toLowerCase(),v1=xd[0].toUpperCase()+xd.slice(1);ir(_1,"on"+v1)}ir(rT,"onAnimationEnd");ir(sT,"onAnimationIteration");ir(oT,"onAnimationStart");ir("dblclick","onDoubleClick");ir("focusin","onFocus");ir("focusout","onBlur");ir(aT,"onTransitionEnd");js("onMouseEnter",["mouseout","mouseover"]);js("onMouseLeave",["mouseout","mouseover"]);js("onPointerEnter",["pointerout","pointerover"]);js("onPointerLeave",["pointerout","pointerover"]);Qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Yo));function k_(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,_C(i,e,void 0,t),t.currentTarget=null}function uT(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;k_(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;k_(r,a,u),s=l}}}if(ec)throw t=Cf,ec=!1,Cf=null,t}function ke(t,e){var n=e[Ff];n===void 0&&(n=e[Ff]=new Set);var i=t+"__bubble";n.has(i)||(cT(e,t,2,!1),n.add(i))}function bd(t,e,n){var i=0;e&&(i|=4),cT(n,t,i,e)}var eu="_reactListening"+Math.random().toString(36).slice(2);function Va(t){if(!t[eu]){t[eu]=!0,yE.forEach(function(n){n!=="selectionchange"&&(w1.has(n)||bd(n,!1,t),bd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[eu]||(e[eu]=!0,bd("selectionchange",!1,e))}}function cT(t,e,n,i){switch(KE(e)){case 1:var r=MC;break;case 4:r=OC;break;default:r=og}n=r.bind(null,e,n,t),r=void 0,!kf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function kd(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Ir(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}DE(function(){var u=s,h=ng(n),d=[];e:{var f=lT.get(t);if(f!==void 0){var m=lg,v=t;switch(t){case"keypress":if(Ru(n)===0)break e;case"keydown":case"keyup":m=YC;break;case"focusin":v="focus",m=wd;break;case"focusout":v="blur",m=wd;break;case"beforeblur":case"afterblur":m=wd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=g_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=FC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=ZC;break;case rT:case sT:case oT:m=BC;break;case aT:m=t1;break;case"scroll":m=LC;break;case"wheel":m=i1;break;case"copy":case"cut":case"paste":m=$C;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=y_}var w=(e&4)!==0,E=!w&&t==="scroll",T=w?f!==null?f+"Capture":null:f;w=[];for(var S=u,b;S!==null;){b=S;var R=b.stateNode;if(b.tag===5&&R!==null&&(b=R,T!==null&&(R=Ra(S,T),R!=null&&w.push(Fa(S,R,b)))),E)break;S=S.return}0<w.length&&(f=new m(f,v,null,n,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&n!==xf&&(v=n.relatedTarget||n.fromElement)&&(Ir(v)||v[ii]))break e;if((m||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=n.relatedTarget||n.toElement,m=u,v=v?Ir(v):null,v!==null&&(E=Yr(v),v!==E||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(w=g_,R="onMouseLeave",T="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(w=y_,R="onPointerLeave",T="onPointerEnter",S="pointer"),E=m==null?f:ws(m),b=v==null?f:ws(v),f=new w(R,S+"leave",m,n,h),f.target=E,f.relatedTarget=b,R=null,Ir(h)===u&&(w=new w(T,S+"enter",v,n,h),w.target=b,w.relatedTarget=E,R=w),E=R,m&&v)t:{for(w=m,T=v,S=0,b=w;b;b=ls(b))S++;for(b=0,R=T;R;R=ls(R))b++;for(;0<S-b;)w=ls(w),S--;for(;0<b-S;)T=ls(T),b--;for(;S--;){if(w===T||T!==null&&w===T.alternate)break t;w=ls(w),T=ls(T)}w=null}else w=null;m!==null&&C_(d,f,m,w,!1),v!==null&&E!==null&&C_(d,E,v,w,!0)}}e:{if(f=u?ws(u):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var M=c1;else if(w_(f))if(ZE)M=p1;else{M=d1;var D=h1}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=f1);if(M&&(M=M(t,u))){JE(d,M,n,h);break e}D&&D(t,f,u),t==="focusout"&&(D=f._wrapperState)&&D.controlled&&f.type==="number"&&wf(f,"number",f.value)}switch(D=u?ws(u):window,t){case"focusin":(w_(D)||D.contentEditable==="true")&&(_s=D,Nf=u,da=null);break;case"focusout":da=Nf=_s=null;break;case"mousedown":Df=!0;break;case"contextmenu":case"mouseup":case"dragend":Df=!1,x_(d,n,h);break;case"selectionchange":if(y1)break;case"keydown":case"keyup":x_(d,n,h)}var I;if(cg)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ys?YE(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(QE&&n.locale!=="ko"&&(ys||_!=="onCompositionStart"?_==="onCompositionEnd"&&ys&&(I=GE()):(Pi=h,ag="value"in Pi?Pi.value:Pi.textContent,ys=!0)),D=sc(u,_),0<D.length&&(_=new m_(_,t,null,n,h),d.push({event:_,listeners:D}),I?_.data=I:(I=XE(n),I!==null&&(_.data=I)))),(I=s1?o1(t,n):a1(t,n))&&(u=sc(u,"onBeforeInput"),0<u.length&&(h=new m_("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=I))}uT(d,e)})}function Fa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sc(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Ra(t,n),s!=null&&i.unshift(Fa(t,s,r)),s=Ra(t,e),s!=null&&i.push(Fa(t,s,r))),t=t.return}return i}function ls(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function C_(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=Ra(n,s),l!=null&&o.unshift(Fa(n,l,a))):r||(l=Ra(n,s),l!=null&&o.push(Fa(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var E1=/\r\n?/g,T1=/\u0000|\uFFFD/g;function A_(t){return(typeof t=="string"?t:""+t).replace(E1,`
`).replace(T1,"")}function tu(t,e,n){if(e=A_(e),A_(t)!==e&&n)throw Error(U(425))}function oc(){}var Mf=null,Of=null;function Lf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vf=typeof setTimeout=="function"?setTimeout:void 0,S1=typeof clearTimeout=="function"?clearTimeout:void 0,P_=typeof Promise=="function"?Promise:void 0,I1=typeof queueMicrotask=="function"?queueMicrotask:typeof P_<"u"?function(t){return P_.resolve(null).then(t).catch(x1)}:Vf;function x1(t){setTimeout(function(){throw t})}function Cd(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Ma(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Ma(e)}function Ui(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function R_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var lo=Math.random().toString(36).slice(2),bn="__reactFiber$"+lo,ja="__reactProps$"+lo,ii="__reactContainer$"+lo,Ff="__reactEvents$"+lo,b1="__reactListeners$"+lo,k1="__reactHandles$"+lo;function Ir(t){var e=t[bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ii]||n[bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=R_(t);t!==null;){if(n=t[bn])return n;t=R_(t)}return e}t=n,n=t.parentNode}return null}function fl(t){return t=t[bn]||t[ii],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ws(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function ih(t){return t[ja]||null}var jf=[],Es=-1;function rr(t){return{current:t}}function Ae(t){0>Es||(t.current=jf[Es],jf[Es]=null,Es--)}function Ie(t,e){Es++,jf[Es]=t.current,t.current=e}var Xi={},_t=rr(Xi),Mt=rr(!1),Lr=Xi;function Us(t,e){var n=t.type.contextTypes;if(!n)return Xi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Ot(t){return t=t.childContextTypes,t!=null}function ac(){Ae(Mt),Ae(_t)}function N_(t,e,n){if(_t.current!==Xi)throw Error(U(168));Ie(_t,e),Ie(Mt,n)}function hT(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(U(108,hC(t)||"Unknown",r));return Oe({},n,i)}function lc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Xi,Lr=_t.current,Ie(_t,t),Ie(Mt,Mt.current),!0}function D_(t,e,n){var i=t.stateNode;if(!i)throw Error(U(169));n?(t=hT(t,e,Lr),i.__reactInternalMemoizedMergedChildContext=t,Ae(Mt),Ae(_t),Ie(_t,t)):Ae(Mt),Ie(Mt,n)}var qn=null,rh=!1,Ad=!1;function dT(t){qn===null?qn=[t]:qn.push(t)}function C1(t){rh=!0,dT(t)}function sr(){if(!Ad&&qn!==null){Ad=!0;var t=0,e=we;try{var n=qn;for(we=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}qn=null,rh=!1}catch(r){throw qn!==null&&(qn=qn.slice(t+1)),VE(ig,sr),r}finally{we=e,Ad=!1}}return null}var Ts=[],Ss=0,uc=null,cc=0,Qt=[],Yt=0,Vr=null,Gn=1,Qn="";function vr(t,e){Ts[Ss++]=cc,Ts[Ss++]=uc,uc=t,cc=e}function fT(t,e,n){Qt[Yt++]=Gn,Qt[Yt++]=Qn,Qt[Yt++]=Vr,Vr=t;var i=Gn;t=Qn;var r=32-dn(i)-1;i&=~(1<<r),n+=1;var s=32-dn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Gn=1<<32-dn(e)+r|n<<r|i,Qn=s+t}else Gn=1<<s|n<<r|i,Qn=t}function dg(t){t.return!==null&&(vr(t,1),fT(t,1,0))}function fg(t){for(;t===uc;)uc=Ts[--Ss],Ts[Ss]=null,cc=Ts[--Ss],Ts[Ss]=null;for(;t===Vr;)Vr=Qt[--Yt],Qt[Yt]=null,Qn=Qt[--Yt],Qt[Yt]=null,Gn=Qt[--Yt],Qt[Yt]=null}var Wt=null,zt=null,Pe=!1,cn=null;function pT(t,e){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function M_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wt=t,zt=Ui(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wt=t,zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Vr!==null?{id:Gn,overflow:Qn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Wt=t,zt=null,!0):!1;default:return!1}}function Uf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Bf(t){if(Pe){var e=zt;if(e){var n=e;if(!M_(t,e)){if(Uf(t))throw Error(U(418));e=Ui(n.nextSibling);var i=Wt;e&&M_(t,e)?pT(i,n):(t.flags=t.flags&-4097|2,Pe=!1,Wt=t)}}else{if(Uf(t))throw Error(U(418));t.flags=t.flags&-4097|2,Pe=!1,Wt=t}}}function O_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wt=t}function nu(t){if(t!==Wt)return!1;if(!Pe)return O_(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lf(t.type,t.memoizedProps)),e&&(e=zt)){if(Uf(t))throw gT(),Error(U(418));for(;e;)pT(t,e),e=Ui(e.nextSibling)}if(O_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zt=Ui(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zt=null}}else zt=Wt?Ui(t.stateNode.nextSibling):null;return!0}function gT(){for(var t=zt;t;)t=Ui(t.nextSibling)}function Bs(){zt=Wt=null,Pe=!1}function pg(t){cn===null?cn=[t]:cn.push(t)}var A1=ci.ReactCurrentBatchConfig;function Lo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var i=n.stateNode}if(!i)throw Error(U(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function iu(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function L_(t){var e=t._init;return e(t._payload)}function mT(t){function e(T,S){if(t){var b=T.deletions;b===null?(T.deletions=[S],T.flags|=16):b.push(S)}}function n(T,S){if(!t)return null;for(;S!==null;)e(T,S),S=S.sibling;return null}function i(T,S){for(T=new Map;S!==null;)S.key!==null?T.set(S.key,S):T.set(S.index,S),S=S.sibling;return T}function r(T,S){return T=Wi(T,S),T.index=0,T.sibling=null,T}function s(T,S,b){return T.index=b,t?(b=T.alternate,b!==null?(b=b.index,b<S?(T.flags|=2,S):b):(T.flags|=2,S)):(T.flags|=1048576,S)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function a(T,S,b,R){return S===null||S.tag!==6?(S=Ld(b,T.mode,R),S.return=T,S):(S=r(S,b),S.return=T,S)}function l(T,S,b,R){var M=b.type;return M===ms?h(T,S,b.props.children,R,b.key):S!==null&&(S.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ti&&L_(M)===S.type)?(R=r(S,b.props),R.ref=Lo(T,S,b),R.return=T,R):(R=Fu(b.type,b.key,b.props,null,T.mode,R),R.ref=Lo(T,S,b),R.return=T,R)}function u(T,S,b,R){return S===null||S.tag!==4||S.stateNode.containerInfo!==b.containerInfo||S.stateNode.implementation!==b.implementation?(S=Vd(b,T.mode,R),S.return=T,S):(S=r(S,b.children||[]),S.return=T,S)}function h(T,S,b,R,M){return S===null||S.tag!==7?(S=Nr(b,T.mode,R,M),S.return=T,S):(S=r(S,b),S.return=T,S)}function d(T,S,b){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Ld(""+S,T.mode,b),S.return=T,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ql:return b=Fu(S.type,S.key,S.props,null,T.mode,b),b.ref=Lo(T,null,S),b.return=T,b;case gs:return S=Vd(S,T.mode,b),S.return=T,S;case Ti:var R=S._init;return d(T,R(S._payload),b)}if(Go(S)||Ro(S))return S=Nr(S,T.mode,b,null),S.return=T,S;iu(T,S)}return null}function f(T,S,b,R){var M=S!==null?S.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return M!==null?null:a(T,S,""+b,R);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case ql:return b.key===M?l(T,S,b,R):null;case gs:return b.key===M?u(T,S,b,R):null;case Ti:return M=b._init,f(T,S,M(b._payload),R)}if(Go(b)||Ro(b))return M!==null?null:h(T,S,b,R,null);iu(T,b)}return null}function m(T,S,b,R,M){if(typeof R=="string"&&R!==""||typeof R=="number")return T=T.get(b)||null,a(S,T,""+R,M);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ql:return T=T.get(R.key===null?b:R.key)||null,l(S,T,R,M);case gs:return T=T.get(R.key===null?b:R.key)||null,u(S,T,R,M);case Ti:var D=R._init;return m(T,S,b,D(R._payload),M)}if(Go(R)||Ro(R))return T=T.get(b)||null,h(S,T,R,M,null);iu(S,R)}return null}function v(T,S,b,R){for(var M=null,D=null,I=S,_=S=0,k=null;I!==null&&_<b.length;_++){I.index>_?(k=I,I=null):k=I.sibling;var C=f(T,I,b[_],R);if(C===null){I===null&&(I=k);break}t&&I&&C.alternate===null&&e(T,I),S=s(C,S,_),D===null?M=C:D.sibling=C,D=C,I=k}if(_===b.length)return n(T,I),Pe&&vr(T,_),M;if(I===null){for(;_<b.length;_++)I=d(T,b[_],R),I!==null&&(S=s(I,S,_),D===null?M=I:D.sibling=I,D=I);return Pe&&vr(T,_),M}for(I=i(T,I);_<b.length;_++)k=m(I,T,_,b[_],R),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?_:k.key),S=s(k,S,_),D===null?M=k:D.sibling=k,D=k);return t&&I.forEach(function(P){return e(T,P)}),Pe&&vr(T,_),M}function w(T,S,b,R){var M=Ro(b);if(typeof M!="function")throw Error(U(150));if(b=M.call(b),b==null)throw Error(U(151));for(var D=M=null,I=S,_=S=0,k=null,C=b.next();I!==null&&!C.done;_++,C=b.next()){I.index>_?(k=I,I=null):k=I.sibling;var P=f(T,I,C.value,R);if(P===null){I===null&&(I=k);break}t&&I&&P.alternate===null&&e(T,I),S=s(P,S,_),D===null?M=P:D.sibling=P,D=P,I=k}if(C.done)return n(T,I),Pe&&vr(T,_),M;if(I===null){for(;!C.done;_++,C=b.next())C=d(T,C.value,R),C!==null&&(S=s(C,S,_),D===null?M=C:D.sibling=C,D=C);return Pe&&vr(T,_),M}for(I=i(T,I);!C.done;_++,C=b.next())C=m(I,T,_,C.value,R),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?_:C.key),S=s(C,S,_),D===null?M=C:D.sibling=C,D=C);return t&&I.forEach(function(N){return e(T,N)}),Pe&&vr(T,_),M}function E(T,S,b,R){if(typeof b=="object"&&b!==null&&b.type===ms&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case ql:e:{for(var M=b.key,D=S;D!==null;){if(D.key===M){if(M=b.type,M===ms){if(D.tag===7){n(T,D.sibling),S=r(D,b.props.children),S.return=T,T=S;break e}}else if(D.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ti&&L_(M)===D.type){n(T,D.sibling),S=r(D,b.props),S.ref=Lo(T,D,b),S.return=T,T=S;break e}n(T,D);break}else e(T,D);D=D.sibling}b.type===ms?(S=Nr(b.props.children,T.mode,R,b.key),S.return=T,T=S):(R=Fu(b.type,b.key,b.props,null,T.mode,R),R.ref=Lo(T,S,b),R.return=T,T=R)}return o(T);case gs:e:{for(D=b.key;S!==null;){if(S.key===D)if(S.tag===4&&S.stateNode.containerInfo===b.containerInfo&&S.stateNode.implementation===b.implementation){n(T,S.sibling),S=r(S,b.children||[]),S.return=T,T=S;break e}else{n(T,S);break}else e(T,S);S=S.sibling}S=Vd(b,T.mode,R),S.return=T,T=S}return o(T);case Ti:return D=b._init,E(T,S,D(b._payload),R)}if(Go(b))return v(T,S,b,R);if(Ro(b))return w(T,S,b,R);iu(T,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,S!==null&&S.tag===6?(n(T,S.sibling),S=r(S,b),S.return=T,T=S):(n(T,S),S=Ld(b,T.mode,R),S.return=T,T=S),o(T)):n(T,S)}return E}var zs=mT(!0),yT=mT(!1),hc=rr(null),dc=null,Is=null,gg=null;function mg(){gg=Is=dc=null}function yg(t){var e=hc.current;Ae(hc),t._currentValue=e}function zf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Ns(t,e){dc=t,gg=Is=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nt=!0),t.firstContext=null)}function nn(t){var e=t._currentValue;if(gg!==t)if(t={context:t,memoizedValue:e,next:null},Is===null){if(dc===null)throw Error(U(308));Is=t,dc.dependencies={lanes:0,firstContext:t}}else Is=Is.next=t;return e}var xr=null;function _g(t){xr===null?xr=[t]:xr.push(t)}function _T(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,_g(e)):(n.next=r.next,r.next=n),e.interleaved=n,ri(t,i)}function ri(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Si=!1;function vg(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vT(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bi(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,de&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ri(t,n)}return r=i.interleaved,r===null?(e.next=e,_g(i)):(e.next=r.next,r.next=e),i.interleaved=e,ri(t,n)}function Nu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,rg(t,n)}}function V_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fc(t,e,n,i){var r=t.updateQueue;Si=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var d=r.baseState;o=0,h=u=l=null,a=s;do{var f=a.lane,m=a.eventTime;if((i&f)===f){h!==null&&(h=h.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,w=a;switch(f=e,m=n,w.tag){case 1:if(v=w.payload,typeof v=="function"){d=v.call(m,d,f);break e}d=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,f=typeof v=="function"?v.call(m,d,f):v,f==null)break e;d=Oe({},d,f);break e;case 2:Si=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else m={eventTime:m,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=m,l=d):h=h.next=m,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(l=d),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);jr|=o,t.lanes=o,t.memoizedState=d}}function F_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(U(191,r));r.call(i)}}}var pl={},An=rr(pl),Ua=rr(pl),Ba=rr(pl);function br(t){if(t===pl)throw Error(U(174));return t}function wg(t,e){switch(Ie(Ba,e),Ie(Ua,t),Ie(An,pl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Tf(e,t)}Ae(An),Ie(An,e)}function $s(){Ae(An),Ae(Ua),Ae(Ba)}function wT(t){br(Ba.current);var e=br(An.current),n=Tf(e,t.type);e!==n&&(Ie(Ua,t),Ie(An,n))}function Eg(t){Ua.current===t&&(Ae(An),Ae(Ua))}var Ne=rr(0);function pc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pd=[];function Tg(){for(var t=0;t<Pd.length;t++)Pd[t]._workInProgressVersionPrimary=null;Pd.length=0}var Du=ci.ReactCurrentDispatcher,Rd=ci.ReactCurrentBatchConfig,Fr=0,De=null,He=null,Ye=null,gc=!1,fa=!1,za=0,P1=0;function ht(){throw Error(U(321))}function Sg(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!gn(t[n],e[n]))return!1;return!0}function Ig(t,e,n,i,r,s){if(Fr=s,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Du.current=t===null||t.memoizedState===null?M1:O1,t=n(i,r),fa){s=0;do{if(fa=!1,za=0,25<=s)throw Error(U(301));s+=1,Ye=He=null,e.updateQueue=null,Du.current=L1,t=n(i,r)}while(fa)}if(Du.current=mc,e=He!==null&&He.next!==null,Fr=0,Ye=He=De=null,gc=!1,e)throw Error(U(300));return t}function xg(){var t=za!==0;return za=0,t}function In(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ye===null?De.memoizedState=Ye=t:Ye=Ye.next=t,Ye}function rn(){if(He===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Ye===null?De.memoizedState:Ye.next;if(e!==null)Ye=e,He=t;else{if(t===null)throw Error(U(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Ye===null?De.memoizedState=Ye=t:Ye=Ye.next=t}return Ye}function $a(t,e){return typeof e=="function"?e(t):e}function Nd(t){var e=rn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=He,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Fr&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=i):l=l.next=d,De.lanes|=h,jr|=h}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,gn(i,e.memoizedState)||(Nt=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,De.lanes|=s,jr|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dd(t){var e=rn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);gn(s,e.memoizedState)||(Nt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function ET(){}function TT(t,e){var n=De,i=rn(),r=e(),s=!gn(i.memoizedState,r);if(s&&(i.memoizedState=r,Nt=!0),i=i.queue,bg(xT.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Ye!==null&&Ye.memoizedState.tag&1){if(n.flags|=2048,Wa(9,IT.bind(null,n,i,r,e),void 0,null),Xe===null)throw Error(U(349));Fr&30||ST(n,e,r)}return r}function ST(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function IT(t,e,n,i){e.value=n,e.getSnapshot=i,bT(e)&&kT(t)}function xT(t,e,n){return n(function(){bT(e)&&kT(t)})}function bT(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!gn(t,n)}catch{return!0}}function kT(t){var e=ri(t,1);e!==null&&fn(e,t,1,-1)}function j_(t){var e=In();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:t},e.queue=t,t=t.dispatch=D1.bind(null,De,t),[e.memoizedState,t]}function Wa(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function CT(){return rn().memoizedState}function Mu(t,e,n,i){var r=In();De.flags|=t,r.memoizedState=Wa(1|e,n,void 0,i===void 0?null:i)}function sh(t,e,n,i){var r=rn();i=i===void 0?null:i;var s=void 0;if(He!==null){var o=He.memoizedState;if(s=o.destroy,i!==null&&Sg(i,o.deps)){r.memoizedState=Wa(e,n,s,i);return}}De.flags|=t,r.memoizedState=Wa(1|e,n,s,i)}function U_(t,e){return Mu(8390656,8,t,e)}function bg(t,e){return sh(2048,8,t,e)}function AT(t,e){return sh(4,2,t,e)}function PT(t,e){return sh(4,4,t,e)}function RT(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NT(t,e,n){return n=n!=null?n.concat([t]):null,sh(4,4,RT.bind(null,e,t),n)}function kg(){}function DT(t,e){var n=rn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Sg(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function MT(t,e){var n=rn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Sg(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function OT(t,e,n){return Fr&21?(gn(n,e)||(n=UE(),De.lanes|=n,jr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nt=!0),t.memoizedState=n)}function R1(t,e){var n=we;we=n!==0&&4>n?n:4,t(!0);var i=Rd.transition;Rd.transition={};try{t(!1),e()}finally{we=n,Rd.transition=i}}function LT(){return rn().memoizedState}function N1(t,e,n){var i=$i(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},VT(t))FT(e,n);else if(n=_T(t,e,n,i),n!==null){var r=xt();fn(n,t,i,r),jT(n,e,i)}}function D1(t,e,n){var i=$i(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(VT(t))FT(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,gn(a,o)){var l=e.interleaved;l===null?(r.next=r,_g(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=_T(t,e,r,i),n!==null&&(r=xt(),fn(n,t,i,r),jT(n,e,i))}}function VT(t){var e=t.alternate;return t===De||e!==null&&e===De}function FT(t,e){fa=gc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function jT(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,rg(t,n)}}var mc={readContext:nn,useCallback:ht,useContext:ht,useEffect:ht,useImperativeHandle:ht,useInsertionEffect:ht,useLayoutEffect:ht,useMemo:ht,useReducer:ht,useRef:ht,useState:ht,useDebugValue:ht,useDeferredValue:ht,useTransition:ht,useMutableSource:ht,useSyncExternalStore:ht,useId:ht,unstable_isNewReconciler:!1},M1={readContext:nn,useCallback:function(t,e){return In().memoizedState=[t,e===void 0?null:e],t},useContext:nn,useEffect:U_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Mu(4194308,4,RT.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Mu(4194308,4,t,e)},useInsertionEffect:function(t,e){return Mu(4,2,t,e)},useMemo:function(t,e){var n=In();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=In();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=N1.bind(null,De,t),[i.memoizedState,t]},useRef:function(t){var e=In();return t={current:t},e.memoizedState=t},useState:j_,useDebugValue:kg,useDeferredValue:function(t){return In().memoizedState=t},useTransition:function(){var t=j_(!1),e=t[0];return t=R1.bind(null,t[1]),In().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=De,r=In();if(Pe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Xe===null)throw Error(U(349));Fr&30||ST(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,U_(xT.bind(null,i,s,t),[t]),i.flags|=2048,Wa(9,IT.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=In(),e=Xe.identifierPrefix;if(Pe){var n=Qn,i=Gn;n=(i&~(1<<32-dn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=za++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=P1++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},O1={readContext:nn,useCallback:DT,useContext:nn,useEffect:bg,useImperativeHandle:NT,useInsertionEffect:AT,useLayoutEffect:PT,useMemo:MT,useReducer:Nd,useRef:CT,useState:function(){return Nd($a)},useDebugValue:kg,useDeferredValue:function(t){var e=rn();return OT(e,He.memoizedState,t)},useTransition:function(){var t=Nd($a)[0],e=rn().memoizedState;return[t,e]},useMutableSource:ET,useSyncExternalStore:TT,useId:LT,unstable_isNewReconciler:!1},L1={readContext:nn,useCallback:DT,useContext:nn,useEffect:bg,useImperativeHandle:NT,useInsertionEffect:AT,useLayoutEffect:PT,useMemo:MT,useReducer:Dd,useRef:CT,useState:function(){return Dd($a)},useDebugValue:kg,useDeferredValue:function(t){var e=rn();return He===null?e.memoizedState=t:OT(e,He.memoizedState,t)},useTransition:function(){var t=Dd($a)[0],e=rn().memoizedState;return[t,e]},useMutableSource:ET,useSyncExternalStore:TT,useId:LT,unstable_isNewReconciler:!1};function ln(t,e){if(t&&t.defaultProps){e=Oe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function $f(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Oe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var oh={isMounted:function(t){return(t=t._reactInternals)?Yr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=xt(),r=$i(t),s=Zn(i,r);s.payload=e,n!=null&&(s.callback=n),e=Bi(t,s,r),e!==null&&(fn(e,t,r,i),Nu(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=xt(),r=$i(t),s=Zn(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Bi(t,s,r),e!==null&&(fn(e,t,r,i),Nu(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=xt(),i=$i(t),r=Zn(n,i);r.tag=2,e!=null&&(r.callback=e),e=Bi(t,r,i),e!==null&&(fn(e,t,i,n),Nu(e,t,i))}};function B_(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!La(n,i)||!La(r,s):!0}function UT(t,e,n){var i=!1,r=Xi,s=e.contextType;return typeof s=="object"&&s!==null?s=nn(s):(r=Ot(e)?Lr:_t.current,i=e.contextTypes,s=(i=i!=null)?Us(t,r):Xi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=oh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function z_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&oh.enqueueReplaceState(e,e.state,null)}function Wf(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},vg(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=nn(s):(s=Ot(e)?Lr:_t.current,r.context=Us(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&($f(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&oh.enqueueReplaceState(r,r.state,null),fc(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ws(t,e){try{var n="",i=e;do n+=cC(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function Md(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var V1=typeof WeakMap=="function"?WeakMap:Map;function BT(t,e,n){n=Zn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){_c||(_c=!0,tp=i),Hf(t,e)},n}function zT(t,e,n){n=Zn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Hf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Hf(t,e),typeof i!="function"&&(zi===null?zi=new Set([this]):zi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function $_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new V1;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=X1.bind(null,t,e,n),e.then(t,t))}function W_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function H_(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Zn(-1,1),e.tag=2,Bi(n,e,1))),n.lanes|=1),t)}var F1=ci.ReactCurrentOwner,Nt=!1;function It(t,e,n,i){e.child=t===null?yT(e,null,n,i):zs(e,t.child,n,i)}function q_(t,e,n,i,r){n=n.render;var s=e.ref;return Ns(e,r),i=Ig(t,e,n,i,s,r),n=xg(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,si(t,e,r)):(Pe&&n&&dg(e),e.flags|=1,It(t,e,i,r),e.child)}function K_(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Og(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,$T(t,e,s,i,r)):(t=Fu(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:La,n(o,i)&&t.ref===e.ref)return si(t,e,r)}return e.flags|=1,t=Wi(s,i),t.ref=e.ref,t.return=e,e.child=t}function $T(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(La(s,i)&&t.ref===e.ref)if(Nt=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Nt=!0);else return e.lanes=t.lanes,si(t,e,r)}return qf(t,e,n,i,r)}function WT(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ie(bs,Bt),Bt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ie(bs,Bt),Bt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Ie(bs,Bt),Bt|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Ie(bs,Bt),Bt|=i;return It(t,e,r,n),e.child}function HT(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qf(t,e,n,i,r){var s=Ot(n)?Lr:_t.current;return s=Us(e,s),Ns(e,r),n=Ig(t,e,n,i,s,r),i=xg(),t!==null&&!Nt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,si(t,e,r)):(Pe&&i&&dg(e),e.flags|=1,It(t,e,n,r),e.child)}function G_(t,e,n,i,r){if(Ot(n)){var s=!0;lc(e)}else s=!1;if(Ns(e,r),e.stateNode===null)Ou(t,e),UT(e,n,i),Wf(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=nn(u):(u=Ot(n)?Lr:_t.current,u=Us(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&z_(e,o,i,u),Si=!1;var f=e.memoizedState;o.state=f,fc(e,i,o,r),l=e.memoizedState,a!==i||f!==l||Mt.current||Si?(typeof h=="function"&&($f(e,n,h,i),l=e.memoizedState),(a=Si||B_(e,n,a,i,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,vT(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:ln(e.type,a),o.props=u,d=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=nn(l):(l=Ot(n)?Lr:_t.current,l=Us(e,l));var m=n.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&z_(e,o,i,l),Si=!1,f=e.memoizedState,o.state=f,fc(e,i,o,r);var v=e.memoizedState;a!==d||f!==v||Mt.current||Si?(typeof m=="function"&&($f(e,n,m,i),v=e.memoizedState),(u=Si||B_(e,n,u,i,f,v,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Kf(t,e,n,i,s,r)}function Kf(t,e,n,i,r,s){HT(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&D_(e,n,!1),si(t,e,s);i=e.stateNode,F1.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=zs(e,t.child,null,s),e.child=zs(e,null,a,s)):It(t,e,a,s),e.memoizedState=i.state,r&&D_(e,n,!0),e.child}function qT(t){var e=t.stateNode;e.pendingContext?N_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&N_(t,e.context,!1),wg(t,e.containerInfo)}function Q_(t,e,n,i,r){return Bs(),pg(r),e.flags|=256,It(t,e,n,i),e.child}var Gf={dehydrated:null,treeContext:null,retryLane:0};function Qf(t){return{baseLanes:t,cachePool:null,transitions:null}}function KT(t,e,n){var i=e.pendingProps,r=Ne.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ie(Ne,r&1),t===null)return Bf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=uh(o,i,0,null),t=Nr(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Qf(n),e.memoizedState=Gf,t):Cg(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return j1(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Wi(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Wi(a,s):(s=Nr(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Qf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Gf,i}return s=t.child,t=s.sibling,i=Wi(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Cg(t,e){return e=uh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ru(t,e,n,i){return i!==null&&pg(i),zs(e,t.child,null,n),t=Cg(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function j1(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=Md(Error(U(422))),ru(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=uh({mode:"visible",children:i.children},r,0,null),s=Nr(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&zs(e,t.child,null,o),e.child.memoizedState=Qf(o),e.memoizedState=Gf,s);if(!(e.mode&1))return ru(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(U(419)),i=Md(s,i,void 0),ru(t,e,o,i)}if(a=(o&t.childLanes)!==0,Nt||a){if(i=Xe,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ri(t,r),fn(i,t,r,-1))}return Mg(),i=Md(Error(U(421))),ru(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=J1.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,zt=Ui(r.nextSibling),Wt=e,Pe=!0,cn=null,t!==null&&(Qt[Yt++]=Gn,Qt[Yt++]=Qn,Qt[Yt++]=Vr,Gn=t.id,Qn=t.overflow,Vr=e),e=Cg(e,i.children),e.flags|=4096,e)}function Y_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),zf(t.return,e,n)}function Od(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function GT(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(It(t,e,i.children,n),i=Ne.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Y_(t,n,e);else if(t.tag===19)Y_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Ie(Ne,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&pc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Od(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&pc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Od(e,!0,n,null,s);break;case"together":Od(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ou(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function si(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),jr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Wi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function U1(t,e,n){switch(e.tag){case 3:qT(e),Bs();break;case 5:wT(e);break;case 1:Ot(e.type)&&lc(e);break;case 4:wg(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ie(hc,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ie(Ne,Ne.current&1),e.flags|=128,null):n&e.child.childLanes?KT(t,e,n):(Ie(Ne,Ne.current&1),t=si(t,e,n),t!==null?t.sibling:null);Ie(Ne,Ne.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return GT(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ie(Ne,Ne.current),i)break;return null;case 22:case 23:return e.lanes=0,WT(t,e,n)}return si(t,e,n)}var QT,Yf,YT,XT;QT=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yf=function(){};YT=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,br(An.current);var s=null;switch(n){case"input":r=_f(t,r),i=_f(t,i),s=[];break;case"select":r=Oe({},r,{value:void 0}),i=Oe({},i,{value:void 0}),s=[];break;case"textarea":r=Ef(t,r),i=Ef(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=oc)}Sf(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Aa.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Aa.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ke("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};XT=function(t,e,n,i){n!==i&&(e.flags|=4)};function Vo(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function dt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function B1(t,e,n){var i=e.pendingProps;switch(fg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(e),null;case 1:return Ot(e.type)&&ac(),dt(e),null;case 3:return i=e.stateNode,$s(),Ae(Mt),Ae(_t),Tg(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(nu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cn!==null&&(rp(cn),cn=null))),Yf(t,e),dt(e),null;case 5:Eg(e);var r=br(Ba.current);if(n=e.type,t!==null&&e.stateNode!=null)YT(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(U(166));return dt(e),null}if(t=br(An.current),nu(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[bn]=e,i[ja]=s,t=(e.mode&1)!==0,n){case"dialog":ke("cancel",i),ke("close",i);break;case"iframe":case"object":case"embed":ke("load",i);break;case"video":case"audio":for(r=0;r<Yo.length;r++)ke(Yo[r],i);break;case"source":ke("error",i);break;case"img":case"image":case"link":ke("error",i),ke("load",i);break;case"details":ke("toggle",i);break;case"input":s_(i,s),ke("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},ke("invalid",i);break;case"textarea":a_(i,s),ke("invalid",i)}Sf(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&tu(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&tu(i.textContent,a,t),r=["children",""+a]):Aa.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ke("scroll",i)}switch(n){case"input":Kl(i),o_(i,s,!0);break;case"textarea":Kl(i),l_(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=oc)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xE(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[bn]=e,t[ja]=i,QT(t,e,!1,!1),e.stateNode=t;e:{switch(o=If(n,i),n){case"dialog":ke("cancel",t),ke("close",t),r=i;break;case"iframe":case"object":case"embed":ke("load",t),r=i;break;case"video":case"audio":for(r=0;r<Yo.length;r++)ke(Yo[r],t);r=i;break;case"source":ke("error",t),r=i;break;case"img":case"image":case"link":ke("error",t),ke("load",t),r=i;break;case"details":ke("toggle",t),r=i;break;case"input":s_(t,i),r=_f(t,i),ke("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Oe({},i,{value:void 0}),ke("invalid",t);break;case"textarea":a_(t,i),r=Ef(t,i),ke("invalid",t);break;default:r=i}Sf(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?CE(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&bE(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Pa(t,l):typeof l=="number"&&Pa(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Aa.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ke("scroll",t):l!=null&&Jp(t,s,l,o))}switch(n){case"input":Kl(t),o_(t,i,!1);break;case"textarea":Kl(t),l_(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Yi(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Cs(t,!!i.multiple,s,!1):i.defaultValue!=null&&Cs(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=oc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return dt(e),null;case 6:if(t&&e.stateNode!=null)XT(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(U(166));if(n=br(Ba.current),br(An.current),nu(e)){if(i=e.stateNode,n=e.memoizedProps,i[bn]=e,(s=i.nodeValue!==n)&&(t=Wt,t!==null))switch(t.tag){case 3:tu(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&tu(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[bn]=e,e.stateNode=i}return dt(e),null;case 13:if(Ae(Ne),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&zt!==null&&e.mode&1&&!(e.flags&128))gT(),Bs(),e.flags|=98560,s=!1;else if(s=nu(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[bn]=e}else Bs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;dt(e),s=!1}else cn!==null&&(rp(cn),cn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ne.current&1?Ke===0&&(Ke=3):Mg())),e.updateQueue!==null&&(e.flags|=4),dt(e),null);case 4:return $s(),Yf(t,e),t===null&&Va(e.stateNode.containerInfo),dt(e),null;case 10:return yg(e.type._context),dt(e),null;case 17:return Ot(e.type)&&ac(),dt(e),null;case 19:if(Ae(Ne),s=e.memoizedState,s===null)return dt(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)Vo(s,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=pc(t),o!==null){for(e.flags|=128,Vo(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ie(Ne,Ne.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ue()>Hs&&(e.flags|=128,i=!0,Vo(s,!1),e.lanes=4194304)}else{if(!i)if(t=pc(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Pe)return dt(e),null}else 2*Ue()-s.renderingStartTime>Hs&&n!==1073741824&&(e.flags|=128,i=!0,Vo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ue(),e.sibling=null,n=Ne.current,Ie(Ne,i?n&1|2:n&1),e):(dt(e),null);case 22:case 23:return Dg(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Bt&1073741824&&(dt(e),e.subtreeFlags&6&&(e.flags|=8192)):dt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function z1(t,e){switch(fg(e),e.tag){case 1:return Ot(e.type)&&ac(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $s(),Ae(Mt),Ae(_t),Tg(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Eg(e),null;case 13:if(Ae(Ne),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Bs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Ne),null;case 4:return $s(),null;case 10:return yg(e.type._context),null;case 22:case 23:return Dg(),null;case 24:return null;default:return null}}var su=!1,gt=!1,$1=typeof WeakSet=="function"?WeakSet:Set,$=null;function xs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Fe(t,e,i)}else n.current=null}function Xf(t,e,n){try{n()}catch(i){Fe(t,e,i)}}var X_=!1;function W1(t,e){if(Mf=ic,t=nT(),hg(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var m;d!==n||r!==0&&d.nodeType!==3||(a=o+r),d!==s||i!==0&&d.nodeType!==3||(l=o+i),d.nodeType===3&&(o+=d.nodeValue.length),(m=d.firstChild)!==null;)f=d,d=m;for(;;){if(d===t)break t;if(f===n&&++u===r&&(a=o),f===s&&++h===i&&(l=o),(m=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=m}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Of={focusedElem:t,selectionRange:n},ic=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,E=v.memoizedState,T=e.stateNode,S=T.getSnapshotBeforeUpdate(e.elementType===e.type?w:ln(e.type,w),E);T.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(R){Fe(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return v=X_,X_=!1,v}function pa(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Xf(e,n,s)}r=r.next}while(r!==i)}}function ah(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Jf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function JT(t){var e=t.alternate;e!==null&&(t.alternate=null,JT(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bn],delete e[ja],delete e[Ff],delete e[b1],delete e[k1])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ZT(t){return t.tag===5||t.tag===3||t.tag===4}function J_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ZT(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=oc));else if(i!==4&&(t=t.child,t!==null))for(Zf(t,e,n),t=t.sibling;t!==null;)Zf(t,e,n),t=t.sibling}function ep(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ep(t,e,n),t=t.sibling;t!==null;)ep(t,e,n),t=t.sibling}var et=null,un=!1;function yi(t,e,n){for(n=n.child;n!==null;)eS(t,e,n),n=n.sibling}function eS(t,e,n){if(Cn&&typeof Cn.onCommitFiberUnmount=="function")try{Cn.onCommitFiberUnmount(Zc,n)}catch{}switch(n.tag){case 5:gt||xs(n,e);case 6:var i=et,r=un;et=null,yi(t,e,n),et=i,un=r,et!==null&&(un?(t=et,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):et.removeChild(n.stateNode));break;case 18:et!==null&&(un?(t=et,n=n.stateNode,t.nodeType===8?Cd(t.parentNode,n):t.nodeType===1&&Cd(t,n),Ma(t)):Cd(et,n.stateNode));break;case 4:i=et,r=un,et=n.stateNode.containerInfo,un=!0,yi(t,e,n),et=i,un=r;break;case 0:case 11:case 14:case 15:if(!gt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Xf(n,e,o),r=r.next}while(r!==i)}yi(t,e,n);break;case 1:if(!gt&&(xs(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Fe(n,e,a)}yi(t,e,n);break;case 21:yi(t,e,n);break;case 22:n.mode&1?(gt=(i=gt)||n.memoizedState!==null,yi(t,e,n),gt=i):yi(t,e,n);break;default:yi(t,e,n)}}function Z_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new $1),e.forEach(function(i){var r=Z1.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function an(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:et=a.stateNode,un=!1;break e;case 3:et=a.stateNode.containerInfo,un=!0;break e;case 4:et=a.stateNode.containerInfo,un=!0;break e}a=a.return}if(et===null)throw Error(U(160));eS(s,o,r),et=null,un=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Fe(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tS(e,t),e=e.sibling}function tS(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(an(e,t),wn(t),i&4){try{pa(3,t,t.return),ah(3,t)}catch(w){Fe(t,t.return,w)}try{pa(5,t,t.return)}catch(w){Fe(t,t.return,w)}}break;case 1:an(e,t),wn(t),i&512&&n!==null&&xs(n,n.return);break;case 5:if(an(e,t),wn(t),i&512&&n!==null&&xs(n,n.return),t.flags&32){var r=t.stateNode;try{Pa(r,"")}catch(w){Fe(t,t.return,w)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&SE(r,s),If(a,o);var u=If(a,s);for(o=0;o<l.length;o+=2){var h=l[o],d=l[o+1];h==="style"?CE(r,d):h==="dangerouslySetInnerHTML"?bE(r,d):h==="children"?Pa(r,d):Jp(r,h,d,u)}switch(a){case"input":vf(r,s);break;case"textarea":IE(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Cs(r,!!s.multiple,m,!1):f!==!!s.multiple&&(s.defaultValue!=null?Cs(r,!!s.multiple,s.defaultValue,!0):Cs(r,!!s.multiple,s.multiple?[]:"",!1))}r[ja]=s}catch(w){Fe(t,t.return,w)}}break;case 6:if(an(e,t),wn(t),i&4){if(t.stateNode===null)throw Error(U(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(w){Fe(t,t.return,w)}}break;case 3:if(an(e,t),wn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ma(e.containerInfo)}catch(w){Fe(t,t.return,w)}break;case 4:an(e,t),wn(t);break;case 13:an(e,t),wn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Rg=Ue())),i&4&&Z_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(gt=(u=gt)||h,an(e,t),gt=u):an(e,t),wn(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for($=t,h=t.child;h!==null;){for(d=$=h;$!==null;){switch(f=$,m=f.child,f.tag){case 0:case 11:case 14:case 15:pa(4,f,f.return);break;case 1:xs(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){Fe(i,n,w)}}break;case 5:xs(f,f.return);break;case 22:if(f.memoizedState!==null){tv(d);continue}}m!==null?(m.return=f,$=m):tv(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=kE("display",o))}catch(w){Fe(t,t.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){Fe(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:an(e,t),wn(t),i&4&&Z_(t);break;case 21:break;default:an(e,t),wn(t)}}function wn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ZT(n)){var i=n;break e}n=n.return}throw Error(U(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Pa(r,""),i.flags&=-33);var s=J_(t);ep(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=J_(t);Zf(t,a,o);break;default:throw Error(U(161))}}catch(l){Fe(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function H1(t,e,n){$=t,nS(t)}function nS(t,e,n){for(var i=(t.mode&1)!==0;$!==null;){var r=$,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||su;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||gt;a=su;var u=gt;if(su=o,(gt=l)&&!u)for($=r;$!==null;)o=$,l=o.child,o.tag===22&&o.memoizedState!==null?nv(r):l!==null?(l.return=o,$=l):nv(r);for(;s!==null;)$=s,nS(s),s=s.sibling;$=r,su=a,gt=u}ev(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,$=s):ev(t)}}function ev(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:gt||ah(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!gt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:ln(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&F_(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}F_(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ma(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}gt||e.flags&512&&Jf(e)}catch(f){Fe(e,e.return,f)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function tv(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function nv(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ah(4,e)}catch(l){Fe(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Fe(e,r,l)}}var s=e.return;try{Jf(e)}catch(l){Fe(e,s,l)}break;case 5:var o=e.return;try{Jf(e)}catch(l){Fe(e,o,l)}}}catch(l){Fe(e,e.return,l)}if(e===t){$=null;break}var a=e.sibling;if(a!==null){a.return=e.return,$=a;break}$=e.return}}var q1=Math.ceil,yc=ci.ReactCurrentDispatcher,Ag=ci.ReactCurrentOwner,Zt=ci.ReactCurrentBatchConfig,de=0,Xe=null,We=null,rt=0,Bt=0,bs=rr(0),Ke=0,Ha=null,jr=0,lh=0,Pg=0,ga=null,At=null,Rg=0,Hs=1/0,Hn=null,_c=!1,tp=null,zi=null,ou=!1,Ri=null,vc=0,ma=0,np=null,Lu=-1,Vu=0;function xt(){return de&6?Ue():Lu!==-1?Lu:Lu=Ue()}function $i(t){return t.mode&1?de&2&&rt!==0?rt&-rt:A1.transition!==null?(Vu===0&&(Vu=UE()),Vu):(t=we,t!==0||(t=window.event,t=t===void 0?16:KE(t.type)),t):1}function fn(t,e,n,i){if(50<ma)throw ma=0,np=null,Error(U(185));hl(t,n,i),(!(de&2)||t!==Xe)&&(t===Xe&&(!(de&2)&&(lh|=n),Ke===4&&xi(t,rt)),Lt(t,i),n===1&&de===0&&!(e.mode&1)&&(Hs=Ue()+500,rh&&sr()))}function Lt(t,e){var n=t.callbackNode;AC(t,e);var i=nc(t,t===Xe?rt:0);if(i===0)n!==null&&h_(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&h_(n),e===1)t.tag===0?C1(iv.bind(null,t)):dT(iv.bind(null,t)),I1(function(){!(de&6)&&sr()}),n=null;else{switch(BE(i)){case 1:n=ig;break;case 4:n=FE;break;case 16:n=tc;break;case 536870912:n=jE;break;default:n=tc}n=cS(n,iS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iS(t,e){if(Lu=-1,Vu=0,de&6)throw Error(U(327));var n=t.callbackNode;if(Ds()&&t.callbackNode!==n)return null;var i=nc(t,t===Xe?rt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=wc(t,i);else{e=i;var r=de;de|=2;var s=sS();(Xe!==t||rt!==e)&&(Hn=null,Hs=Ue()+500,Rr(t,e));do try{Q1();break}catch(a){rS(t,a)}while(!0);mg(),yc.current=s,de=r,We!==null?e=0:(Xe=null,rt=0,e=Ke)}if(e!==0){if(e===2&&(r=Af(t),r!==0&&(i=r,e=ip(t,r))),e===1)throw n=Ha,Rr(t,0),xi(t,i),Lt(t,Ue()),n;if(e===6)xi(t,i);else{if(r=t.current.alternate,!(i&30)&&!K1(r)&&(e=wc(t,i),e===2&&(s=Af(t),s!==0&&(i=s,e=ip(t,s))),e===1))throw n=Ha,Rr(t,0),xi(t,i),Lt(t,Ue()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(U(345));case 2:wr(t,At,Hn);break;case 3:if(xi(t,i),(i&130023424)===i&&(e=Rg+500-Ue(),10<e)){if(nc(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){xt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Vf(wr.bind(null,t,At,Hn),e);break}wr(t,At,Hn);break;case 4:if(xi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-dn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Ue()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*q1(i/1960))-i,10<i){t.timeoutHandle=Vf(wr.bind(null,t,At,Hn),i);break}wr(t,At,Hn);break;case 5:wr(t,At,Hn);break;default:throw Error(U(329))}}}return Lt(t,Ue()),t.callbackNode===n?iS.bind(null,t):null}function ip(t,e){var n=ga;return t.current.memoizedState.isDehydrated&&(Rr(t,e).flags|=256),t=wc(t,e),t!==2&&(e=At,At=n,e!==null&&rp(e)),t}function rp(t){At===null?At=t:At.push.apply(At,t)}function K1(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!gn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xi(t,e){for(e&=~Pg,e&=~lh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dn(e),i=1<<n;t[n]=-1,e&=~i}}function iv(t){if(de&6)throw Error(U(327));Ds();var e=nc(t,0);if(!(e&1))return Lt(t,Ue()),null;var n=wc(t,e);if(t.tag!==0&&n===2){var i=Af(t);i!==0&&(e=i,n=ip(t,i))}if(n===1)throw n=Ha,Rr(t,0),xi(t,e),Lt(t,Ue()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,wr(t,At,Hn),Lt(t,Ue()),null}function Ng(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(Hs=Ue()+500,rh&&sr())}}function Ur(t){Ri!==null&&Ri.tag===0&&!(de&6)&&Ds();var e=de;de|=1;var n=Zt.transition,i=we;try{if(Zt.transition=null,we=1,t)return t()}finally{we=i,Zt.transition=n,de=e,!(de&6)&&sr()}}function Dg(){Bt=bs.current,Ae(bs)}function Rr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,S1(n)),We!==null)for(n=We.return;n!==null;){var i=n;switch(fg(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ac();break;case 3:$s(),Ae(Mt),Ae(_t),Tg();break;case 5:Eg(i);break;case 4:$s();break;case 13:Ae(Ne);break;case 19:Ae(Ne);break;case 10:yg(i.type._context);break;case 22:case 23:Dg()}n=n.return}if(Xe=t,We=t=Wi(t.current,null),rt=Bt=e,Ke=0,Ha=null,Pg=lh=jr=0,At=ga=null,xr!==null){for(e=0;e<xr.length;e++)if(n=xr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}xr=null}return t}function rS(t,e){do{var n=We;try{if(mg(),Du.current=mc,gc){for(var i=De.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}gc=!1}if(Fr=0,Ye=He=De=null,fa=!1,za=0,Ag.current=null,n===null||n.return===null){Ke=1,Ha=e,We=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=rt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=W_(o);if(m!==null){m.flags&=-257,H_(m,o,a,s,e),m.mode&1&&$_(s,u,e),e=m,l=u;var v=e.updateQueue;if(v===null){var w=new Set;w.add(l),e.updateQueue=w}else v.add(l);break e}else{if(!(e&1)){$_(s,u,e),Mg();break e}l=Error(U(426))}}else if(Pe&&a.mode&1){var E=W_(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),H_(E,o,a,s,e),pg(Ws(l,a));break e}}s=l=Ws(l,a),Ke!==4&&(Ke=2),ga===null?ga=[s]:ga.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var T=BT(s,l,e);V_(s,T);break e;case 1:a=l;var S=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(zi===null||!zi.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=zT(s,a,e);V_(s,R);break e}}s=s.return}while(s!==null)}aS(n)}catch(M){e=M,We===n&&n!==null&&(We=n=n.return);continue}break}while(!0)}function sS(){var t=yc.current;return yc.current=mc,t===null?mc:t}function Mg(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Xe===null||!(jr&268435455)&&!(lh&268435455)||xi(Xe,rt)}function wc(t,e){var n=de;de|=2;var i=sS();(Xe!==t||rt!==e)&&(Hn=null,Rr(t,e));do try{G1();break}catch(r){rS(t,r)}while(!0);if(mg(),de=n,yc.current=i,We!==null)throw Error(U(261));return Xe=null,rt=0,Ke}function G1(){for(;We!==null;)oS(We)}function Q1(){for(;We!==null&&!wC();)oS(We)}function oS(t){var e=uS(t.alternate,t,Bt);t.memoizedProps=t.pendingProps,e===null?aS(t):We=e,Ag.current=null}function aS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=z1(n,e),n!==null){n.flags&=32767,We=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,We=null;return}}else if(n=B1(n,e,Bt),n!==null){We=n;return}if(e=e.sibling,e!==null){We=e;return}We=e=t}while(e!==null);Ke===0&&(Ke=5)}function wr(t,e,n){var i=we,r=Zt.transition;try{Zt.transition=null,we=1,Y1(t,e,n,i)}finally{Zt.transition=r,we=i}return null}function Y1(t,e,n,i){do Ds();while(Ri!==null);if(de&6)throw Error(U(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(PC(t,s),t===Xe&&(We=Xe=null,rt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ou||(ou=!0,cS(tc,function(){return Ds(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Zt.transition,Zt.transition=null;var o=we;we=1;var a=de;de|=4,Ag.current=null,W1(t,n),tS(n,t),m1(Of),ic=!!Mf,Of=Mf=null,t.current=n,H1(n),EC(),de=a,we=o,Zt.transition=s}else t.current=n;if(ou&&(ou=!1,Ri=t,vc=r),s=t.pendingLanes,s===0&&(zi=null),IC(n.stateNode),Lt(t,Ue()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(_c)throw _c=!1,t=tp,tp=null,t;return vc&1&&t.tag!==0&&Ds(),s=t.pendingLanes,s&1?t===np?ma++:(ma=0,np=t):ma=0,sr(),null}function Ds(){if(Ri!==null){var t=BE(vc),e=Zt.transition,n=we;try{if(Zt.transition=null,we=16>t?16:t,Ri===null)var i=!1;else{if(t=Ri,Ri=null,vc=0,de&6)throw Error(U(331));var r=de;for(de|=4,$=t.current;$!==null;){var s=$,o=s.child;if($.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for($=u;$!==null;){var h=$;switch(h.tag){case 0:case 11:case 15:pa(8,h,s)}var d=h.child;if(d!==null)d.return=h,$=d;else for(;$!==null;){h=$;var f=h.sibling,m=h.return;if(JT(h),h===u){$=null;break}if(f!==null){f.return=m,$=f;break}$=m}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var E=w.sibling;w.sibling=null,w=E}while(w!==null)}}$=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$=o;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:pa(9,s,s.return)}var T=s.sibling;if(T!==null){T.return=s.return,$=T;break e}$=s.return}}var S=t.current;for($=S;$!==null;){o=$;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,$=b;else e:for(o=S;$!==null;){if(a=$,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:ah(9,a)}}catch(M){Fe(a,a.return,M)}if(a===o){$=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,$=R;break e}$=a.return}}if(de=r,sr(),Cn&&typeof Cn.onPostCommitFiberRoot=="function")try{Cn.onPostCommitFiberRoot(Zc,t)}catch{}i=!0}return i}finally{we=n,Zt.transition=e}}return!1}function rv(t,e,n){e=Ws(n,e),e=BT(t,e,1),t=Bi(t,e,1),e=xt(),t!==null&&(hl(t,1,e),Lt(t,e))}function Fe(t,e,n){if(t.tag===3)rv(t,t,n);else for(;e!==null;){if(e.tag===3){rv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(zi===null||!zi.has(i))){t=Ws(n,t),t=zT(e,t,1),e=Bi(e,t,1),t=xt(),e!==null&&(hl(e,1,t),Lt(e,t));break}}e=e.return}}function X1(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=xt(),t.pingedLanes|=t.suspendedLanes&n,Xe===t&&(rt&n)===n&&(Ke===4||Ke===3&&(rt&130023424)===rt&&500>Ue()-Rg?Rr(t,0):Pg|=n),Lt(t,e)}function lS(t,e){e===0&&(t.mode&1?(e=Yl,Yl<<=1,!(Yl&130023424)&&(Yl=4194304)):e=1);var n=xt();t=ri(t,e),t!==null&&(hl(t,e,n),Lt(t,n))}function J1(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lS(t,n)}function Z1(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(U(314))}i!==null&&i.delete(e),lS(t,n)}var uS;uS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mt.current)Nt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nt=!1,U1(t,e,n);Nt=!!(t.flags&131072)}else Nt=!1,Pe&&e.flags&1048576&&fT(e,cc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ou(t,e),t=e.pendingProps;var r=Us(e,_t.current);Ns(e,n),r=Ig(null,e,i,t,r,n);var s=xg();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ot(i)?(s=!0,lc(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,vg(e),r.updater=oh,e.stateNode=r,r._reactInternals=e,Wf(e,i,t,n),e=Kf(null,e,i,!0,s,n)):(e.tag=0,Pe&&s&&dg(e),It(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Ou(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=tA(i),t=ln(i,t),r){case 0:e=qf(null,e,i,t,n);break e;case 1:e=G_(null,e,i,t,n);break e;case 11:e=q_(null,e,i,t,n);break e;case 14:e=K_(null,e,i,ln(i.type,t),n);break e}throw Error(U(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ln(i,r),qf(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ln(i,r),G_(t,e,i,r,n);case 3:e:{if(qT(e),t===null)throw Error(U(387));i=e.pendingProps,s=e.memoizedState,r=s.element,vT(t,e),fc(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Ws(Error(U(423)),e),e=Q_(t,e,i,n,r);break e}else if(i!==r){r=Ws(Error(U(424)),e),e=Q_(t,e,i,n,r);break e}else for(zt=Ui(e.stateNode.containerInfo.firstChild),Wt=e,Pe=!0,cn=null,n=yT(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Bs(),i===r){e=si(t,e,n);break e}It(t,e,i,n)}e=e.child}return e;case 5:return wT(e),t===null&&Bf(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Lf(i,r)?o=null:s!==null&&Lf(i,s)&&(e.flags|=32),HT(t,e),It(t,e,o,n),e.child;case 6:return t===null&&Bf(e),null;case 13:return KT(t,e,n);case 4:return wg(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=zs(e,null,i,n):It(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ln(i,r),q_(t,e,i,r,n);case 7:return It(t,e,e.pendingProps,n),e.child;case 8:return It(t,e,e.pendingProps.children,n),e.child;case 12:return It(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ie(hc,i._currentValue),i._currentValue=o,s!==null)if(gn(s.value,o)){if(s.children===r.children&&!Mt.current){e=si(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Zn(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),zf(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),zf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}It(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ns(e,n),r=nn(r),i=i(r),e.flags|=1,It(t,e,i,n),e.child;case 14:return i=e.type,r=ln(i,e.pendingProps),r=ln(i.type,r),K_(t,e,i,r,n);case 15:return $T(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:ln(i,r),Ou(t,e),e.tag=1,Ot(i)?(t=!0,lc(e)):t=!1,Ns(e,n),UT(e,i,r),Wf(e,i,r,n),Kf(null,e,i,!0,t,n);case 19:return GT(t,e,n);case 22:return WT(t,e,n)}throw Error(U(156,e.tag))};function cS(t,e){return VE(t,e)}function eA(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(t,e,n,i){return new eA(t,e,n,i)}function Og(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tA(t){if(typeof t=="function")return Og(t)?1:0;if(t!=null){if(t=t.$$typeof,t===eg)return 11;if(t===tg)return 14}return 2}function Wi(t,e){var n=t.alternate;return n===null?(n=Xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fu(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Og(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ms:return Nr(n.children,r,s,e);case Zp:o=8,r|=8;break;case pf:return t=Xt(12,n,e,r|2),t.elementType=pf,t.lanes=s,t;case gf:return t=Xt(13,n,e,r),t.elementType=gf,t.lanes=s,t;case mf:return t=Xt(19,n,e,r),t.elementType=mf,t.lanes=s,t;case wE:return uh(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case _E:o=10;break e;case vE:o=9;break e;case eg:o=11;break e;case tg:o=14;break e;case Ti:o=16,i=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Xt(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function Nr(t,e,n,i){return t=Xt(7,t,i,e),t.lanes=n,t}function uh(t,e,n,i){return t=Xt(22,t,i,e),t.elementType=wE,t.lanes=n,t.stateNode={isHidden:!1},t}function Ld(t,e,n){return t=Xt(6,t,null,e),t.lanes=n,t}function Vd(t,e,n){return e=Xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nA(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yd(0),this.expirationTimes=yd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yd(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Lg(t,e,n,i,r,s,o,a,l){return t=new nA(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vg(s),t}function iA(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gs,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function hS(t){if(!t)return Xi;t=t._reactInternals;e:{if(Yr(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Ot(n))return hT(t,n,e)}return e}function dS(t,e,n,i,r,s,o,a,l){return t=Lg(n,i,!0,t,r,s,o,a,l),t.context=hS(null),n=t.current,i=xt(),r=$i(n),s=Zn(i,r),s.callback=e??null,Bi(n,s,r),t.current.lanes=r,hl(t,r,i),Lt(t,i),t}function ch(t,e,n,i){var r=e.current,s=xt(),o=$i(r);return n=hS(n),e.context===null?e.context=n:e.pendingContext=n,e=Zn(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Bi(r,e,o),t!==null&&(fn(t,r,o,s),Nu(t,r,o)),o}function Ec(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vg(t,e){sv(t,e),(t=t.alternate)&&sv(t,e)}function rA(){return null}var fS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Fg(t){this._internalRoot=t}hh.prototype.render=Fg.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));ch(t,e,null,null)};hh.prototype.unmount=Fg.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ur(function(){ch(null,t,null,null)}),e[ii]=null}};function hh(t){this._internalRoot=t}hh.prototype.unstable_scheduleHydration=function(t){if(t){var e=WE();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ii.length&&e!==0&&e<Ii[n].priority;n++);Ii.splice(n,0,t),n===0&&qE(t)}};function jg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ov(){}function sA(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Ec(o);s.call(u)}}var o=dS(e,i,t,0,null,!1,!1,"",ov);return t._reactRootContainer=o,t[ii]=o.current,Va(t.nodeType===8?t.parentNode:t),Ur(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=Ec(l);a.call(u)}}var l=Lg(t,0,!1,null,null,!1,!1,"",ov);return t._reactRootContainer=l,t[ii]=l.current,Va(t.nodeType===8?t.parentNode:t),Ur(function(){ch(e,l,n,i)}),l}function fh(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Ec(o);a.call(l)}}ch(e,o,t,r)}else o=sA(n,e,t,r,i);return Ec(o)}zE=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qo(e.pendingLanes);n!==0&&(rg(e,n|1),Lt(e,Ue()),!(de&6)&&(Hs=Ue()+500,sr()))}break;case 13:Ur(function(){var i=ri(t,1);if(i!==null){var r=xt();fn(i,t,1,r)}}),Vg(t,1)}};sg=function(t){if(t.tag===13){var e=ri(t,134217728);if(e!==null){var n=xt();fn(e,t,134217728,n)}Vg(t,134217728)}};$E=function(t){if(t.tag===13){var e=$i(t),n=ri(t,e);if(n!==null){var i=xt();fn(n,t,e,i)}Vg(t,e)}};WE=function(){return we};HE=function(t,e){var n=we;try{return we=t,e()}finally{we=n}};bf=function(t,e,n){switch(e){case"input":if(vf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=ih(i);if(!r)throw Error(U(90));TE(i),vf(i,r)}}}break;case"textarea":IE(t,n);break;case"select":e=n.value,e!=null&&Cs(t,!!n.multiple,e,!1)}};RE=Ng;NE=Ur;var oA={usingClientEntryPoint:!1,Events:[fl,ws,ih,AE,PE,Ng]},Fo={findFiberByHostInstance:Ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aA={bundleType:Fo.bundleType,version:Fo.version,rendererPackageName:Fo.rendererPackageName,rendererConfig:Fo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ci.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=OE(t),t===null?null:t.stateNode},findFiberByHostInstance:Fo.findFiberByHostInstance||rA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var au=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!au.isDisabled&&au.supportsFiber)try{Zc=au.inject(aA),Cn=au}catch{}}qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oA;qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jg(e))throw Error(U(200));return iA(t,e,null,n)};qt.createRoot=function(t,e){if(!jg(t))throw Error(U(299));var n=!1,i="",r=fS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Lg(t,1,!1,null,null,n,!1,i,r),t[ii]=e.current,Va(t.nodeType===8?t.parentNode:t),new Fg(e)};qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=OE(e),t=t===null?null:t.stateNode,t};qt.flushSync=function(t){return Ur(t)};qt.hydrate=function(t,e,n){if(!dh(e))throw Error(U(200));return fh(null,t,e,!0,n)};qt.hydrateRoot=function(t,e,n){if(!jg(t))throw Error(U(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=fS;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=dS(e,null,t,1,n??null,r,!1,s,o),t[ii]=e.current,Va(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new hh(e)};qt.render=function(t,e,n){if(!dh(e))throw Error(U(200));return fh(null,t,e,!1,n)};qt.unmountComponentAtNode=function(t){if(!dh(t))throw Error(U(40));return t._reactRootContainer?(Ur(function(){fh(null,null,t,!1,function(){t._reactRootContainer=null,t[ii]=null})}),!0):!1};qt.unstable_batchedUpdates=Ng;qt.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!dh(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return fh(t,e,n,!1,i)};qt.version="18.3.1-next-f1338f8080-20240426";function pS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pS)}catch(t){console.error(t)}}pS(),pE.exports=qt;var lA=pE.exports,av=lA;df.createRoot=av.createRoot,df.hydrateRoot=av.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qa(){return qa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qa.apply(this,arguments)}var Ni;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ni||(Ni={}));const lv="popstate";function uA(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return sp("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Tc(r)}return hA(e,n,null,t)}function Me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ug(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function cA(){return Math.random().toString(36).substr(2,8)}function uv(t,e){return{usr:t.state,key:t.key,idx:e}}function sp(t,e,n,i){return n===void 0&&(n=null),qa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?uo(e):e,{state:n,key:e&&e.key||i||cA()})}function Tc(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function uo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function hA(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Ni.Pop,l=null,u=h();u==null&&(u=0,o.replaceState(qa({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=Ni.Pop;let E=h(),T=E==null?null:E-u;u=E,l&&l({action:a,location:w.location,delta:T})}function f(E,T){a=Ni.Push;let S=sp(w.location,E,T);u=h()+1;let b=uv(S,u),R=w.createHref(S);try{o.pushState(b,"",R)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;r.location.assign(R)}s&&l&&l({action:a,location:w.location,delta:1})}function m(E,T){a=Ni.Replace;let S=sp(w.location,E,T);u=h();let b=uv(S,u),R=w.createHref(S);o.replaceState(b,"",R),s&&l&&l({action:a,location:w.location,delta:0})}function v(E){let T=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof E=="string"?E:Tc(E);return S=S.replace(/ $/,"%20"),Me(T,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,T)}let w={get action(){return a},get location(){return t(r,o)},listen(E){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(lv,d),l=E,()=>{r.removeEventListener(lv,d),l=null}},createHref(E){return e(r,E)},createURL:v,encodeLocation(E){let T=v(E);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:f,replace:m,go(E){return o.go(E)}};return w}var cv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(cv||(cv={}));function dA(t,e,n){return n===void 0&&(n="/"),fA(t,e,n)}function fA(t,e,n,i){let r=typeof e=="string"?uo(e):e,s=qs(r.pathname||"/",n);if(s==null)return null;let o=gS(t);pA(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=xA(s);a=SA(o[l],u)}return a}function gS(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Me(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=Hi([i,l.relativePath]),h=n.concat(l);s.children&&s.children.length>0&&(Me(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),gS(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:EA(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of mS(s.path))r(s,o,l)}),e}function mS(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=mS(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function pA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:TA(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const gA=/^:[\w-]+$/,mA=3,yA=2,_A=1,vA=10,wA=-2,hv=t=>t==="*";function EA(t,e){let n=t.split("/"),i=n.length;return n.some(hv)&&(i+=wA),e&&(i+=yA),n.filter(r=>!hv(r)).reduce((r,s)=>r+(gA.test(s)?mA:s===""?_A:vA),i)}function TA(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function SA(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],u=a===i.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=op({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},h),f=l.route;if(!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:Hi([s,d.pathname]),pathnameBase:PA(Hi([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=Hi([s,d.pathnameBase]))}return o}function op(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=IA(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,h,d)=>{let{paramName:f,isOptional:m}=h;if(f==="*"){let w=a[d]||"";o=s.slice(0,s.length-w.length).replace(/(.)\/+$/,"$1")}const v=a[d];return m&&!v?u[f]=void 0:u[f]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function IA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ug(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function xA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ug(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function qs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const bA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kA=t=>bA.test(t);function CA(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?uo(t):t,s;if(n)if(kA(n))s=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Ug(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?s=dv(n.substring(1),"/"):s=dv(n,e)}else s=e;return{pathname:s,search:RA(i),hash:NA(r)}}function dv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Fd(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function AA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Bg(t,e){let n=AA(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function zg(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=uo(t):(r=qa({},t),Me(!r.pathname||!r.pathname.includes("?"),Fd("?","pathname","search",r)),Me(!r.pathname||!r.pathname.includes("#"),Fd("#","pathname","hash",r)),Me(!r.search||!r.search.includes("#"),Fd("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}a=d>=0?e[d]:"/"}let l=CA(r,a),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||h)&&(l.pathname+="/"),l}const Hi=t=>t.join("/").replace(/\/\/+/g,"/"),PA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),RA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,NA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function DA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const yS=["post","put","patch","delete"];new Set(yS);const MA=["get",...yS];new Set(MA);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ka(){return Ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ka.apply(this,arguments)}const ph=O.createContext(null),_S=O.createContext(null),hi=O.createContext(null),gh=O.createContext(null),or=O.createContext({outlet:null,matches:[],isDataRoute:!1}),vS=O.createContext(null);function OA(t,e){let{relative:n}=e===void 0?{}:e;co()||Me(!1);let{basename:i,navigator:r}=O.useContext(hi),{hash:s,pathname:o,search:a}=mh(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:Hi([i,o])),r.createHref({pathname:l,search:a,hash:s})}function co(){return O.useContext(gh)!=null}function Xr(){return co()||Me(!1),O.useContext(gh).location}function wS(t){O.useContext(hi).static||O.useLayoutEffect(t)}function gl(){let{isDataRoute:t}=O.useContext(or);return t?GA():LA()}function LA(){co()||Me(!1);let t=O.useContext(ph),{basename:e,future:n,navigator:i}=O.useContext(hi),{matches:r}=O.useContext(or),{pathname:s}=Xr(),o=JSON.stringify(Bg(r,n.v7_relativeSplatPath)),a=O.useRef(!1);return wS(()=>{a.current=!0}),O.useCallback(function(u,h){if(h===void 0&&(h={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let d=zg(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Hi([e,d.pathname])),(h.replace?i.replace:i.push)(d,h.state,h)},[e,i,o,s,t])}function mh(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=O.useContext(hi),{matches:r}=O.useContext(or),{pathname:s}=Xr(),o=JSON.stringify(Bg(r,i.v7_relativeSplatPath));return O.useMemo(()=>zg(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function VA(t,e){return FA(t,e)}function FA(t,e,n,i){co()||Me(!1);let{navigator:r}=O.useContext(hi),{matches:s}=O.useContext(or),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Xr(),h;if(e){var d;let E=typeof e=="string"?uo(e):e;l==="/"||(d=E.pathname)!=null&&d.startsWith(l)||Me(!1),h=E}else h=u;let f=h.pathname||"/",m=f;if(l!=="/"){let E=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(E.length).join("/")}let v=dA(t,{pathname:m}),w=$A(v&&v.map(E=>Object.assign({},E,{params:Object.assign({},a,E.params),pathname:Hi([l,r.encodeLocation?r.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:Hi([l,r.encodeLocation?r.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),s,n,i);return e&&w?O.createElement(gh.Provider,{value:{location:Ka({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ni.Pop}},w):w}function jA(){let t=KA(),e=DA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:r},n):null,null)}const UA=O.createElement(jA,null);class BA extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(or.Provider,{value:this.props.routeContext},O.createElement(vS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function zA(t){let{routeContext:e,match:n,children:i}=t,r=O.useContext(ph);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(or.Provider,{value:e},i)}function $A(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Me(!1),o=o.slice(0,Math.min(o.length,h+1))}let l=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:m}=n,v=d.route.loader&&f[d.route.id]===void 0&&(!m||m[d.route.id]===void 0);if(d.route.lazy||v){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let m,v=!1,w=null,E=null;n&&(m=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||UA,l&&(u<0&&f===0?(QA("route-fallback"),v=!0,E=null):u===f&&(v=!0,E=d.route.hydrateFallbackElement||null)));let T=e.concat(o.slice(0,f+1)),S=()=>{let b;return m?b=w:v?b=E:d.route.Component?b=O.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=h,O.createElement(zA,{match:d,routeContext:{outlet:h,matches:T,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?O.createElement(BA,{location:n.location,revalidation:n.revalidation,component:w,error:m,children:S(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):S()},null)}var ES=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(ES||{}),TS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(TS||{});function WA(t){let e=O.useContext(ph);return e||Me(!1),e}function HA(t){let e=O.useContext(_S);return e||Me(!1),e}function qA(t){let e=O.useContext(or);return e||Me(!1),e}function SS(t){let e=qA(),n=e.matches[e.matches.length-1];return n.route.id||Me(!1),n.route.id}function KA(){var t;let e=O.useContext(vS),n=HA(),i=SS();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function GA(){let{router:t}=WA(ES.UseNavigateStable),e=SS(TS.UseNavigateStable),n=O.useRef(!1);return wS(()=>{n.current=!0}),O.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Ka({fromRouteId:e},s)))},[t,e])}const fv={};function QA(t,e,n){fv[t]||(fv[t]=!0)}function YA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ap(t){let{to:e,replace:n,state:i,relative:r}=t;co()||Me(!1);let{future:s,static:o}=O.useContext(hi),{matches:a}=O.useContext(or),{pathname:l}=Xr(),u=gl(),h=zg(e,Bg(a,s.v7_relativeSplatPath),l,r==="path"),d=JSON.stringify(h);return O.useEffect(()=>u(JSON.parse(d),{replace:n,state:i,relative:r}),[u,d,r,n,i]),null}function Tn(t){Me(!1)}function XA(t){let{basename:e="/",children:n=null,location:i,navigationType:r=Ni.Pop,navigator:s,static:o=!1,future:a}=t;co()&&Me(!1);let l=e.replace(/^\/*/,"/"),u=O.useMemo(()=>({basename:l,navigator:s,static:o,future:Ka({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=uo(i));let{pathname:h="/",search:d="",hash:f="",state:m=null,key:v="default"}=i,w=O.useMemo(()=>{let E=qs(h,l);return E==null?null:{location:{pathname:E,search:d,hash:f,state:m,key:v},navigationType:r}},[l,h,d,f,m,v,r]);return w==null?null:O.createElement(hi.Provider,{value:u},O.createElement(gh.Provider,{children:n,value:w}))}function JA(t){let{children:e,location:n}=t;return VA(lp(e),n)}new Promise(()=>{});function lp(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(i,r)=>{if(!O.isValidElement(i))return;let s=[...e,r];if(i.type===O.Fragment){n.push.apply(n,lp(i.props.children,s));return}i.type!==Tn&&Me(!1),!i.props.index||!i.props.children||Me(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=lp(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Sc(){return Sc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Sc.apply(this,arguments)}function IS(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function ZA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function eP(t,e){return t.button===0&&(!e||e==="_self")&&!ZA(t)}const tP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],nP=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],iP="6";try{window.__reactRouterVersion=iP}catch{}const rP=O.createContext({isTransitioning:!1}),sP="startTransition",pv=Xk[sP];function oP(t){let{basename:e,children:n,future:i,window:r}=t,s=O.useRef();s.current==null&&(s.current=uA({window:r,v5Compat:!0}));let o=s.current,[a,l]=O.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},h=O.useCallback(d=>{u&&pv?pv(()=>l(d)):l(d)},[l,u]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>YA(i),[i]),O.createElement(XA,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const aP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ga=O.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:u,preventScrollReset:h,viewTransition:d}=e,f=IS(e,tP),{basename:m}=O.useContext(hi),v,w=!1;if(typeof u=="string"&&lP.test(u)&&(v=u,aP))try{let b=new URL(window.location.href),R=u.startsWith("//")?new URL(b.protocol+u):new URL(u),M=qs(R.pathname,m);R.origin===b.origin&&M!=null?u=M+R.search+R.hash:w=!0}catch{}let E=OA(u,{relative:r}),T=cP(u,{replace:o,state:a,target:l,preventScrollReset:h,relative:r,viewTransition:d});function S(b){i&&i(b),b.defaultPrevented||T(b)}return O.createElement("a",Sc({},f,{href:v||E,onClick:w||s?i:S,ref:n,target:l}))}),us=O.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:a,to:l,viewTransition:u,children:h}=e,d=IS(e,nP),f=mh(l,{relative:d.relative}),m=Xr(),v=O.useContext(_S),{navigator:w,basename:E}=O.useContext(hi),T=v!=null&&hP(f)&&u===!0,S=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,b=m.pathname,R=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;r||(b=b.toLowerCase(),R=R?R.toLowerCase():null,S=S.toLowerCase()),R&&E&&(R=qs(R,E)||R);const M=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let D=b===S||!o&&b.startsWith(S)&&b.charAt(M)==="/",I=R!=null&&(R===S||!o&&R.startsWith(S)&&R.charAt(S.length)==="/"),_={isActive:D,isPending:I,isTransitioning:T},k=D?i:void 0,C;typeof s=="function"?C=s(_):C=[s,D?"active":null,I?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(_):a;return O.createElement(Ga,Sc({},d,{"aria-current":k,className:C,ref:n,style:P,to:l,viewTransition:u}),typeof h=="function"?h(_):h)});var up;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(up||(up={}));var gv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(gv||(gv={}));function uP(t){let e=O.useContext(ph);return e||Me(!1),e}function cP(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=gl(),u=Xr(),h=mh(t,{relative:o});return O.useCallback(d=>{if(eP(d,n)){d.preventDefault();let f=i!==void 0?i:Tc(u)===Tc(h);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,h,i,r,n,t,s,o,a])}function hP(t,e){e===void 0&&(e={});let n=O.useContext(rP);n==null&&Me(!1);let{basename:i}=uP(up.useViewTransitionState),r=mh(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=qs(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=qs(n.nextLocation.pathname,i)||n.nextLocation.pathname;return op(r.pathname,o)!=null||op(r.pathname,s)!=null}var mv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=r&63|128):(r&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=r&63|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=r&63|128)}return e},dP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},bS={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const s=t[r],o=r+1<t.length,a=o?t[r+1]:0,l=r+2<t.length,u=l?t[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4;let f=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(f=64)),i.push(n[h],n[d],n[f],n[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(xS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const s=n[t.charAt(r++)],a=r<t.length?n[t.charAt(r)]:0;++r;const u=r<t.length?n[t.charAt(r)]:64;++r;const d=r<t.length?n[t.charAt(r)]:64;if(++r,s==null||a==null||u==null||d==null)throw new fP;const f=s<<2|a>>4;if(i.push(f),u!==64){const m=a<<4&240|u>>2;if(i.push(m),d!==64){const v=u<<6&192|d;i.push(v)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pP=function(t){const e=xS(t);return bS.encodeByteArray(e,!0)},Ic=function(t){return pP(t).replace(/\./g,"")},kS=function(t){try{return bS.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mP=()=>gP().__FIREBASE_DEFAULTS__,yP=()=>{if(typeof process>"u"||typeof mv>"u")return;const t=mv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_P=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&kS(t[1]);return e&&JSON.parse(e)},yh=()=>{try{return mP()||yP()||_P()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},CS=t=>{var e,n;return(n=(e=yh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},vP=t=>{const e=CS(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},AS=()=>{var t;return(t=yh())===null||t===void 0?void 0:t.config},PS=t=>{var e;return(e=yh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ic(JSON.stringify(n)),Ic(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function SP(){var t;const e=(t=yh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function IP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function RS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function xP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function bP(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kP(){return!SP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function NS(){try{return typeof indexedDB=="object"}catch{return!1}}function DS(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}function CP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP="FirebaseError";class vn extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=AP,Object.setPrototypeOf(this,vn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Jr.prototype.create)}}class Jr{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?PP(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new vn(r,a,i)}}function PP(t,e){return t.replace(RP,(n,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const RP=/\{\$([^}]+)}/g;function NP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const s=t[r],o=e[r];if(yv(s)&&yv(o)){if(!xc(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function yv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ml(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Xo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Jo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function DP(t,e){const n=new MP(t,e);return n.subscribe.bind(n)}class MP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let r;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");OP(e,["next","error","complete"])?r=e:r={next:e,error:n,complete:i},r.next===void 0&&(r.next=jd),r.error===void 0&&(r.error=jd),r.complete===void 0&&(r.complete=jd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function OP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function jd(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP=1e3,VP=2,FP=4*60*60*1e3,jP=.5;function _v(t,e=LP,n=VP){const i=e*Math.pow(n,t),r=Math.round(jP*i*(Math.random()-.5)*2);return Math.min(FP,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ze(t){return t&&t._delegate?t._delegate:t}class mn{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new wP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:n});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(zP(e))try{this.getOrInitializeService({instanceIdentifier:Er})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Er){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Er){return this.instances.has(e)}getOptions(e=Er){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,n){var i;const r=this.normalizeInstanceIdentifier(n),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const r of i)try{r(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:BP(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Er){return this.component?this.component.multipleInstances?e:Er:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function BP(t){return t===Er?void 0:t}function zP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $P{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new UP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const WP={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},HP=ae.INFO,qP={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},KP=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),r=qP[e];if(r)console[r](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class _h{constructor(e){this.name=e,this._logLevel=HP,this._logHandler=KP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?WP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const GP=(t,e)=>e.some(n=>t instanceof n);let vv,wv;function QP(){return vv||(vv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function YP(){return wv||(wv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const MS=new WeakMap,cp=new WeakMap,OS=new WeakMap,Ud=new WeakMap,$g=new WeakMap;function XP(t){const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(qi(t.result)),r()},o=()=>{i(t.error),r()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&MS.set(n,t)}).catch(()=>{}),$g.set(e,t),e}function JP(t){if(cp.has(t))return;const e=new Promise((n,i)=>{const r=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),r()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),r()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});cp.set(t,e)}let hp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return cp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OS.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function ZP(t){hp=t(hp)}function eR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Bd(this),e,...n);return OS.set(i,e.sort?e.sort():[e]),qi(i)}:YP().includes(t)?function(...e){return t.apply(Bd(this),e),qi(MS.get(this))}:function(...e){return qi(t.apply(Bd(this),e))}}function tR(t){return typeof t=="function"?eR(t):(t instanceof IDBTransaction&&JP(t),GP(t,QP())?new Proxy(t,hp):t)}function qi(t){if(t instanceof IDBRequest)return XP(t);if(Ud.has(t))return Ud.get(t);const e=tR(t);return e!==t&&(Ud.set(t,e),$g.set(e,t)),e}const Bd=t=>$g.get(t);function LS(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=qi(o);return i&&o.addEventListener("upgradeneeded",l=>{i(qi(o.result),l.oldVersion,l.newVersion,qi(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const nR=["get","getKey","getAll","getAllKeys","count"],iR=["put","add","delete","clear"],zd=new Map;function Ev(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zd.get(e))return zd.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=iR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(r||nR.includes(n)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),r&&l.done]))[0]};return zd.set(e,s),s}ZP(t=>({...t,get:(e,n,i)=>Ev(e,n)||t.get(e,n,i),has:(e,n)=>!!Ev(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function sR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const dp="@firebase/app",Tv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi=new _h("@firebase/app"),oR="@firebase/app-compat",aR="@firebase/analytics-compat",lR="@firebase/analytics",uR="@firebase/app-check-compat",cR="@firebase/app-check",hR="@firebase/auth",dR="@firebase/auth-compat",fR="@firebase/database",pR="@firebase/data-connect",gR="@firebase/database-compat",mR="@firebase/functions",yR="@firebase/functions-compat",_R="@firebase/installations",vR="@firebase/installations-compat",wR="@firebase/messaging",ER="@firebase/messaging-compat",TR="@firebase/performance",SR="@firebase/performance-compat",IR="@firebase/remote-config",xR="@firebase/remote-config-compat",bR="@firebase/storage",kR="@firebase/storage-compat",CR="@firebase/firestore",AR="@firebase/vertexai-preview",PR="@firebase/firestore-compat",RR="firebase",NR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fp="[DEFAULT]",DR={[dp]:"fire-core",[oR]:"fire-core-compat",[lR]:"fire-analytics",[aR]:"fire-analytics-compat",[cR]:"fire-app-check",[uR]:"fire-app-check-compat",[hR]:"fire-auth",[dR]:"fire-auth-compat",[fR]:"fire-rtdb",[pR]:"fire-data-connect",[gR]:"fire-rtdb-compat",[mR]:"fire-fn",[yR]:"fire-fn-compat",[_R]:"fire-iid",[vR]:"fire-iid-compat",[wR]:"fire-fcm",[ER]:"fire-fcm-compat",[TR]:"fire-perf",[SR]:"fire-perf-compat",[IR]:"fire-rc",[xR]:"fire-rc-compat",[bR]:"fire-gcs",[kR]:"fire-gcs-compat",[CR]:"fire-fst",[PR]:"fire-fst-compat",[AR]:"fire-vertex","fire-js":"fire-js",[RR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bc=new Map,MR=new Map,pp=new Map;function Sv(t,e){try{t.container.addComponent(e)}catch(n){oi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function On(t){const e=t.name;if(pp.has(e))return oi.debug(`There were multiple attempts to register component ${e}.`),!1;pp.set(e,t);for(const n of bc.values())Sv(n,t);for(const n of MR.values())Sv(n,t);return!0}function yl(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function kn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ki=new Jr("app","Firebase",OR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new mn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ki.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=NR;function VS(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:fp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Ki.create("bad-app-name",{appName:String(r)});if(n||(n=AS()),!n)throw Ki.create("no-options");const s=bc.get(r);if(s){if(xc(n,s.options)&&xc(i,s.config))return s;throw Ki.create("duplicate-app",{appName:r})}const o=new $P(r);for(const l of pp.values())o.addComponent(l);const a=new LR(n,i,o);return bc.set(r,a),a}function FS(t=fp){const e=bc.get(t);if(!e&&t===fp&&AS())return VS();if(!e)throw Ki.create("no-app",{appName:t});return e}function en(t,e,n){var i;let r=(i=DR[t])!==null&&i!==void 0?i:t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),oi.warn(a.join(" "));return}On(new mn(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR="firebase-heartbeat-database",FR=1,Qa="firebase-heartbeat-store";let $d=null;function jS(){return $d||($d=LS(VR,FR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Qa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ki.create("idb-open",{originalErrorMessage:t.message})})),$d}async function jR(t){try{const n=(await jS()).transaction(Qa),i=await n.objectStore(Qa).get(US(t));return await n.done,i}catch(e){if(e instanceof vn)oi.warn(e.message);else{const n=Ki.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});oi.warn(n.message)}}}async function Iv(t,e){try{const i=(await jS()).transaction(Qa,"readwrite");await i.objectStore(Qa).put(e,US(t)),await i.done}catch(n){if(n instanceof vn)oi.warn(n.message);else{const i=Ki.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});oi.warn(i.message)}}}function US(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=1024,BR=30*24*60*60*1e3;class zR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new WR(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=xv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=BR}),this._storage.overwrite(this._heartbeatsCache))}catch(i){oi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xv(),{heartbeatsToSend:i,unsentEntries:r}=$R(this._heartbeatsCache.heartbeats),s=Ic(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return oi.warn(n),""}}}function xv(){return new Date().toISOString().substring(0,10)}function $R(t,e=UR){const n=[];let i=t.slice();for(const r of t){const s=n.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),bv(n)>e){s.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),bv(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class WR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return NS()?DS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Iv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const r=await this.read();return Iv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function bv(t){return Ic(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HR(t){On(new mn("platform-logger",e=>new rR(e),"PRIVATE")),On(new mn("heartbeat",e=>new zR(e),"PRIVATE")),en(dp,Tv,t),en(dp,Tv,"esm2017"),en("fire-js","")}HR("");function Wg(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function BS(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const qR=BS,zS=new Jr("auth","Firebase",BS());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kc=new _h("@firebase/auth");function KR(t,...e){kc.logLevel<=ae.WARN&&kc.warn(`Auth (${ho}): ${t}`,...e)}function ju(t,...e){kc.logLevel<=ae.ERROR&&kc.error(`Auth (${ho}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,...e){throw Hg(t,...e)}function Pn(t,...e){return Hg(t,...e)}function $S(t,e,n){const i=Object.assign(Object.assign({},qR()),{[e]:n});return new Jr("auth","Firebase",i).create(e,{appName:t.name})}function ei(t){return $S(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Hg(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return zS.create(t,...e)}function X(t,e,...n){if(!t)throw Hg(e,...n)}function Yn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ju(e),new Error(e)}function ai(t,e){t||Yn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function GR(){return kv()==="http:"||kv()==="https:"}function kv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(GR()||RS()||"connection"in navigator)?navigator.onLine:!0}function YR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(e,n){this.shortDelay=e,this.longDelay=n,ai(n>e,"Short delay should be less than long delay!"),this.isMobile=TP()||xP()}get(){return QR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(t,e){ai(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JR=new _l(3e4,6e4);function di(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Fn(t,e,n,i,r={}){return HS(t,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=ml(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},s);return IP()||(u.referrerPolicy="no-referrer"),WS.fetch()(qS(t,t.config.apiHost,n,a),u)})}async function HS(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},XR),e);try{const r=new eN(t),s=await Promise.race([n(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw lu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw lu(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw lu(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw lu(t,"user-disabled",o);const h=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw $S(t,h,u);yn(t,h)}}catch(r){if(r instanceof vn)throw r;yn(t,"network-request-failed",{message:String(r)})}}async function vl(t,e,n,i,r={}){const s=await Fn(t,e,n,i,r);return"mfaPendingCredential"in s&&yn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function qS(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?qg(t.config,r):`${t.config.apiScheme}://${r}`}function ZR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class eN{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Pn(this.auth,"network-request-failed")),JR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function lu(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=Pn(t,e,i);return r.customData._tokenResponse=n,r}function Cv(t){return t!==void 0&&t.enterprise!==void 0}class tN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return ZR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function nN(t,e){return Fn(t,"GET","/v2/recaptchaConfig",di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iN(t,e){return Fn(t,"POST","/v1/accounts:delete",e)}async function KS(t,e){return Fn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ya(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function rN(t,e=!1){const n=ze(t),i=await n.getIdToken(e),r=Kg(i);X(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:ya(Wd(r.auth_time)),issuedAtTime:ya(Wd(r.iat)),expirationTime:ya(Wd(r.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Wd(t){return Number(t)*1e3}function Kg(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return ju("JWT malformed, contained fewer than 3 sections"),null;try{const r=kS(n);return r?JSON.parse(r):(ju("Failed to decode base64 JWT payload"),null)}catch(r){return ju("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Av(t){const e=Kg(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ks(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof vn&&sN(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function sN({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ya(this.lastLoginAt),this.creationTime=ya(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cc(t){var e;const n=t.auth,i=await t.getIdToken(),r=await Ks(t,KS(n,{idToken:i}));X(r==null?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?GS(s.providerUserInfo):[],a=lN(t.providerData,o),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),h=l?u:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new mp(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function aN(t){const e=ze(t);await Cc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function lN(t,e){return[...t.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function GS(t){return t.map(e=>{var{providerId:n}=e,i=Wg(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(t,e){const n=await HS(t,{},async()=>{const i=ml({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=qS(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",WS.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function cN(t,e){return Fn(t,"POST","/v2/accounts:revokeToken",di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Av(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");const n=Av(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:r,expiresIn:s}=await uN(e,n);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:r,expirationTime:s}=n,o=new Ms;return i&&(X(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(X(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(X(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ms,this.toJSON())}_performRefresh(){return Yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xn{constructor(e){var{uid:n,auth:i,stsTokenManager:r}=e,s=Wg(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new oN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new mp(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ks(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return rN(this,e)}reload(){return aN(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await Cc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(kn(this.auth.app))return Promise.reject(ei(this.auth));const e=await this.getIdToken();return await Ks(this,iN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,r,s,o,a,l,u,h;const d=(i=n.displayName)!==null&&i!==void 0?i:void 0,f=(r=n.email)!==null&&r!==void 0?r:void 0,m=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,v=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,T=(u=n.createdAt)!==null&&u!==void 0?u:void 0,S=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:R,isAnonymous:M,providerData:D,stsTokenManager:I}=n;X(b&&I,e,"internal-error");const _=Ms.fromJSON(this.name,I);X(typeof b=="string",e,"internal-error"),_i(d,e.name),_i(f,e.name),X(typeof R=="boolean",e,"internal-error"),X(typeof M=="boolean",e,"internal-error"),_i(m,e.name),_i(v,e.name),_i(w,e.name),_i(E,e.name),_i(T,e.name),_i(S,e.name);const k=new Xn({uid:b,auth:e,email:f,emailVerified:R,displayName:d,isAnonymous:M,photoURL:v,phoneNumber:m,tenantId:w,stsTokenManager:_,createdAt:T,lastLoginAt:S});return D&&Array.isArray(D)&&(k.providerData=D.map(C=>Object.assign({},C))),E&&(k._redirectEventId=E),k}static async _fromIdTokenResponse(e,n,i=!1){const r=new Ms;r.updateFromServerResponse(n);const s=new Xn({uid:n.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Cc(s),s}static async _fromGetAccountInfoResponse(e,n,i){const r=n.users[0];X(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?GS(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!(s!=null&&s.length),a=new Ms;a.updateFromIdToken(i);const l=new Xn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new mp(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(s!=null&&s.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=new Map;function Jn(t){ai(t instanceof Function,"Expected a class definition");let e=Pv.get(t);return e?(ai(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Pv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}QS.type="NONE";const Rv=QS;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uu(t,e,n){return`firebase:${t}:${e}:${n}`}class Os{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Uu(this.userKey,r.apiKey,s),this.fullPersistenceKey=Uu("persistence",r.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Os(Jn(Rv),e,i);const r=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let s=r[0]||Jn(Rv);const o=Uu(i,e.config.apiKey,e.name);let a=null;for(const u of n)try{const h=await u._get(o);if(h){const d=Xn._fromJSON(e,h);u!==s&&(a=d),s=u;break}}catch{}const l=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Os(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==s)try{await u._remove(o)}catch{}})),new Os(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZS(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(YS(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tI(e))return"Blackberry";if(nI(e))return"Webos";if(XS(e))return"Safari";if((e.includes("chrome/")||JS(e))&&!e.includes("edge/"))return"Chrome";if(eI(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function YS(t=vt()){return/firefox\//i.test(t)}function XS(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JS(t=vt()){return/crios\//i.test(t)}function ZS(t=vt()){return/iemobile/i.test(t)}function eI(t=vt()){return/android/i.test(t)}function tI(t=vt()){return/blackberry/i.test(t)}function nI(t=vt()){return/webos/i.test(t)}function Gg(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function hN(t=vt()){var e;return Gg(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function dN(){return bP()&&document.documentMode===10}function iI(t=vt()){return Gg(t)||eI(t)||nI(t)||tI(t)||/windows phone/i.test(t)||ZS(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(t,e=[]){let n;switch(t){case"Browser":n=Nv(vt());break;case"Worker":n=`${Nv(vt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ho}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=n,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const r of n)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pN(t,e={}){return Fn(t,"GET","/v2/passwordPolicy",di(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=6;class mN{constructor(e){var n,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:gN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),r&&(n.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n,i,r){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dv(this),this.idTokenSubscription=new Dv(this),this.beforeStateQueue=new fN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zS,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jn(n)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Os.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await KS(this,{idToken:e}),i=await Xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(kn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=r==null?void 0:r._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Cc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=YR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(kn(this.app))return Promise.reject(ei(this));const n=e?ze(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return kn(this.app)?Promise.reject(ei(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return kn(this.app)?Promise.reject(ei(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await pN(this),n=new mN(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Jr("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await cN(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jn(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=await Os.create(this,[Jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,r){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(n["X-Firebase-AppCheck"]=r),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&KR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ar(t){return ze(t)}class Dv{constructor(e){this.auth=e,this.observer=null,this.addObserver=DP(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function _N(t){vh=t}function sI(t){return vh.loadJS(t)}function vN(){return vh.recaptchaEnterpriseScript}function wN(){return vh.gapiScript}function EN(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const TN="recaptcha-enterprise",SN="NO_RECAPTCHA";class IN{constructor(e){this.type=TN,this.auth=ar(e)}async verify(e="verify",n=!1){async function i(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{nN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new tN(l);return s.tenantId==null?s._agentRecaptchaConfig=u:s._tenantRecaptchaConfigs[s.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;Cv(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(u=>{o(u)}).catch(()=>{o(SN)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{i(this.auth).then(a=>{if(!n&&Cv(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=vN();l.length!==0&&(l+=a),sI(l).then(()=>{r(a,s,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function Mv(t,e,n,i=!1){const r=new IN(t);let s;try{s=await r.verify(n)}catch{s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ac(t,e,n,i){var r;if(!((r=t._getRecaptchaConfig())===null||r===void 0)&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Mv(t,e,n,n==="getOobCode");return i(t,s)}else return i(t,e).catch(async s=>{if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Mv(t,e,n,n==="getOobCode");return i(t,o)}else return Promise.reject(s)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(t,e){const n=yl(t,"auth");if(n.isInitialized()){const r=n.getImmediate(),s=n.getOptions();if(xc(s,e??{}))return r;yn(r,"already-initialized")}return n.initialize({options:e})}function bN(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Jn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function kN(t,e,n){const i=ar(t);X(i._canInitEmulator,i,"emulator-config-failed"),X(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=oI(e),{host:o,port:a}=CN(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),AN()}function oI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function CN(t){const e=oI(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Ov(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Ov(o)}}}function Ov(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function AN(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,n){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}}async function PN(t,e){return Fn(t,"POST","/v1/accounts:update",e)}async function RN(t,e){return Fn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NN(t,e){return vl(t,"POST","/v1/accounts:signInWithPassword",di(t,e))}async function DN(t,e){return Fn(t,"POST","/v1/accounts:sendOobCode",di(t,e))}async function MN(t,e){return DN(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ON(t,e){return vl(t,"POST","/v1/accounts:signInWithEmailLink",di(t,e))}async function LN(t,e){return vl(t,"POST","/v1/accounts:signInWithEmailLink",di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends Qg{constructor(e,n,i,r=null){super("password",i),this._email=e,this._password=n,this._tenantId=r}static _fromEmailAndPassword(e,n){return new Ya(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Ya(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ac(e,n,"signInWithPassword",NN);case"emailLink":return ON(e,{email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ac(e,i,"signUpPassword",RN);case"emailLink":return LN(e,{idToken:n,email:this._email,oobCode:this._password});default:yn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ls(t,e){return vl(t,"POST","/v1/accounts:signInWithIdp",di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="http://localhost";class Br extends Qg{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Br(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):yn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=n,s=Wg(n,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Br(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ls(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,Ls(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ls(e,n)}buildRequest(){const e={requestUri:VN,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ml(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function jN(t){const e=Xo(Jo(t)).link,n=e?Xo(Jo(e)).deep_link_id:null,i=Xo(Jo(t)).deep_link_id;return(i?Xo(Jo(i)).link:null)||i||n||e||t}class Yg{constructor(e){var n,i,r,s,o,a;const l=Xo(Jo(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,h=(i=l.oobCode)!==null&&i!==void 0?i:null,d=FN((r=l.mode)!==null&&r!==void 0?r:null);X(u&&h&&d,"argument-error"),this.apiKey=u,this.operation=d,this.code=h,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=jN(e);try{return new Yg(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr{constructor(){this.providerId=Zr.PROVIDER_ID}static credential(e,n){return Ya._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=Yg.parseLink(n);return X(i,"argument-error"),Ya._fromEmailAndCode(e,i.code,i.tenantId)}}Zr.PROVIDER_ID="password";Zr.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zr.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends aI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi extends wl{constructor(){super("facebook.com")}static credential(e){return Br._fromParams({providerId:bi.PROVIDER_ID,signInMethod:bi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return bi.credentialFromTaggedObject(e)}static credentialFromError(e){return bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return bi.credential(e.oauthAccessToken)}catch{return null}}}bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";bi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki extends wl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Br._fromParams({providerId:ki.PROVIDER_ID,signInMethod:ki.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ki.credentialFromTaggedObject(e)}static credentialFromError(e){return ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return ki.credential(n,i)}catch{return null}}}ki.GOOGLE_SIGN_IN_METHOD="google.com";ki.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci extends wl{constructor(){super("github.com")}static credential(e){return Br._fromParams({providerId:Ci.PROVIDER_ID,signInMethod:Ci.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ci.credentialFromTaggedObject(e)}static credentialFromError(e){return Ci.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ci.credential(e.oauthAccessToken)}catch{return null}}}Ci.GITHUB_SIGN_IN_METHOD="github.com";Ci.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai extends wl{constructor(){super("twitter.com")}static credential(e,n){return Br._fromParams({providerId:Ai.PROVIDER_ID,signInMethod:Ai.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ai.credentialFromTaggedObject(e)}static credentialFromError(e){return Ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return Ai.credential(n,i)}catch{return null}}}Ai.TWITTER_SIGN_IN_METHOD="twitter.com";Ai.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UN(t,e){return vl(t,"POST","/v1/accounts:signUp",di(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,r=!1){const s=await Xn._fromIdTokenResponse(e,i,r),o=Lv(i);return new zr({user:s,providerId:o,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const r=Lv(i);return new zr({user:e,providerId:r,_tokenResponse:i,operationType:n})}}function Lv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends vn{constructor(e,n,i,r){var s;super(n.code,n.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Pc.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,r){return new Pc(e,n,i,r)}}function lI(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Pc._fromErrorAndOperation(t,s,e,i):s})}async function BN(t,e,n=!1){const i=await Ks(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return zr._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(t,e,n=!1){const{auth:i}=t;if(kn(i.app))return Promise.reject(ei(i));const r="reauthenticate";try{const s=await Ks(t,lI(i,r,e,t),n);X(s.idToken,i,"internal-error");const o=Kg(s.idToken);X(o,i,"internal-error");const{sub:a}=o;return X(t.uid===a,i,"user-mismatch"),zr._forOperation(t,r,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&yn(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cI(t,e,n=!1){if(kn(t.app))return Promise.reject(ei(t));const i="signIn",r=await lI(t,i,e),s=await zr._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function zN(t,e){return cI(ar(t),e)}async function $N(t,e){return uI(ze(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hI(t){const e=ar(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WN(t,e,n){const i=ar(t);await Ac(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",MN)}async function HN(t,e,n){if(kn(t.app))return Promise.reject(ei(t));const i=ar(t),o=await Ac(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",UN).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&hI(t),l}),a=await zr._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function qN(t,e,n){return kn(t.app)?Promise.reject(ei(t)):zN(ze(t),Zr.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&hI(t),i})}function KN(t,e){return GN(ze(t),null,e)}async function GN(t,e,n){const{auth:i}=t,s={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(s.password=n);const o=await Ks(t,PN(i,s));await t._updateTokensIfNecessary(o,!0)}function QN(t,e,n,i){return ze(t).onIdTokenChanged(e,n,i)}function YN(t,e,n){return ze(t).beforeAuthStateChanged(e,n)}function XN(t,e,n,i){return ze(t).onAuthStateChanged(e,n,i)}function JN(t){return ze(t).signOut()}const Rc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Rc,"1"),this.storage.removeItem(Rc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=1e3,eD=10;class fI extends dI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=iI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),r=this.localCache[n];i!==r&&e(n,r,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;n?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!n&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);dN()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,eD):r()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},ZN)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fI.type="LOCAL";const tD=fI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pI extends dI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}pI.type="SESSION";const gI=pI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(r=>r.isListeningto(e));if(n)return n;const i=new wh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:r,data:s}=n.data,o=this.handlersMap[r];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async u=>u(n.origin,s)),l=await nD(a);n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const u=Xg("",20);r.port1.start();const h=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){const f=d;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(f.data.response);break;default:clearTimeout(h),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return window}function rD(t){Rn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(){return typeof Rn().WorkerGlobalScope<"u"&&typeof Rn().importScripts=="function"}async function sD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function oD(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function aD(){return mI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yI="firebaseLocalStorageDb",lD=1,Nc="firebaseLocalStorage",_I="fbase_key";class El{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Eh(t,e){return t.transaction([Nc],e?"readwrite":"readonly").objectStore(Nc)}function uD(){const t=indexedDB.deleteDatabase(yI);return new El(t).toPromise()}function yp(){const t=indexedDB.open(yI,lD);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Nc,{keyPath:_I})}catch(r){n(r)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Nc)?e(i):(i.close(),await uD(),e(await yp()))})})}async function Vv(t,e,n){const i=Eh(t,!0).put({[_I]:e,value:n});return new El(i).toPromise()}async function cD(t,e){const n=Eh(t,!1).get(e),i=await new El(n).toPromise();return i===void 0?null:i.value}function Fv(t,e){const n=Eh(t,!0).delete(e);return new El(n).toPromise()}const hD=800,dD=3;class vI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await yp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>dD)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wh._getInstance(aD()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await sD(),!this.activeServiceWorker)return;this.sender=new iD(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||oD()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await yp();return await Vv(e,Rc,"1"),await Fv(e,Rc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>Vv(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>cD(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Fv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=Eh(r,!1).getAll();return new El(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),n.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),n.push(r));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),hD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}vI.type="LOCAL";const fD=vI;new _l(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pD(t,e){return e?Jn(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg extends Qg{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ls(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ls(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ls(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function gD(t){return cI(t.auth,new Jg(t),t.bypassAuthState)}function mD(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),uI(n,new Jg(t),t.bypassAuthState)}async function yD(t){const{auth:e,user:n}=t;return X(n,e,"internal-error"),BN(n,new Jg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(e,n,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gD;case"linkViaPopup":case"linkViaRedirect":return yD;case"reauthViaPopup":case"reauthViaRedirect":return mD;default:yn(this.auth,"internal-error")}}resolve(e){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ai(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _D=new _l(2e3,1e4);class ks extends wI{constructor(e,n,i,r,s){super(e,n,r,s),this.provider=i,this.authWindow=null,this.pollId=null,ks.currentPopupAction&&ks.currentPopupAction.cancel(),ks.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return X(e,this.auth,"internal-error"),e}async onExecution(){ai(this.filter.length===1,"Popup operations only handle one event");const e=Xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Pn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Pn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ks.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Pn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,_D.get())};e()}}ks.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD="pendingRedirect",Bu=new Map;class wD extends wI{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Bu.get(this.auth._key());if(!e){try{const i=await ED(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Bu.set(this.auth._key(),e)}return this.bypassAuthState||Bu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ED(t,e){const n=ID(e),i=SD(t);if(!await i._isAvailable())return!1;const r=await i._get(n)==="true";return await i._remove(n),r}function TD(t,e){Bu.set(t._key(),e)}function SD(t){return Jn(t._redirectPersistence)}function ID(t){return Uu(vD,t.config.apiKey,t.name)}async function xD(t,e,n=!1){if(kn(t.app))return Promise.reject(ei(t));const i=ar(t),r=pD(i,e),o=await new wD(i,r,n).execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bD=10*60*1e3;class kD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!EI(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Pn(this.auth,r))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=bD&&this.cachedEventUids.clear(),this.cachedEventUids.has(jv(e))}saveEventToCache(e){this.cachedEventUids.add(jv(e)),this.lastProcessedEventTime=Date.now()}}function jv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function EI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function CD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return EI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AD(t,e={}){return Fn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PD=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,RD=/^https?/;async function ND(t){if(t.config.emulator)return;const{authorizedDomains:e}=await AD(t);for(const n of e)try{if(DD(n))return}catch{}yn(t,"unauthorized-domain")}function DD(t){const e=gp(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===i}if(!RD.test(n))return!1;if(PD.test(t))return i===t;const r=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MD=new _l(3e4,6e4);function Uv(){const t=Rn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function OD(t){return new Promise((e,n)=>{var i,r,s;function o(){Uv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Uv(),n(Pn(t,"network-request-failed"))},timeout:MD.get()})}if(!((r=(i=Rn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Rn().gapi)===null||s===void 0)&&s.load)o();else{const a=EN("iframefcb");return Rn()[a]=()=>{gapi.load?o():n(Pn(t,"network-request-failed"))},sI(`${wN()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw zu=null,e})}let zu=null;function LD(t){return zu=zu||OD(t),zu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VD=new _l(5e3,15e3),FD="__/auth/iframe",jD="emulator/auth/iframe",UD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},BD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zD(t){const e=t.config;X(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qg(e,jD):`https://${t.config.authDomain}/${FD}`,i={apiKey:e.apiKey,appName:t.name,v:ho},r=BD.get(t.config.apiHost);r&&(i.eid=r);const s=t._getFrameworks();return s.length&&(i.fw=s.join(",")),`${n}?${ml(i).slice(1)}`}async function $D(t){const e=await LD(t),n=Rn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:zD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:UD,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=Pn(t,"network-request-failed"),a=Rn().setTimeout(()=>{s(o)},VD.get());function l(){Rn().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},HD=500,qD=600,KD="_blank",GD="http://localhost";class Bv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function QD(t,e,n,i=HD,r=qD){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},WD),{width:i.toString(),height:r.toString(),top:s,left:o}),u=vt().toLowerCase();n&&(a=JS(u)?KD:n),YS(u)&&(e=e||GD,l.scrollbars="yes");const h=Object.entries(l).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(hN(u)&&a!=="_self")return YD(e||"",a),new Bv(null);const d=window.open(e||"",a,h);X(d,t,"popup-blocked");try{d.focus()}catch{}return new Bv(d)}function YD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD="__/auth/handler",JD="emulator/auth/handler",ZD=encodeURIComponent("fac");async function zv(t,e,n,i,r,s){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:ho,eventId:r};if(e instanceof aI){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",NP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof wl){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const l=await t._getAppCheckToken(),u=l?`#${ZD}=${encodeURIComponent(l)}`:"";return`${eM(t)}?${ml(a).slice(1)}${u}`}function eM({config:t}){return t.emulator?qg(t,JD):`https://${t.authDomain}/${XD}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hd="webStorageSupport";class tM{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gI,this._completeRedirectFn=xD,this._overrideRedirectResult=TD}async _openPopup(e,n,i,r){var s;ai((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await zv(e,n,i,gp(),r);return QD(e,o,Xg())}async _openRedirect(e,n,i,r){await this._originValidation(e);const s=await zv(e,n,i,gp(),r);return rD(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:r,promise:s}=this.eventManagers[n];return r?Promise.resolve(r):(ai(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await $D(e),i=new kD(e);return n.register("authEvent",r=>(X(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Hd,{type:Hd},r=>{var s;const o=(s=r==null?void 0:r[0])===null||s===void 0?void 0:s[Hd];o!==void 0&&n(!!o),yn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ND(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return iI()||XS()||Gg()}}const nM=tM;var $v="@firebase/auth",Wv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function sM(t){On(new mn("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rI(t)},u=new yN(i,r,s,l);return bN(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),On(new mn("auth-internal",e=>{const n=ar(e.getProvider("auth").getImmediate());return(i=>new iM(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),en($v,Wv,rM(t)),en($v,Wv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM=5*60,aM=PS("authIdTokenMaxAge")||oM;let Hv=null;const lM=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>aM)return;const r=n==null?void 0:n.token;Hv!==r&&(Hv=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function uM(t=FS()){const e=yl(t,"auth");if(e.isInitialized())return e.getImmediate();const n=xN(t,{popupRedirectResolver:nM,persistence:[fD,tD,gI]}),i=PS("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=lM(s.toString());YN(n,o,()=>o(n.currentUser)),QN(n,a=>o(a))}}const r=CS("auth");return r&&kN(n,`http://${r}`),n}function cM(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}_N({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=r=>{const s=Pn("internal-error");s.customData=r,n(s)},i.type="text/javascript",i.charset="UTF-8",cM().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});sM("Browser");var hM="firebase",dM="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */en(hM,dM,"app");var qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Dr,TI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,_){function k(){}k.prototype=_.prototype,I.D=_.prototype,I.prototype=new k,I.prototype.constructor=I,I.C=function(C,P,N){for(var A=Array(arguments.length-2),re=2;re<arguments.length;re++)A[re-2]=arguments[re];return _.prototype[P].apply(C,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,_,k){k||(k=0);var C=Array(16);if(typeof _=="string")for(var P=0;16>P;++P)C[P]=_.charCodeAt(k++)|_.charCodeAt(k++)<<8|_.charCodeAt(k++)<<16|_.charCodeAt(k++)<<24;else for(P=0;16>P;++P)C[P]=_[k++]|_[k++]<<8|_[k++]<<16|_[k++]<<24;_=I.g[0],k=I.g[1],P=I.g[2];var N=I.g[3],A=_+(N^k&(P^N))+C[0]+3614090360&4294967295;_=k+(A<<7&4294967295|A>>>25),A=N+(P^_&(k^P))+C[1]+3905402710&4294967295,N=_+(A<<12&4294967295|A>>>20),A=P+(k^N&(_^k))+C[2]+606105819&4294967295,P=N+(A<<17&4294967295|A>>>15),A=k+(_^P&(N^_))+C[3]+3250441966&4294967295,k=P+(A<<22&4294967295|A>>>10),A=_+(N^k&(P^N))+C[4]+4118548399&4294967295,_=k+(A<<7&4294967295|A>>>25),A=N+(P^_&(k^P))+C[5]+1200080426&4294967295,N=_+(A<<12&4294967295|A>>>20),A=P+(k^N&(_^k))+C[6]+2821735955&4294967295,P=N+(A<<17&4294967295|A>>>15),A=k+(_^P&(N^_))+C[7]+4249261313&4294967295,k=P+(A<<22&4294967295|A>>>10),A=_+(N^k&(P^N))+C[8]+1770035416&4294967295,_=k+(A<<7&4294967295|A>>>25),A=N+(P^_&(k^P))+C[9]+2336552879&4294967295,N=_+(A<<12&4294967295|A>>>20),A=P+(k^N&(_^k))+C[10]+4294925233&4294967295,P=N+(A<<17&4294967295|A>>>15),A=k+(_^P&(N^_))+C[11]+2304563134&4294967295,k=P+(A<<22&4294967295|A>>>10),A=_+(N^k&(P^N))+C[12]+1804603682&4294967295,_=k+(A<<7&4294967295|A>>>25),A=N+(P^_&(k^P))+C[13]+4254626195&4294967295,N=_+(A<<12&4294967295|A>>>20),A=P+(k^N&(_^k))+C[14]+2792965006&4294967295,P=N+(A<<17&4294967295|A>>>15),A=k+(_^P&(N^_))+C[15]+1236535329&4294967295,k=P+(A<<22&4294967295|A>>>10),A=_+(P^N&(k^P))+C[1]+4129170786&4294967295,_=k+(A<<5&4294967295|A>>>27),A=N+(k^P&(_^k))+C[6]+3225465664&4294967295,N=_+(A<<9&4294967295|A>>>23),A=P+(_^k&(N^_))+C[11]+643717713&4294967295,P=N+(A<<14&4294967295|A>>>18),A=k+(N^_&(P^N))+C[0]+3921069994&4294967295,k=P+(A<<20&4294967295|A>>>12),A=_+(P^N&(k^P))+C[5]+3593408605&4294967295,_=k+(A<<5&4294967295|A>>>27),A=N+(k^P&(_^k))+C[10]+38016083&4294967295,N=_+(A<<9&4294967295|A>>>23),A=P+(_^k&(N^_))+C[15]+3634488961&4294967295,P=N+(A<<14&4294967295|A>>>18),A=k+(N^_&(P^N))+C[4]+3889429448&4294967295,k=P+(A<<20&4294967295|A>>>12),A=_+(P^N&(k^P))+C[9]+568446438&4294967295,_=k+(A<<5&4294967295|A>>>27),A=N+(k^P&(_^k))+C[14]+3275163606&4294967295,N=_+(A<<9&4294967295|A>>>23),A=P+(_^k&(N^_))+C[3]+4107603335&4294967295,P=N+(A<<14&4294967295|A>>>18),A=k+(N^_&(P^N))+C[8]+1163531501&4294967295,k=P+(A<<20&4294967295|A>>>12),A=_+(P^N&(k^P))+C[13]+2850285829&4294967295,_=k+(A<<5&4294967295|A>>>27),A=N+(k^P&(_^k))+C[2]+4243563512&4294967295,N=_+(A<<9&4294967295|A>>>23),A=P+(_^k&(N^_))+C[7]+1735328473&4294967295,P=N+(A<<14&4294967295|A>>>18),A=k+(N^_&(P^N))+C[12]+2368359562&4294967295,k=P+(A<<20&4294967295|A>>>12),A=_+(k^P^N)+C[5]+4294588738&4294967295,_=k+(A<<4&4294967295|A>>>28),A=N+(_^k^P)+C[8]+2272392833&4294967295,N=_+(A<<11&4294967295|A>>>21),A=P+(N^_^k)+C[11]+1839030562&4294967295,P=N+(A<<16&4294967295|A>>>16),A=k+(P^N^_)+C[14]+4259657740&4294967295,k=P+(A<<23&4294967295|A>>>9),A=_+(k^P^N)+C[1]+2763975236&4294967295,_=k+(A<<4&4294967295|A>>>28),A=N+(_^k^P)+C[4]+1272893353&4294967295,N=_+(A<<11&4294967295|A>>>21),A=P+(N^_^k)+C[7]+4139469664&4294967295,P=N+(A<<16&4294967295|A>>>16),A=k+(P^N^_)+C[10]+3200236656&4294967295,k=P+(A<<23&4294967295|A>>>9),A=_+(k^P^N)+C[13]+681279174&4294967295,_=k+(A<<4&4294967295|A>>>28),A=N+(_^k^P)+C[0]+3936430074&4294967295,N=_+(A<<11&4294967295|A>>>21),A=P+(N^_^k)+C[3]+3572445317&4294967295,P=N+(A<<16&4294967295|A>>>16),A=k+(P^N^_)+C[6]+76029189&4294967295,k=P+(A<<23&4294967295|A>>>9),A=_+(k^P^N)+C[9]+3654602809&4294967295,_=k+(A<<4&4294967295|A>>>28),A=N+(_^k^P)+C[12]+3873151461&4294967295,N=_+(A<<11&4294967295|A>>>21),A=P+(N^_^k)+C[15]+530742520&4294967295,P=N+(A<<16&4294967295|A>>>16),A=k+(P^N^_)+C[2]+3299628645&4294967295,k=P+(A<<23&4294967295|A>>>9),A=_+(P^(k|~N))+C[0]+4096336452&4294967295,_=k+(A<<6&4294967295|A>>>26),A=N+(k^(_|~P))+C[7]+1126891415&4294967295,N=_+(A<<10&4294967295|A>>>22),A=P+(_^(N|~k))+C[14]+2878612391&4294967295,P=N+(A<<15&4294967295|A>>>17),A=k+(N^(P|~_))+C[5]+4237533241&4294967295,k=P+(A<<21&4294967295|A>>>11),A=_+(P^(k|~N))+C[12]+1700485571&4294967295,_=k+(A<<6&4294967295|A>>>26),A=N+(k^(_|~P))+C[3]+2399980690&4294967295,N=_+(A<<10&4294967295|A>>>22),A=P+(_^(N|~k))+C[10]+4293915773&4294967295,P=N+(A<<15&4294967295|A>>>17),A=k+(N^(P|~_))+C[1]+2240044497&4294967295,k=P+(A<<21&4294967295|A>>>11),A=_+(P^(k|~N))+C[8]+1873313359&4294967295,_=k+(A<<6&4294967295|A>>>26),A=N+(k^(_|~P))+C[15]+4264355552&4294967295,N=_+(A<<10&4294967295|A>>>22),A=P+(_^(N|~k))+C[6]+2734768916&4294967295,P=N+(A<<15&4294967295|A>>>17),A=k+(N^(P|~_))+C[13]+1309151649&4294967295,k=P+(A<<21&4294967295|A>>>11),A=_+(P^(k|~N))+C[4]+4149444226&4294967295,_=k+(A<<6&4294967295|A>>>26),A=N+(k^(_|~P))+C[11]+3174756917&4294967295,N=_+(A<<10&4294967295|A>>>22),A=P+(_^(N|~k))+C[2]+718787259&4294967295,P=N+(A<<15&4294967295|A>>>17),A=k+(N^(P|~_))+C[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(P+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+P&4294967295,I.g[3]=I.g[3]+N&4294967295}i.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var k=_-this.blockSize,C=this.B,P=this.h,N=0;N<_;){if(P==0)for(;N<=k;)r(this,I,N),N+=this.blockSize;if(typeof I=="string"){for(;N<_;)if(C[P++]=I.charCodeAt(N++),P==this.blockSize){r(this,C),P=0;break}}else for(;N<_;)if(C[P++]=I[N++],P==this.blockSize){r(this,C),P=0;break}}this.h=P,this.o+=_},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var k=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=k&255,k/=256;for(this.u(I),I=Array(16),_=k=0;4>_;++_)for(var C=0;32>C;C+=8)I[k++]=this.g[_]>>>C&255;return I};function s(I,_){var k=a;return Object.prototype.hasOwnProperty.call(k,I)?k[I]:k[I]=_(I)}function o(I,_){this.h=_;for(var k=[],C=!0,P=I.length-1;0<=P;P--){var N=I[P]|0;C&&N==_||(k[P]=N,C=!1)}this.g=k}var a={};function l(I){return-128<=I&&128>I?s(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function u(I){if(isNaN(I)||!isFinite(I))return d;if(0>I)return E(u(-I));for(var _=[],k=1,C=0;I>=k;C++)_[C]=I/k|0,k*=4294967296;return new o(_,0)}function h(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return E(h(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var k=u(Math.pow(_,8)),C=d,P=0;P<I.length;P+=8){var N=Math.min(8,I.length-P),A=parseInt(I.substring(P,P+N),_);8>N?(N=u(Math.pow(_,N)),C=C.j(N).add(u(A))):(C=C.j(k),C=C.add(u(A)))}return C}var d=l(0),f=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(w(this))return-E(this).m();for(var I=0,_=1,k=0;k<this.g.length;k++){var C=this.i(k);I+=(0<=C?C:4294967296+C)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(v(this))return"0";if(w(this))return"-"+E(this).toString(I);for(var _=u(Math.pow(I,6)),k=this,C="";;){var P=R(k,_).g;k=T(k,P.j(_));var N=((0<k.g.length?k.g[0]:k.h)>>>0).toString(I);if(k=P,v(k))return N+C;for(;6>N.length;)N="0"+N;C=N+C}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function v(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function w(I){return I.h==-1}t.l=function(I){return I=T(this,I),w(I)?-1:v(I)?0:1};function E(I){for(var _=I.g.length,k=[],C=0;C<_;C++)k[C]=~I.g[C];return new o(k,~I.h).add(f)}t.abs=function(){return w(this)?E(this):this},t.add=function(I){for(var _=Math.max(this.g.length,I.g.length),k=[],C=0,P=0;P<=_;P++){var N=C+(this.i(P)&65535)+(I.i(P)&65535),A=(N>>>16)+(this.i(P)>>>16)+(I.i(P)>>>16);C=A>>>16,N&=65535,A&=65535,k[P]=A<<16|N}return new o(k,k[k.length-1]&-2147483648?-1:0)};function T(I,_){return I.add(E(_))}t.j=function(I){if(v(this)||v(I))return d;if(w(this))return w(I)?E(this).j(E(I)):E(E(this).j(I));if(w(I))return E(this.j(E(I)));if(0>this.l(m)&&0>I.l(m))return u(this.m()*I.m());for(var _=this.g.length+I.g.length,k=[],C=0;C<2*_;C++)k[C]=0;for(C=0;C<this.g.length;C++)for(var P=0;P<I.g.length;P++){var N=this.i(C)>>>16,A=this.i(C)&65535,re=I.i(P)>>>16,ce=I.i(P)&65535;k[2*C+2*P]+=A*ce,S(k,2*C+2*P),k[2*C+2*P+1]+=N*ce,S(k,2*C+2*P+1),k[2*C+2*P+1]+=A*re,S(k,2*C+2*P+1),k[2*C+2*P+2]+=N*re,S(k,2*C+2*P+2)}for(C=0;C<_;C++)k[C]=k[2*C+1]<<16|k[2*C];for(C=_;C<2*_;C++)k[C]=0;return new o(k,0)};function S(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function b(I,_){this.g=I,this.h=_}function R(I,_){if(v(_))throw Error("division by zero");if(v(I))return new b(d,d);if(w(I))return _=R(E(I),_),new b(E(_.g),E(_.h));if(w(_))return _=R(I,E(_)),new b(E(_.g),_.h);if(30<I.g.length){if(w(I)||w(_))throw Error("slowDivide_ only works with positive integers.");for(var k=f,C=_;0>=C.l(I);)k=M(k),C=M(C);var P=D(k,1),N=D(C,1);for(C=D(C,2),k=D(k,2);!v(C);){var A=N.add(C);0>=A.l(I)&&(P=P.add(k),N=A),C=D(C,1),k=D(k,1)}return _=T(I,P.j(_)),new b(P,_)}for(P=d;0<=I.l(_);){for(k=Math.max(1,Math.floor(I.m()/_.m())),C=Math.ceil(Math.log(k)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),N=u(k),A=N.j(_);w(A)||0<A.l(I);)k-=C,N=u(k),A=N.j(_);v(N)&&(N=f),P=P.add(N),I=T(I,A)}return new b(P,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var _=Math.max(this.g.length,I.g.length),k=[],C=0;C<_;C++)k[C]=this.i(C)&I.i(C);return new o(k,this.h&I.h)},t.or=function(I){for(var _=Math.max(this.g.length,I.g.length),k=[],C=0;C<_;C++)k[C]=this.i(C)|I.i(C);return new o(k,this.h|I.h)},t.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),k=[],C=0;C<_;C++)k[C]=this.i(C)^I.i(C);return new o(k,this.h^I.h)};function M(I){for(var _=I.g.length+1,k=[],C=0;C<_;C++)k[C]=I.i(C)<<1|I.i(C-1)>>>31;return new o(k,I.h)}function D(I,_){var k=_>>5;_%=32;for(var C=I.g.length-k,P=[],N=0;N<C;N++)P[N]=0<_?I.i(N+k)>>>_|I.i(N+k+1)<<32-_:I.i(N+k);return new o(P,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,TI=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,Dr=o}).apply(typeof qv<"u"?qv:typeof self<"u"?self:typeof window<"u"?window:{});var uu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var SI,Zo,II,$u,_p,xI,bI,kI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,p,g){return c==Array.prototype||c==Object.prototype||(c[p]=g.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof uu=="object"&&uu];for(var p=0;p<c.length;++p){var g=c[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var i=n(this);function r(c,p){if(p)e:{var g=i;c=c.split(".");for(var x=0;x<c.length-1;x++){var L=c[x];if(!(L in g))break e;g=g[L]}c=c[c.length-1],x=g[c],p=p(x),p!=x&&p!=null&&e(g,c,{configurable:!0,writable:!0,value:p})}}function s(c,p){c instanceof String&&(c+="");var g=0,x=!1,L={next:function(){if(!x&&g<c.length){var V=g++;return{value:p(V,c[V]),done:!1}}return x=!0,{done:!0,value:void 0}}};return L[Symbol.iterator]=function(){return L},L}r("Array.prototype.values",function(c){return c||function(){return s(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(c){var p=typeof c;return p=p!="object"?p:c?Array.isArray(c)?"array":p:"null",p=="array"||p=="object"&&typeof c.length=="number"}function u(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function h(c,p,g){return c.call.apply(c.bind,arguments)}function d(c,p,g){if(!c)throw Error();if(2<arguments.length){var x=Array.prototype.slice.call(arguments,2);return function(){var L=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(L,x),c.apply(p,L)}}return function(){return c.apply(p,arguments)}}function f(c,p,g){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,f.apply(null,arguments)}function m(c,p){var g=Array.prototype.slice.call(arguments,1);return function(){var x=g.slice();return x.push.apply(x,arguments),c.apply(this,x)}}function v(c,p){function g(){}g.prototype=p.prototype,c.aa=p.prototype,c.prototype=new g,c.prototype.constructor=c,c.Qb=function(x,L,V){for(var z=Array(arguments.length-2),Te=2;Te<arguments.length;Te++)z[Te-2]=arguments[Te];return p.prototype[L].apply(x,z)}}function w(c){const p=c.length;if(0<p){const g=Array(p);for(let x=0;x<p;x++)g[x]=c[x];return g}return[]}function E(c,p){for(let g=1;g<arguments.length;g++){const x=arguments[g];if(l(x)){const L=c.length||0,V=x.length||0;c.length=L+V;for(let z=0;z<V;z++)c[L+z]=x[z]}else c.push(x)}}class T{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function S(c){return/^[\s\xa0]*$/.test(c)}function b(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var M=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function D(c,p,g){for(const x in c)p.call(g,c[x],x,c)}function I(c,p){for(const g in c)p.call(void 0,c[g],g,c)}function _(c){const p={};for(const g in c)p[g]=c[g];return p}const k="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(c,p){let g,x;for(let L=1;L<arguments.length;L++){x=arguments[L];for(g in x)c[g]=x[g];for(let V=0;V<k.length;V++)g=k[V],Object.prototype.hasOwnProperty.call(x,g)&&(c[g]=x[g])}}function P(c){var p=1;c=c.split(":");const g=[];for(;0<p&&c.length;)g.push(c.shift()),p--;return c.length&&g.push(c.join(":")),g}function N(c){a.setTimeout(()=>{throw c},0)}function A(){var c=q;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class re{constructor(){this.h=this.g=null}add(p,g){const x=ce.get();x.set(p,g),this.h?this.h.next=x:this.g=x,this.h=x}}var ce=new T(()=>new _e,c=>c.reset());class _e{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let Se,B=!1,q=new re,K=()=>{const c=a.Promise.resolve(void 0);Se=()=>{c.then(he)}};var he=()=>{for(var c;c=A();){try{c.h.call(c.g)}catch(g){N(g)}var p=ce;p.j(c),100>p.h&&(p.h++,c.next=p.g,p.g=c)}B=!1};function te(){this.s=this.s,this.C=this.C}te.prototype.s=!1,te.prototype.ma=function(){this.s||(this.s=!0,this.N())},te.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function fe(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}fe.prototype.h=function(){this.defaultPrevented=!0};var H=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return c}();function oe(c,p){if(fe.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var g=this.type=c.type,x=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget){if(M){e:{try{R(p.nodeName);var L=!0;break e}catch{}L=!1}L||(p=null)}}else g=="mouseover"?p=c.fromElement:g=="mouseout"&&(p=c.toElement);this.relatedTarget=p,x?(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ye[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&oe.aa.h.call(this)}}v(oe,fe);var ye={2:"touch",3:"pen",4:"mouse"};oe.prototype.h=function(){oe.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var wt="closure_listenable_"+(1e6*Math.random()|0),yo=0;function Wh(c,p,g,x,L){this.listener=c,this.proxy=null,this.src=p,this.type=g,this.capture=!!x,this.ha=L,this.key=++yo,this.da=this.fa=!1}function ur(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function is(c){this.src=c,this.g={},this.h=0}is.prototype.add=function(c,p,g,x,L){var V=c.toString();c=this.g[V],c||(c=this.g[V]=[],this.h++);var z=Je(c,p,x,L);return-1<z?(p=c[z],g||(p.fa=!1)):(p=new Wh(p,this.src,V,!!x,L),p.fa=g,c.push(p)),p};function Y(c,p){var g=p.type;if(g in c.g){var x=c.g[g],L=Array.prototype.indexOf.call(x,p,void 0),V;(V=0<=L)&&Array.prototype.splice.call(x,L,1),V&&(ur(p),c.g[g].length==0&&(delete c.g[g],c.h--))}}function Je(c,p,g,x){for(var L=0;L<c.length;++L){var V=c[L];if(!V.da&&V.listener==p&&V.capture==!!g&&V.ha==x)return L}return-1}var Hh="closure_lm_"+(1e6*Math.random()|0),qh={};function ey(c,p,g,x,L){if(Array.isArray(p)){for(var V=0;V<p.length;V++)ey(c,p[V],g,x,L);return null}return g=iy(g),c&&c[wt]?c.K(p,g,u(x)?!!x.capture:!1,L):ik(c,p,g,!1,x,L)}function ik(c,p,g,x,L,V){if(!p)throw Error("Invalid event type");var z=u(L)?!!L.capture:!!L,Te=Gh(c);if(Te||(c[Hh]=Te=new is(c)),g=Te.add(p,g,x,z,V),g.proxy)return g;if(x=rk(),g.proxy=x,x.src=c,x.listener=g,c.addEventListener)H||(L=z),L===void 0&&(L=!1),c.addEventListener(p.toString(),x,L);else if(c.attachEvent)c.attachEvent(ny(p.toString()),x);else if(c.addListener&&c.removeListener)c.addListener(x);else throw Error("addEventListener and attachEvent are unavailable.");return g}function rk(){function c(g){return p.call(c.src,c.listener,g)}const p=sk;return c}function ty(c,p,g,x,L){if(Array.isArray(p))for(var V=0;V<p.length;V++)ty(c,p[V],g,x,L);else x=u(x)?!!x.capture:!!x,g=iy(g),c&&c[wt]?(c=c.i,p=String(p).toString(),p in c.g&&(V=c.g[p],g=Je(V,g,x,L),-1<g&&(ur(V[g]),Array.prototype.splice.call(V,g,1),V.length==0&&(delete c.g[p],c.h--)))):c&&(c=Gh(c))&&(p=c.g[p.toString()],c=-1,p&&(c=Je(p,g,x,L)),(g=-1<c?p[c]:null)&&Kh(g))}function Kh(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[wt])Y(p.i,c);else{var g=c.type,x=c.proxy;p.removeEventListener?p.removeEventListener(g,x,c.capture):p.detachEvent?p.detachEvent(ny(g),x):p.addListener&&p.removeListener&&p.removeListener(x),(g=Gh(p))?(Y(g,c),g.h==0&&(g.src=null,p[Hh]=null)):ur(c)}}}function ny(c){return c in qh?qh[c]:qh[c]="on"+c}function sk(c,p){if(c.da)c=!0;else{p=new oe(p,this);var g=c.listener,x=c.ha||c.src;c.fa&&Kh(c),c=g.call(x,p)}return c}function Gh(c){return c=c[Hh],c instanceof is?c:null}var Qh="__closure_events_fn_"+(1e9*Math.random()>>>0);function iy(c){return typeof c=="function"?c:(c[Qh]||(c[Qh]=function(p){return c.handleEvent(p)}),c[Qh])}function lt(){te.call(this),this.i=new is(this),this.M=this,this.F=null}v(lt,te),lt.prototype[wt]=!0,lt.prototype.removeEventListener=function(c,p,g,x){ty(this,c,p,g,x)};function Et(c,p){var g,x=c.F;if(x)for(g=[];x;x=x.F)g.push(x);if(c=c.M,x=p.type||p,typeof p=="string")p=new fe(p,c);else if(p instanceof fe)p.target=p.target||c;else{var L=p;p=new fe(x,c),C(p,L)}if(L=!0,g)for(var V=g.length-1;0<=V;V--){var z=p.g=g[V];L=Al(z,x,!0,p)&&L}if(z=p.g=c,L=Al(z,x,!0,p)&&L,L=Al(z,x,!1,p)&&L,g)for(V=0;V<g.length;V++)z=p.g=g[V],L=Al(z,x,!1,p)&&L}lt.prototype.N=function(){if(lt.aa.N.call(this),this.i){var c=this.i,p;for(p in c.g){for(var g=c.g[p],x=0;x<g.length;x++)ur(g[x]);delete c.g[p],c.h--}}this.F=null},lt.prototype.K=function(c,p,g,x){return this.i.add(String(c),p,!1,g,x)},lt.prototype.L=function(c,p,g,x){return this.i.add(String(c),p,!0,g,x)};function Al(c,p,g,x){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();for(var L=!0,V=0;V<p.length;++V){var z=p[V];if(z&&!z.da&&z.capture==g){var Te=z.listener,Ze=z.ha||z.src;z.fa&&Y(c.i,z),L=Te.call(Ze,x)!==!1&&L}}return L&&!x.defaultPrevented}function ry(c,p,g){if(typeof c=="function")g&&(c=f(c,g));else if(c&&typeof c.handleEvent=="function")c=f(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(c,p||0)}function sy(c){c.g=ry(()=>{c.g=null,c.i&&(c.i=!1,sy(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class ok extends te{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:sy(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function _o(c){te.call(this),this.h=c,this.g={}}v(_o,te);var oy=[];function ay(c){D(c.g,function(p,g){this.g.hasOwnProperty(g)&&Kh(p)},c),c.g={}}_o.prototype.N=function(){_o.aa.N.call(this),ay(this)},_o.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Yh=a.JSON.stringify,ak=a.JSON.parse,lk=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Xh(){}Xh.prototype.h=null;function ly(c){return c.h||(c.h=c.i())}function uy(){}var vo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jh(){fe.call(this,"d")}v(Jh,fe);function Zh(){fe.call(this,"c")}v(Zh,fe);var cr={},cy=null;function Pl(){return cy=cy||new lt}cr.La="serverreachability";function hy(c){fe.call(this,cr.La,c)}v(hy,fe);function wo(c){const p=Pl();Et(p,new hy(p))}cr.STAT_EVENT="statevent";function dy(c,p){fe.call(this,cr.STAT_EVENT,c),this.stat=p}v(dy,fe);function Tt(c){const p=Pl();Et(p,new dy(p,c))}cr.Ma="timingevent";function fy(c,p){fe.call(this,cr.Ma,c),this.size=p}v(fy,fe);function Eo(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function To(){this.g=!0}To.prototype.xa=function(){this.g=!1};function uk(c,p,g,x,L,V){c.info(function(){if(c.g)if(V)for(var z="",Te=V.split("&"),Ze=0;Ze<Te.length;Ze++){var pe=Te[Ze].split("=");if(1<pe.length){var ut=pe[0];pe=pe[1];var ct=ut.split("_");z=2<=ct.length&&ct[1]=="type"?z+(ut+"="+pe+"&"):z+(ut+"=redacted&")}}else z=null;else z=V;return"XMLHTTP REQ ("+x+") [attempt "+L+"]: "+p+`
`+g+`
`+z})}function ck(c,p,g,x,L,V,z){c.info(function(){return"XMLHTTP RESP ("+x+") [ attempt "+L+"]: "+p+`
`+g+`
`+V+" "+z})}function rs(c,p,g,x){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+dk(c,g)+(x?" "+x:"")})}function hk(c,p){c.info(function(){return"TIMEOUT: "+p})}To.prototype.info=function(){};function dk(c,p){if(!c.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(c=0;c<g.length;c++)if(Array.isArray(g[c])){var x=g[c];if(!(2>x.length)){var L=x[1];if(Array.isArray(L)&&!(1>L.length)){var V=L[0];if(V!="noop"&&V!="stop"&&V!="close")for(var z=1;z<L.length;z++)L[z]=""}}}}return Yh(g)}catch{return p}}var Rl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},py={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ed;function Nl(){}v(Nl,Xh),Nl.prototype.g=function(){return new XMLHttpRequest},Nl.prototype.i=function(){return{}},ed=new Nl;function pi(c,p,g,x){this.j=c,this.i=p,this.l=g,this.R=x||1,this.U=new _o(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new gy}function gy(){this.i=null,this.g="",this.h=!1}var my={},td={};function nd(c,p,g){c.L=1,c.v=Ll(jn(p)),c.m=g,c.P=!0,yy(c,null)}function yy(c,p){c.F=Date.now(),Dl(c),c.A=jn(c.v);var g=c.A,x=c.R;Array.isArray(x)||(x=[String(x)]),Ry(g.i,"t",x),c.C=0,g=c.j.J,c.h=new gy,c.g=Qy(c.j,g?p:null,!c.m),0<c.O&&(c.M=new ok(f(c.Y,c,c.g),c.O)),p=c.U,g=c.g,x=c.ca;var L="readystatechange";Array.isArray(L)||(L&&(oy[0]=L.toString()),L=oy);for(var V=0;V<L.length;V++){var z=ey(g,L[V],x||p.handleEvent,!1,p.h||p);if(!z)break;p.g[z.key]=z}p=c.H?_(c.H):{},c.m?(c.u||(c.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,p)):(c.u="GET",c.g.ea(c.A,c.u,null,p)),wo(),uk(c.i,c.u,c.A,c.l,c.R,c.m)}pi.prototype.ca=function(c){c=c.target;const p=this.M;p&&Un(c)==3?p.j():this.Y(c)},pi.prototype.Y=function(c){try{if(c==this.g)e:{const ct=Un(this.g);var p=this.g.Ba();const as=this.g.Z();if(!(3>ct)&&(ct!=3||this.g&&(this.h.h||this.g.oa()||Fy(this.g)))){this.J||ct!=4||p==7||(p==8||0>=as?wo(3):wo(2)),id(this);var g=this.g.Z();this.X=g;t:if(_y(this)){var x=Fy(this.g);c="";var L=x.length,V=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hr(this),So(this);var z="";break t}this.h.i=new a.TextDecoder}for(p=0;p<L;p++)this.h.h=!0,c+=this.h.i.decode(x[p],{stream:!(V&&p==L-1)});x.length=0,this.h.g+=c,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,ck(this.i,this.u,this.A,this.l,this.R,ct,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Te,Ze=this.g;if((Te=Ze.g?Ze.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(Te)){var pe=Te;break t}}pe=null}if(g=pe)rs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,rd(this,g);else{this.o=!1,this.s=3,Tt(12),hr(this),So(this);break e}}if(this.P){g=!0;let on;for(;!this.J&&this.C<z.length;)if(on=fk(this,z),on==td){ct==4&&(this.s=4,Tt(14),g=!1),rs(this.i,this.l,null,"[Incomplete Response]");break}else if(on==my){this.s=4,Tt(15),rs(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else rs(this.i,this.l,on,null),rd(this,on);if(_y(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||z.length!=0||this.h.h||(this.s=1,Tt(16),g=!1),this.o=this.o&&g,!g)rs(this.i,this.l,z,"[Invalid Chunked Response]"),hr(this),So(this);else if(0<z.length&&!this.W){this.W=!0;var ut=this.j;ut.g==this&&ut.ba&&!ut.M&&(ut.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),cd(ut),ut.M=!0,Tt(11))}}else rs(this.i,this.l,z,null),rd(this,z);ct==4&&hr(this),this.o&&!this.J&&(ct==4?Hy(this.j,this):(this.o=!1,Dl(this)))}else Pk(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Tt(12)):(this.s=0,Tt(13)),hr(this),So(this)}}}catch{}finally{}};function _y(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function fk(c,p){var g=c.C,x=p.indexOf(`
`,g);return x==-1?td:(g=Number(p.substring(g,x)),isNaN(g)?my:(x+=1,x+g>p.length?td:(p=p.slice(x,x+g),c.C=x+g,p)))}pi.prototype.cancel=function(){this.J=!0,hr(this)};function Dl(c){c.S=Date.now()+c.I,vy(c,c.I)}function vy(c,p){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Eo(f(c.ba,c),p)}function id(c){c.B&&(a.clearTimeout(c.B),c.B=null)}pi.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(hk(this.i,this.A),this.L!=2&&(wo(),Tt(17)),hr(this),this.s=2,So(this)):vy(this,this.S-c)};function So(c){c.j.G==0||c.J||Hy(c.j,c)}function hr(c){id(c);var p=c.M;p&&typeof p.ma=="function"&&p.ma(),c.M=null,ay(c.U),c.g&&(p=c.g,c.g=null,p.abort(),p.ma())}function rd(c,p){try{var g=c.j;if(g.G!=0&&(g.g==c||sd(g.h,c))){if(!c.K&&sd(g.h,c)&&g.G==3){try{var x=g.Da.g.parse(p)}catch{x=null}if(Array.isArray(x)&&x.length==3){var L=x;if(L[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<c.F)zl(g),Ul(g);else break e;ud(g),Tt(18)}}else g.za=L[1],0<g.za-g.T&&37500>L[2]&&g.F&&g.v==0&&!g.C&&(g.C=Eo(f(g.Za,g),6e3));if(1>=Ty(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else fr(g,11)}else if((c.K||g.g==c)&&zl(g),!S(p))for(L=g.Da.g.parse(p),p=0;p<L.length;p++){let pe=L[p];if(g.T=pe[0],pe=pe[1],g.G==2)if(pe[0]=="c"){g.K=pe[1],g.ia=pe[2];const ut=pe[3];ut!=null&&(g.la=ut,g.j.info("VER="+g.la));const ct=pe[4];ct!=null&&(g.Aa=ct,g.j.info("SVER="+g.Aa));const as=pe[5];as!=null&&typeof as=="number"&&0<as&&(x=1.5*as,g.L=x,g.j.info("backChannelRequestTimeoutMs_="+x)),x=g;const on=c.g;if(on){const Wl=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wl){var V=x.h;V.g||Wl.indexOf("spdy")==-1&&Wl.indexOf("quic")==-1&&Wl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(od(V,V.h),V.h=null))}if(x.D){const hd=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;hd&&(x.ya=hd,be(x.I,x.D,hd))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-c.F,g.j.info("Handshake RTT: "+g.R+"ms")),x=g;var z=c;if(x.qa=Gy(x,x.J?x.ia:null,x.W),z.K){Sy(x.h,z);var Te=z,Ze=x.L;Ze&&(Te.I=Ze),Te.B&&(id(Te),Dl(Te)),x.g=z}else $y(x);0<g.i.length&&Bl(g)}else pe[0]!="stop"&&pe[0]!="close"||fr(g,7);else g.G==3&&(pe[0]=="stop"||pe[0]=="close"?pe[0]=="stop"?fr(g,7):ld(g):pe[0]!="noop"&&g.l&&g.l.ta(pe),g.v=0)}}wo(4)}catch{}}var pk=class{constructor(c,p){this.g=c,this.map=p}};function wy(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ey(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ty(c){return c.h?1:c.g?c.g.size:0}function sd(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function od(c,p){c.g?c.g.add(p):c.h=p}function Sy(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}wy.prototype.cancel=function(){if(this.i=Iy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Iy(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const g of c.g.values())p=p.concat(g.D);return p}return w(c.i)}function gk(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(l(c)){for(var p=[],g=c.length,x=0;x<g;x++)p.push(c[x]);return p}p=[],g=0;for(x in c)p[g++]=c[x];return p}function mk(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(l(c)||typeof c=="string"){var p=[];c=c.length;for(var g=0;g<c;g++)p.push(g);return p}p=[],g=0;for(const x in c)p[g++]=x;return p}}}function xy(c,p){if(c.forEach&&typeof c.forEach=="function")c.forEach(p,void 0);else if(l(c)||typeof c=="string")Array.prototype.forEach.call(c,p,void 0);else for(var g=mk(c),x=gk(c),L=x.length,V=0;V<L;V++)p.call(void 0,x[V],g&&g[V],c)}var by=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yk(c,p){if(c){c=c.split("&");for(var g=0;g<c.length;g++){var x=c[g].indexOf("="),L=null;if(0<=x){var V=c[g].substring(0,x);L=c[g].substring(x+1)}else V=c[g];p(V,L?decodeURIComponent(L.replace(/\+/g," ")):"")}}}function dr(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof dr){this.h=c.h,Ml(this,c.j),this.o=c.o,this.g=c.g,Ol(this,c.s),this.l=c.l;var p=c.i,g=new bo;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),ky(this,g),this.m=c.m}else c&&(p=String(c).match(by))?(this.h=!1,Ml(this,p[1]||"",!0),this.o=Io(p[2]||""),this.g=Io(p[3]||"",!0),Ol(this,p[4]),this.l=Io(p[5]||"",!0),ky(this,p[6]||"",!0),this.m=Io(p[7]||"")):(this.h=!1,this.i=new bo(null,this.h))}dr.prototype.toString=function(){var c=[],p=this.j;p&&c.push(xo(p,Cy,!0),":");var g=this.g;return(g||p=="file")&&(c.push("//"),(p=this.o)&&c.push(xo(p,Cy,!0),"@"),c.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&c.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(xo(g,g.charAt(0)=="/"?wk:vk,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",xo(g,Tk)),c.join("")};function jn(c){return new dr(c)}function Ml(c,p,g){c.j=g?Io(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function Ol(c,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);c.s=p}else c.s=null}function ky(c,p,g){p instanceof bo?(c.i=p,Sk(c.i,c.h)):(g||(p=xo(p,Ek)),c.i=new bo(p,c.h))}function be(c,p,g){c.i.set(p,g)}function Ll(c){return be(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function Io(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function xo(c,p,g){return typeof c=="string"?(c=encodeURI(c).replace(p,_k),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function _k(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Cy=/[#\/\?@]/g,vk=/[#\?:]/g,wk=/[#\?]/g,Ek=/[#\?@]/g,Tk=/#/g;function bo(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function gi(c){c.g||(c.g=new Map,c.h=0,c.i&&yk(c.i,function(p,g){c.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=bo.prototype,t.add=function(c,p){gi(this),this.i=null,c=ss(this,c);var g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(p),this.h+=1,this};function Ay(c,p){gi(c),p=ss(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Py(c,p){return gi(c),p=ss(c,p),c.g.has(p)}t.forEach=function(c,p){gi(this),this.g.forEach(function(g,x){g.forEach(function(L){c.call(p,L,x,this)},this)},this)},t.na=function(){gi(this);const c=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let x=0;x<p.length;x++){const L=c[x];for(let V=0;V<L.length;V++)g.push(p[x])}return g},t.V=function(c){gi(this);let p=[];if(typeof c=="string")Py(this,c)&&(p=p.concat(this.g.get(ss(this,c))));else{c=Array.from(this.g.values());for(let g=0;g<c.length;g++)p=p.concat(c[g])}return p},t.set=function(c,p){return gi(this),this.i=null,c=ss(this,c),Py(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=this.V(c),0<c.length?String(c[0]):p):p};function Ry(c,p,g){Ay(c,p),0<g.length&&(c.i=null,c.g.set(ss(c,p),w(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var x=p[g];const V=encodeURIComponent(String(x)),z=this.V(x);for(x=0;x<z.length;x++){var L=V;z[x]!==""&&(L+="="+encodeURIComponent(String(z[x]))),c.push(L)}}return this.i=c.join("&")};function ss(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Sk(c,p){p&&!c.j&&(gi(c),c.i=null,c.g.forEach(function(g,x){var L=x.toLowerCase();x!=L&&(Ay(this,x),Ry(this,L,g))},c)),c.j=p}function Ik(c,p){const g=new To;if(a.Image){const x=new Image;x.onload=m(mi,g,"TestLoadImage: loaded",!0,p,x),x.onerror=m(mi,g,"TestLoadImage: error",!1,p,x),x.onabort=m(mi,g,"TestLoadImage: abort",!1,p,x),x.ontimeout=m(mi,g,"TestLoadImage: timeout",!1,p,x),a.setTimeout(function(){x.ontimeout&&x.ontimeout()},1e4),x.src=c}else p(!1)}function xk(c,p){const g=new To,x=new AbortController,L=setTimeout(()=>{x.abort(),mi(g,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:x.signal}).then(V=>{clearTimeout(L),V.ok?mi(g,"TestPingServer: ok",!0,p):mi(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),mi(g,"TestPingServer: error",!1,p)})}function mi(c,p,g,x,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),x(g)}catch{}}function bk(){this.g=new lk}function kk(c,p,g){const x=g||"";try{xy(c,function(L,V){let z=L;u(L)&&(z=Yh(L)),p.push(x+V+"="+encodeURIComponent(z))})}catch(L){throw p.push(x+"type="+encodeURIComponent("_badmap")),L}}function Vl(c){this.l=c.Ub||null,this.j=c.eb||!1}v(Vl,Xh),Vl.prototype.g=function(){return new Fl(this.l,this.j)},Vl.prototype.i=function(c){return function(){return c}}({});function Fl(c,p){lt.call(this),this.D=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Fl,lt),t=Fl.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=p,this.readyState=1,Co(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(p.body=c),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ko(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Co(this)),this.g&&(this.readyState=3,Co(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ny(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ny(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?ko(this):Co(this),this.readyState==3&&Ny(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,ko(this))},t.Qa=function(c){this.g&&(this.response=c,ko(this))},t.ga=function(){this.g&&ko(this)};function ko(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Co(c)}t.setRequestHeader=function(c,p){this.u.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=p.next();return c.join(`\r
`)};function Co(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Fl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Dy(c){let p="";return D(c,function(g,x){p+=x,p+=":",p+=g,p+=`\r
`}),p}function ad(c,p,g){e:{for(x in g){var x=!1;break e}x=!0}x||(g=Dy(g),typeof c=="string"?g!=null&&encodeURIComponent(String(g)):be(c,p,g))}function Ve(c){lt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Ve,lt);var Ck=/^https?$/i,Ak=["POST","PUT"];t=Ve.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,p,g,x){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ed.g(),this.v=this.o?ly(this.o):ly(ed),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(V){My(this,V);return}if(c=g||"",g=new Map(this.headers),x)if(Object.getPrototypeOf(x)===Object.prototype)for(var L in x)g.set(L,x[L]);else if(typeof x.keys=="function"&&typeof x.get=="function")for(const V of x.keys())g.set(V,x.get(V));else throw Error("Unknown input type for opt_headers: "+String(x));x=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),L=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ak,p,void 0))||x||L||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,z]of g)this.g.setRequestHeader(V,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Vy(this),this.u=!0,this.g.send(c),this.u=!1}catch(V){My(this,V)}};function My(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.m=5,Oy(c),jl(c)}function Oy(c){c.A||(c.A=!0,Et(c,"complete"),Et(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Et(this,"complete"),Et(this,"abort"),jl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jl(this,!0)),Ve.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ly(this):this.bb())},t.bb=function(){Ly(this)};function Ly(c){if(c.h&&typeof o<"u"&&(!c.v[1]||Un(c)!=4||c.Z()!=2)){if(c.u&&Un(c)==4)ry(c.Ea,0,c);else if(Et(c,"readystatechange"),Un(c)==4){c.h=!1;try{const z=c.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var x;if(x=z===0){var L=String(c.D).match(by)[1]||null;!L&&a.self&&a.self.location&&(L=a.self.location.protocol.slice(0,-1)),x=!Ck.test(L?L.toLowerCase():"")}g=x}if(g)Et(c,"complete"),Et(c,"success");else{c.m=6;try{var V=2<Un(c)?c.g.statusText:""}catch{V=""}c.l=V+" ["+c.Z()+"]",Oy(c)}}finally{jl(c)}}}}function jl(c,p){if(c.g){Vy(c);const g=c.g,x=c.v[0]?()=>{}:null;c.g=null,c.v=null,p||Et(c,"ready");try{g.onreadystatechange=x}catch{}}}function Vy(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function Un(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),ak(p)}};function Fy(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Pk(c){const p={};c=(c.g&&2<=Un(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let x=0;x<c.length;x++){if(S(c[x]))continue;var g=P(c[x]);const L=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=p[L]||[];p[L]=V,V.push(g)}I(p,function(x){return x.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ao(c,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||p}function jy(c){this.Aa=0,this.i=[],this.j=new To,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ao("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ao("baseRetryDelayMs",5e3,c),this.cb=Ao("retryDelaySeedMs",1e4,c),this.Wa=Ao("forwardChannelMaxRetries",2,c),this.wa=Ao("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new wy(c&&c.concurrentRequestLimit),this.Da=new bk,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=jy.prototype,t.la=8,t.G=1,t.connect=function(c,p,g,x){Tt(0),this.W=c,this.H=p||{},g&&x!==void 0&&(this.H.OSID=g,this.H.OAID=x),this.F=this.X,this.I=Gy(this,null,this.W),Bl(this)};function ld(c){if(Uy(c),c.G==3){var p=c.U++,g=jn(c.I);if(be(g,"SID",c.K),be(g,"RID",p),be(g,"TYPE","terminate"),Po(c,g),p=new pi(c,c.j,p),p.L=2,p.v=Ll(jn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=Qy(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Dl(p)}Ky(c)}function Ul(c){c.g&&(cd(c),c.g.cancel(),c.g=null)}function Uy(c){Ul(c),c.u&&(a.clearTimeout(c.u),c.u=null),zl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function Bl(c){if(!Ey(c.h)&&!c.s){c.s=!0;var p=c.Ga;Se||K(),B||(Se(),B=!0),q.add(p,c),c.B=0}}function Rk(c,p){return Ty(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=p.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Eo(f(c.Ga,c,p),qy(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const L=new pi(this,this.j,c);let V=this.o;if(this.S&&(V?(V=_(V),C(V,this.S)):V=this.S),this.m!==null||this.O||(L.H=V,V=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var x=this.i[g];if("__data__"in x.map&&(x=x.map.__data__,typeof x=="string")){x=x.length;break t}x=void 0}if(x===void 0)break;if(p+=x,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=zy(this,L,p),g=jn(this.I),be(g,"RID",c),be(g,"CVER",22),this.D&&be(g,"X-HTTP-Session-Id",this.D),Po(this,g),V&&(this.O?p="headers="+encodeURIComponent(String(Dy(V)))+"&"+p:this.m&&ad(g,this.m,V)),od(this.h,L),this.Ua&&be(g,"TYPE","init"),this.P?(be(g,"$req",p),be(g,"SID","null"),L.T=!0,nd(L,g,null)):nd(L,g,p),this.G=2}}else this.G==3&&(c?By(this,c):this.i.length==0||Ey(this.h)||By(this))};function By(c,p){var g;p?g=p.l:g=c.U++;const x=jn(c.I);be(x,"SID",c.K),be(x,"RID",g),be(x,"AID",c.T),Po(c,x),c.m&&c.o&&ad(x,c.m,c.o),g=new pi(c,c.j,g,c.B+1),c.m===null&&(g.H=c.o),p&&(c.i=p.D.concat(c.i)),p=zy(c,g,1e3),g.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),od(c.h,g),nd(g,x,p)}function Po(c,p){c.H&&D(c.H,function(g,x){be(p,x,g)}),c.l&&xy({},function(g,x){be(p,x,g)})}function zy(c,p,g){g=Math.min(c.i.length,g);var x=c.l?f(c.l.Na,c.l,c):null;e:{var L=c.i;let V=-1;for(;;){const z=["count="+g];V==-1?0<g?(V=L[0].g,z.push("ofs="+V)):V=0:z.push("ofs="+V);let Te=!0;for(let Ze=0;Ze<g;Ze++){let pe=L[Ze].g;const ut=L[Ze].map;if(pe-=V,0>pe)V=Math.max(0,L[Ze].g-100),Te=!1;else try{kk(ut,z,"req"+pe+"_")}catch{x&&x(ut)}}if(Te){x=z.join("&");break e}}}return c=c.i.splice(0,g),p.D=c,x}function $y(c){if(!c.g&&!c.u){c.Y=1;var p=c.Fa;Se||K(),B||(Se(),B=!0),q.add(p,c),c.v=0}}function ud(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Eo(f(c.Fa,c),qy(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,Wy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Eo(f(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Tt(10),Ul(this),Wy(this))};function cd(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function Wy(c){c.g=new pi(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var p=jn(c.qa);be(p,"RID","rpc"),be(p,"SID",c.K),be(p,"AID",c.T),be(p,"CI",c.F?"0":"1"),!c.F&&c.ja&&be(p,"TO",c.ja),be(p,"TYPE","xmlhttp"),Po(c,p),c.m&&c.o&&ad(p,c.m,c.o),c.L&&(c.g.I=c.L);var g=c.g;c=c.ia,g.L=1,g.v=Ll(jn(p)),g.m=null,g.P=!0,yy(g,c)}t.Za=function(){this.C!=null&&(this.C=null,Ul(this),ud(this),Tt(19))};function zl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function Hy(c,p){var g=null;if(c.g==p){zl(c),cd(c),c.g=null;var x=2}else if(sd(c.h,p))g=p.D,Sy(c.h,p),x=1;else return;if(c.G!=0){if(p.o)if(x==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var L=c.B;x=Pl(),Et(x,new fy(x,g)),Bl(c)}else $y(c);else if(L=p.s,L==3||L==0&&0<p.X||!(x==1&&Rk(c,p)||x==2&&ud(c)))switch(g&&0<g.length&&(p=c.h,p.i=p.i.concat(g)),L){case 1:fr(c,5);break;case 4:fr(c,10);break;case 3:fr(c,6);break;default:fr(c,2)}}}function qy(c,p){let g=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(g*=2),g*p}function fr(c,p){if(c.j.info("Error code "+p),p==2){var g=f(c.fb,c),x=c.Xa;const L=!x;x=new dr(x||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ml(x,"https"),Ll(x),L?Ik(x.toString(),g):xk(x.toString(),g)}else Tt(2);c.G=0,c.l&&c.l.sa(p),Ky(c),Uy(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Tt(2)):(this.j.info("Failed to ping google.com"),Tt(1))};function Ky(c){if(c.G=0,c.ka=[],c.l){const p=Iy(c.h);(p.length!=0||c.i.length!=0)&&(E(c.ka,p),E(c.ka,c.i),c.h.i.length=0,w(c.i),c.i.length=0),c.l.ra()}}function Gy(c,p,g){var x=g instanceof dr?jn(g):new dr(g);if(x.g!="")p&&(x.g=p+"."+x.g),Ol(x,x.s);else{var L=a.location;x=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;var V=new dr(null);x&&Ml(V,x),p&&(V.g=p),L&&Ol(V,L),g&&(V.l=g),x=V}return g=c.D,p=c.ya,g&&p&&be(x,g,p),be(x,"VER",c.la),Po(c,x),x}function Qy(c,p,g){if(p&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Ca&&!c.pa?new Ve(new Vl({eb:g})):new Ve(c.pa),p.Ha(c.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yy(){}t=Yy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function $l(){}$l.prototype.g=function(c,p){return new jt(c,p)};function jt(c,p){lt.call(this),this.g=new jy(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(c?c["X-WebChannel-Client-Profile"]=p.va:c={"X-WebChannel-Client-Profile":p.va}),this.g.S=c,(c=p&&p.Sb)&&!S(c)&&(this.g.m=c),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!S(p)&&(this.g.D=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new os(this)}v(jt,lt),jt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jt.prototype.close=function(){ld(this.g)},jt.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.u&&(g={},g.__data__=Yh(c),c=g);p.i.push(new pk(p.Ya++,c)),p.G==3&&Bl(p)},jt.prototype.N=function(){this.g.l=null,delete this.j,ld(this.g),delete this.g,jt.aa.N.call(this)};function Xy(c){Jh.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const g in p){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}v(Xy,Jh);function Jy(){Zh.call(this),this.status=1}v(Jy,Zh);function os(c){this.g=c}v(os,Yy),os.prototype.ua=function(){Et(this.g,"a")},os.prototype.ta=function(c){Et(this.g,new Xy(c))},os.prototype.sa=function(c){Et(this.g,new Jy)},os.prototype.ra=function(){Et(this.g,"b")},$l.prototype.createWebChannel=$l.prototype.g,jt.prototype.send=jt.prototype.o,jt.prototype.open=jt.prototype.m,jt.prototype.close=jt.prototype.close,kI=function(){return new $l},bI=function(){return Pl()},xI=cr,_p={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Rl.NO_ERROR=0,Rl.TIMEOUT=8,Rl.HTTP_ERROR=6,$u=Rl,py.COMPLETE="complete",II=py,uy.EventType=vo,vo.OPEN="a",vo.CLOSE="b",vo.ERROR="c",vo.MESSAGE="d",lt.prototype.listen=lt.prototype.K,Zo=uy,Ve.prototype.listenOnce=Ve.prototype.L,Ve.prototype.getLastError=Ve.prototype.Ka,Ve.prototype.getLastErrorCode=Ve.prototype.Ba,Ve.prototype.getStatus=Ve.prototype.Z,Ve.prototype.getResponseJson=Ve.prototype.Oa,Ve.prototype.getResponseText=Ve.prototype.oa,Ve.prototype.send=Ve.prototype.ea,Ve.prototype.setWithCredentials=Ve.prototype.Ha,SI=Ve}).apply(typeof uu<"u"?uu:typeof self<"u"?self:typeof window<"u"?window:{});const Kv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new _h("@firebase/firestore");function jo(){return $r.logLevel}function W(t,...e){if($r.logLevel<=ae.DEBUG){const n=e.map(Zg);$r.debug(`Firestore (${fo}): ${t}`,...n)}}function li(t,...e){if($r.logLevel<=ae.ERROR){const n=e.map(Zg);$r.error(`Firestore (${fo}): ${t}`,...n)}}function Gs(t,...e){if($r.logLevel<=ae.WARN){const n=e.map(Zg);$r.warn(`Firestore (${fo}): ${t}`,...n)}}function Zg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t="Unexpected state"){const e=`FIRESTORE (${fo}) INTERNAL ASSERTION FAILED: `+t;throw li(e),new Error(e)}function Ee(t,e){t||J()}function ee(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends vn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class pM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class gM{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ee(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,n(l)):Promise.resolve();let s=new Mr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Mr,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Mr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ee(typeof i.accessToken=="string"),new CI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ee(e===null||typeof e=="string"),new pt(e)}}class mM{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class yM{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new mM(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _M{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vM{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Ee(this.o===void 0);const i=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ee(typeof n.token=="string"),this.R=n.token,new _M(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wM(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=wM(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<n&&(i+=e.charAt(r[s]%e.length))}return i}}function ge(t,e){return t<e?-1:t>e?1:0}function Qs(t,e,n){return t.length===e.length&&t.every((i,r)=>n(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ge.fromMillis(Date.now())}static fromDate(e){return Ge.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new Ge(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Z(e)}static min(){return new Z(new Ge(0,0))}static max(){return new Z(new Ge(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,n,i){n===void 0?n=0:n>e.length&&J(),i===void 0?i=e.length-n:i>e.length-n&&J(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Xa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Xa?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let r=0;r<i;r++){const s=e.get(r),o=n.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Re extends Xa{construct(e,n,i){return new Re(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new G(j.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(r=>r.length>0))}return new Re(n)}static emptyPath(){return new Re([])}}const EM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nt extends Xa{construct(e,n,i){return new nt(e,n,i)}static isValidIdentifier(e){return EM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new nt(["__name__"])}static fromServerFormat(e){const n=[];let i="",r=0;const s=()=>{if(i.length===0)throw new G(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new G(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new G(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new G(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nt(n)}static emptyPath(){return new nt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.path=e}static fromPath(e){return new Q(Re.fromString(e))}static fromName(e){return new Q(Re.fromString(e).popFirst(5))}static empty(){return new Q(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Re.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Q(new Re(e.slice()))}}function TM(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Z.fromTimestamp(i===1e9?new Ge(n+1,0):new Ge(n,i));return new Ji(r,Q.empty(),e)}function SM(t){return new Ji(t.readTime,t.key,-1)}class Ji{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Ji(Z.min(),Q.empty(),-1)}static max(){return new Ji(Z.max(),Q.empty(),-1)}}function IM(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class bM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tl(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==xM)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(n,s).next(i,r)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,i)=>{n(e)})}static reject(e){return new F((n,i)=>{i(e)})}static waitFor(e){return new F((n,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&n()},l=>i(l))}),o=!0,s===r&&n()})}static or(e){let n=F.resolve(!1);for(const i of e)n=n.next(r=>r?F.resolve(r):i());return n}static forEach(e,n){const i=[];return e.forEach((r,s)=>{i.push(n.call(this,r,s))}),this.waitFor(i)}static mapArray(e,n){return new F((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const u=l;n(e[u]).next(h=>{o[u]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,n){return new F((i,r)=>{const s=()=>{e()===!0?n().next(()=>{s()},r):i()};s()})}}function kM(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Sl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}em.oe=-1;function Th(t){return t==null}function Dc(t){return t===0&&1/t==-1/0}function CM(t){return typeof t=="number"&&Number.isInteger(t)&&!Dc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function es(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e,n){this.comparator=e,this.root=n||tt.EMPTY}insert(e,n){return new Le(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,tt.BLACK,null,null))}remove(e){return new Le(this.comparator,this.root.remove(e,this.comparator).copy(null,null,tt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return n+i.left.size;r<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new cu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new cu(this.root,e,this.comparator,!1)}getReverseIterator(){return new cu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new cu(this.root,e,this.comparator,!0)}}class cu{constructor(e,n,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?i(e.key,n):1,n&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class tt{constructor(e,n,i,r,s){this.key=e,this.value=n,this.color=i??tt.RED,this.left=r??tt.EMPTY,this.right=s??tt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,r,s){return new tt(e??this.key,n??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,n,i),null):s===0?r.copy(null,n,null,null,null):r.copy(null,null,null,null,r.right.insert(e,n,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return tt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,r=this;if(n(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),n(e,r.key)===0){if(r.right.isEmpty())return tt.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,tt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,tt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();const e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}}tt.EMPTY=null,tt.RED=!0,tt.BLACK=!1;tt.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,i,r,s){return this}insert(e,n,i){return new tt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;n(r.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Qv(this.data.getIterator())}getIteratorFrom(e){return new Qv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof st)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new st(this.comparator);return n.data=e,n}}class Qv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(e){this.fields=e,e.sort(nt.comparator)}static empty(){return new $t([])}unionWith(e){let n=new st(nt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new $t(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Qs(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new RI("Invalid base64 string: "+s):s}}(e);return new at(n)}static fromUint8Array(e){const n=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new at(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}at.EMPTY_BYTE_STRING=new at("");const AM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zi(t){if(Ee(!!t),typeof t=="string"){let e=0;const n=AM.exec(t);if(Ee(!!n),n[1]){let r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Wr(t){return typeof t=="string"?at.fromBase64String(t):at.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function nm(t){const e=t.mapValue.fields.__previous_value__;return tm(e)?nm(e):e}function Ja(t){const e=Zi(t.mapValue.fields.__local_write_time__.timestampValue);return new Ge(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e,n,i,r,s,o,a,l,u){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class Za{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Za("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Za&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu={mapValue:{}};function Hr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?tm(t)?4:NM(t)?9007199254740991:RM(t)?10:11:J()}function Ln(t,e){if(t===e)return!0;const n=Hr(t);if(n!==Hr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ja(t).isEqual(Ja(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Zi(r.timestampValue),a=Zi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Wr(r.bytesValue).isEqual(Wr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return je(r.geoPointValue.latitude)===je(s.geoPointValue.latitude)&&je(r.geoPointValue.longitude)===je(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return je(r.integerValue)===je(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=je(r.doubleValue),a=je(s.doubleValue);return o===a?Dc(o)===Dc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Qs(t.arrayValue.values||[],e.arrayValue.values||[],Ln);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(Gv(o)!==Gv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Ln(o[l],a[l])))return!1;return!0}(t,e);default:return J()}}function el(t,e){return(t.values||[]).find(n=>Ln(n,e))!==void 0}function Ys(t,e){if(t===e)return 0;const n=Hr(t),i=Hr(e);if(n!==i)return ge(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=je(s.integerValue||s.doubleValue),l=je(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return Yv(t.timestampValue,e.timestampValue);case 4:return Yv(Ja(t),Ja(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Wr(s),l=Wr(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const h=ge(a[u],l[u]);if(h!==0)return h}return ge(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ge(je(s.latitude),je(o.latitude));return a!==0?a:ge(je(s.longitude),je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Xv(t.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,u,h;const d=s.fields||{},f=o.fields||{},m=(a=d.value)===null||a===void 0?void 0:a.arrayValue,v=(l=f.value)===null||l===void 0?void 0:l.arrayValue,w=ge(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((h=v==null?void 0:v.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:Xv(m,v)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===hu.mapValue&&o===hu.mapValue)return 0;if(s===hu.mapValue)return 1;if(o===hu.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),u=o.fields||{},h=Object.keys(u);l.sort(),h.sort();for(let d=0;d<l.length&&d<h.length;++d){const f=ge(l[d],h[d]);if(f!==0)return f;const m=Ys(a[l[d]],u[h[d]]);if(m!==0)return m}return ge(l.length,h.length)}(t.mapValue,e.mapValue);default:throw J()}}function Yv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=Zi(t),i=Zi(e),r=ge(n.seconds,i.seconds);return r!==0?r:ge(n.nanos,i.nanos)}function Xv(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const s=Ys(n[r],i[r]);if(s)return s}return ge(n.length,i.length)}function Xs(t){return vp(t)}function vp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Zi(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Wr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",r=!0;for(const s of n.values||[])r?r=!1:i+=",",i+=vp(s);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${vp(n.fields[o])}`;return r+"}"}(t.mapValue):J()}function wp(t){return!!t&&"integerValue"in t}function im(t){return!!t&&"arrayValue"in t}function Jv(t){return!!t&&"nullValue"in t}function Zv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wu(t){return!!t&&"mapValue"in t}function RM(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function _a(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return es(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=_a(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_a(t.arrayValue.values[n]);return e}return Object.assign({},t)}function NM(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.value=e}static empty(){return new Pt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!Wu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_a(n)}setAll(e){let n=nt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,i,r),i={},r=[],n=a.popLast()}o?i[a.lastSegment()]=_a(o):r.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,i,r)}delete(e){const n=this.field(e.popLast());Wu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Ln(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=n.mapValue.fields[e.get(i)];Wu(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=r),n=r}return n.mapValue.fields}applyChanges(e,n,i){es(n,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Pt(_a(this.value))}}function NI(t){const e=[];return es(t.fields,(n,i)=>{const r=new nt([n]);if(Wu(i)){const s=NI(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new $t(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,i,r,s,o,a){this.key=e,this.documentType=n,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mt(e,0,Z.min(),Z.min(),Z.min(),Pt.empty(),0)}static newFoundDocument(e,n,i,r){return new mt(e,1,n,Z.min(),i,r,0)}static newNoDocument(e,n){return new mt(e,2,n,Z.min(),Z.min(),Pt.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,Z.min(),Z.min(),Pt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mc{constructor(e,n){this.position=e,this.inclusive=n}}function e0(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(s.field.isKeyField()?i=Q.comparator(Q.fromName(o.referenceValue),n.key):i=Ys(o,n.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function t0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Ln(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,n="asc"){this.field=e,this.dir=n}}function DM(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{}class qe extends DI{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new OM(e,n,i):n==="array-contains"?new FM(e,i):n==="in"?new jM(e,i):n==="not-in"?new UM(e,i):n==="array-contains-any"?new BM(e,i):new qe(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new LM(e,i):new VM(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ys(n,this.value)):n!==null&&Hr(this.value)===Hr(n)&&this.matchesComparison(Ys(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Vn extends DI{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Vn(e,n)}matches(e){return MI(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function MI(t){return t.op==="and"}function OI(t){return MM(t)&&MI(t)}function MM(t){for(const e of t.filters)if(e instanceof Vn)return!1;return!0}function Ep(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+Xs(t.value);if(OI(t))return t.filters.map(e=>Ep(e)).join(",");{const e=t.filters.map(n=>Ep(n)).join(",");return`${t.op}(${e})`}}function LI(t,e){return t instanceof qe?function(i,r){return r instanceof qe&&i.op===r.op&&i.field.isEqual(r.field)&&Ln(i.value,r.value)}(t,e):t instanceof Vn?function(i,r){return r instanceof Vn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&LI(o,r.filters[a]),!0):!1}(t,e):void J()}function VI(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${Xs(n.value)}`}(t):t instanceof Vn?function(n){return n.op.toString()+" {"+n.getFilters().map(VI).join(" ,")+"}"}(t):"Filter"}class OM extends qe{constructor(e,n,i){super(e,n,i),this.key=Q.fromName(i.referenceValue)}matches(e){const n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}}class LM extends qe{constructor(e,n){super(e,"in",n),this.keys=FI("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class VM extends qe{constructor(e,n){super(e,"not-in",n),this.keys=FI("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function FI(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>Q.fromName(i.referenceValue))}class FM extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return im(n)&&el(n.arrayValue,this.value)}}class jM extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&el(this.value.arrayValue,n)}}class UM extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(el(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!el(this.value.arrayValue,n)}}class BM extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!im(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>el(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(e,n=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function n0(t,e=null,n=[],i=[],r=null,s=null,o=null){return new zM(t,e,n,i,r,s,o)}function rm(t){const e=ee(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>Ep(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Th(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Xs(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Xs(i)).join(",")),e.ue=n}return e.ue}function sm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!DM(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!LI(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!t0(t.startAt,e.startAt)&&t0(t.endAt,e.endAt)}function Tp(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,n=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function $M(t,e,n,i,r,s,o,a){return new Sh(t,e,n,i,r,s,o,a)}function om(t){return new Sh(t)}function i0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WM(t){return t.collectionGroup!==null}function va(t){const e=ee(t);if(e.ce===null){e.ce=[];const n=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new st(nt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Oc(s,i))}),n.has(nt.keyField().canonicalString())||e.ce.push(new Oc(nt.keyField(),i))}return e.ce}function Nn(t){const e=ee(t);return e.le||(e.le=HM(e,va(t))),e.le}function HM(t,e){if(t.limitType==="F")return n0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Oc(r.field,s)});const n=t.endAt?new Mc(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Mc(t.startAt.position,t.startAt.inclusive):null;return n0(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function Sp(t,e,n){return new Sh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ih(t,e){return sm(Nn(t),Nn(e))&&t.limitType===e.limitType}function jI(t){return`${rm(Nn(t))}|lt:${t.limitType}`}function ds(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(r=>VI(r)).join(", ")}]`),Th(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(r=>Xs(r)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(r=>Xs(r)).join(",")),`Target(${i})`}(Nn(t))}; limitType=${t.limitType})`}function xh(t,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Q.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(t,e)&&function(i,r){for(const s of va(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const u=e0(o,a,l);return o.inclusive?u<=0:u<0}(i.startAt,va(i),r)||i.endAt&&!function(o,a,l){const u=e0(o,a,l);return o.inclusive?u>=0:u>0}(i.endAt,va(i),r))}(t,e)}function qM(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UI(t){return(e,n)=>{let i=!1;for(const r of va(t)){const s=KM(r,e,n);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function KM(t,e,n){const i=t.field.isKeyField()?Q.comparator(e.key,n.key):function(s,o,a){const l=o.data.field(s),u=a.data.field(s);return l!==null&&u!==null?Ys(l,u):J()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return J()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,n]);r.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[n]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){es(this.inner,(n,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return PI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GM=new Le(Q.comparator);function ui(){return GM}const BI=new Le(Q.comparator);function ea(...t){let e=BI;for(const n of t)e=e.insert(n.key,n);return e}function zI(t){let e=BI;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function kr(){return wa()}function $I(){return wa()}function wa(){return new po(t=>t.toString(),(t,e)=>t.isEqual(e))}const QM=new Le(Q.comparator),YM=new st(Q.comparator);function se(...t){let e=YM;for(const n of t)e=e.add(n);return e}const XM=new st(ge);function JM(){return XM}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function am(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dc(e)?"-0":e}}function WI(t){return{integerValue:""+t}}function ZM(t,e){return CM(e)?WI(e):am(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(){this._=void 0}}function e2(t,e,n){return t instanceof tl?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&tm(s)&&(s=nm(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof nl?qI(t,e):t instanceof il?KI(t,e):function(r,s){const o=HI(r,s),a=r0(o)+r0(r.Pe);return wp(o)&&wp(r.Pe)?WI(a):am(r.serializer,a)}(t,e)}function t2(t,e,n){return t instanceof nl?qI(t,e):t instanceof il?KI(t,e):n}function HI(t,e){return t instanceof Lc?function(i){return wp(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class tl extends bh{}class nl extends bh{constructor(e){super(),this.elements=e}}function qI(t,e){const n=GI(e);for(const i of t.elements)n.some(r=>Ln(r,i))||n.push(i);return{arrayValue:{values:n}}}class il extends bh{constructor(e){super(),this.elements=e}}function KI(t,e){let n=GI(e);for(const i of t.elements)n=n.filter(r=>!Ln(r,i));return{arrayValue:{values:n}}}class Lc extends bh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function r0(t){return je(t.integerValue||t.doubleValue)}function GI(t){return im(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n){this.field=e,this.transform=n}}function i2(t,e){return t.field.isEqual(e.field)&&function(i,r){return i instanceof nl&&r instanceof nl||i instanceof il&&r instanceof il?Qs(i.elements,r.elements,Ln):i instanceof Lc&&r instanceof Lc?Ln(i.Pe,r.Pe):i instanceof tl&&r instanceof tl}(t.transform,e.transform)}class r2{constructor(e,n){this.version=e,this.transformResults=n}}class pn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pn}static exists(e){return new pn(void 0,e)}static updateTime(e){return new pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kh{}function QI(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new lm(t.key,pn.none()):new Il(t.key,t.data,pn.none());{const n=t.data,i=Pt.empty();let r=new st(nt.comparator);for(let s of e.fields)if(!r.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new lr(t.key,i,new $t(r.toArray()),pn.none())}}function s2(t,e,n){t instanceof Il?function(r,s,o){const a=r.value.clone(),l=o0(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof lr?function(r,s,o){if(!Hu(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=o0(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(YI(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Ea(t,e,n,i){return t instanceof Il?function(s,o,a,l){if(!Hu(s.precondition,o))return a;const u=s.value.clone(),h=a0(s.fieldTransforms,l,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,n,i):t instanceof lr?function(s,o,a,l){if(!Hu(s.precondition,o))return a;const u=a0(s.fieldTransforms,l,o),h=o.data;return h.setAll(YI(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,i):function(s,o,a){return Hu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function o2(t,e){let n=null;for(const i of t.fieldTransforms){const r=e.data.field(i.field),s=HI(i.transform,r||null);s!=null&&(n===null&&(n=Pt.empty()),n.set(i.field,s))}return n||null}function s0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Qs(i,r,(s,o)=>i2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Il extends kh{constructor(e,n,i,r=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class lr extends kh{constructor(e,n,i,r,s=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function YI(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function o0(t,e,n){const i=new Map;Ee(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,t2(o,a,n[r]))}return i}function a0(t,e,n){const i=new Map;for(const r of t){const s=r.transform,o=n.data.field(r.field);i.set(r.field,e2(s,o,e))}return i}class lm extends kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class a2 extends kh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n,i,r){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&s2(s,e,i[r])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=Ea(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=Ea(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=$I();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(r.key)?null:a;const l=QI(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Qs(this.mutations,e.mutations,(n,i)=>s0(n,i))&&Qs(this.baseMutations,e.baseMutations,(n,i)=>s0(n,i))}}class um{constructor(e,n,i,r){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=r}static from(e,n,i){Ee(e.mutations.length===i.length);let r=function(){return QM}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new um(e,n,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e,le;function h2(t){switch(t){default:return J();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function XI(t){if(t===void 0)return li("GRPC error has no .code"),j.UNKNOWN;switch(t){case $e.OK:return j.OK;case $e.CANCELLED:return j.CANCELLED;case $e.UNKNOWN:return j.UNKNOWN;case $e.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case $e.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case $e.INTERNAL:return j.INTERNAL;case $e.UNAVAILABLE:return j.UNAVAILABLE;case $e.UNAUTHENTICATED:return j.UNAUTHENTICATED;case $e.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case $e.NOT_FOUND:return j.NOT_FOUND;case $e.ALREADY_EXISTS:return j.ALREADY_EXISTS;case $e.PERMISSION_DENIED:return j.PERMISSION_DENIED;case $e.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case $e.ABORTED:return j.ABORTED;case $e.OUT_OF_RANGE:return j.OUT_OF_RANGE;case $e.UNIMPLEMENTED:return j.UNIMPLEMENTED;case $e.DATA_LOSS:return j.DATA_LOSS;default:return J()}}(le=$e||($e={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=new Dr([4294967295,4294967295],0);function l0(t){const e=d2().encode(t),n=new TI;return n.update(e),new Uint8Array(n.digest())}function u0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Dr([n,i],0),new Dr([r,s],0)]}class cm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new ta(`Invalid padding: ${n}`);if(i<0)throw new ta(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new ta(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new ta(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Dr.fromNumber(this.Ie)}Ee(e,n,i){let r=e.add(n.multiply(Dr.fromNumber(i)));return r.compare(f2)===1&&(r=new Dr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=l0(e),[i,r]=u0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,n,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new cm(s,r,n);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=l0(e),[i,r]=u0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class ta extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,n,i,r,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const r=new Map;return r.set(e,xl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new Ch(Z.min(),r,new Le(ge),ui(),se())}}class xl{constructor(e,n,i,r,s){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new xl(i,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n,i,r){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=r}}class JI{constructor(e,n){this.targetId=e,this.me=n}}class ZI{constructor(e,n,i=at.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=r}}class c0{constructor(){this.fe=0,this.ge=d0(),this.pe=at.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),n=se(),i=se();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:n=n.add(r);break;case 1:i=i.add(r);break;default:J()}}),new xl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=d0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ee(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class p2{constructor(e){this.Le=e,this.Be=new Map,this.ke=ui(),this.qe=h0(),this.Qe=new Le(ge)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,r)=>{this.ze(r)&&n(r)})}He(e){const n=e.targetId,i=e.me.count,r=this.Je(n);if(r){const s=r.target;if(Tp(s))if(i===0){const o=new Q(s.path);this.Ue(n,o,mt.newNoDocument(o,Z.min()))}else Ee(i===1);else{const o=this.Ye(n);if(o!==i){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(n);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,u)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=n;let o,a;try{o=Wr(i).toUint8Array()}catch(l){if(l instanceof RI)return Gs("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new cm(o,r,s)}catch(l){return Gs(l instanceof ta?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let r=0;return i.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),r++)}),r}rt(e){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&Tp(a.target)){const l=new Q(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,mt.newNoDocument(l,e))}s.be&&(n.set(o,s.ve()),s.Ce())}});let i=se();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new Ch(e,n,this.Qe,this.ke,i);return this.ke=ui(),this.qe=h0(),this.Qe=new Le(ge),r}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const r=this.Ge(e);this.it(e,n)?r.Fe(n,1):r.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new c0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new st(ge),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new c0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function h0(){return new Le(Q.comparator)}function d0(){return new Le(Q.comparator)}const g2={asc:"ASCENDING",desc:"DESCENDING"},m2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},y2={and:"AND",or:"OR"};class _2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ip(t,e){return t.useProto3Json||Th(e)?e:{value:e}}function Vc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ex(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function v2(t,e){return Vc(t,e.toTimestamp())}function Dn(t){return Ee(!!t),Z.fromTimestamp(function(n){const i=Zi(n);return new Ge(i.seconds,i.nanos)}(t))}function hm(t,e){return xp(t,e).canonicalString()}function xp(t,e){const n=function(r){return new Re(["projects",r.projectId,"databases",r.database])}(t).child("documents");return e===void 0?n:n.child(e)}function tx(t){const e=Re.fromString(t);return Ee(ox(e)),e}function bp(t,e){return hm(t.databaseId,e.path)}function qd(t,e){const n=tx(e);if(n.get(1)!==t.databaseId.projectId)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(ix(n))}function nx(t,e){return hm(t.databaseId,e)}function w2(t){const e=tx(t);return e.length===4?Re.emptyPath():ix(e)}function kp(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ix(t){return Ee(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function f0(t,e,n){return{name:bp(t,e),fields:n.value.mapValue.fields}}function E2(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(Ee(h===void 0||typeof h=="string"),at.fromBase64String(h||"")):(Ee(h===void 0||h instanceof Buffer||h instanceof Uint8Array),at.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const h=u.code===void 0?j.UNKNOWN:XI(u.code);return new G(h,u.message||"")}(o);n=new ZI(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=qd(t,i.document.name),s=Dn(i.document.updateTime),o=i.document.createTime?Dn(i.document.createTime):Z.min(),a=new Pt({mapValue:{fields:i.document.fields}}),l=mt.newFoundDocument(r,s,o,a),u=i.targetIds||[],h=i.removedTargetIds||[];n=new qu(u,h,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=qd(t,i.document),s=i.readTime?Dn(i.readTime):Z.min(),o=mt.newNoDocument(r,s),a=i.removedTargetIds||[];n=new qu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=qd(t,i.document),s=i.removedTargetIds||[];n=new qu([],s,r,null)}else{if(!("filter"in e))return J();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new c2(r,s),a=i.targetId;n=new JI(a,o)}}return n}function T2(t,e){let n;if(e instanceof Il)n={update:f0(t,e.key,e.value)};else if(e instanceof lm)n={delete:bp(t,e.key)};else if(e instanceof lr)n={update:f0(t,e.key,e.data),updateMask:R2(e.fieldMask)};else{if(!(e instanceof a2))return J();n={verify:bp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof tl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof nl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof il)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Lc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw J()}(0,i))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:v2(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J()}(t,e.precondition)),n}function S2(t,e){return t&&t.length>0?(Ee(e!==void 0),t.map(n=>function(r,s){let o=r.updateTime?Dn(r.updateTime):Dn(s);return o.isEqual(Z.min())&&(o=Dn(s)),new r2(o,r.transformResults||[])}(n,e))):[]}function I2(t,e){return{documents:[nx(t,e.path)]}}function x2(t,e){const n={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=nx(t,r);const s=function(u){if(u.length!==0)return sx(Vn.create(u,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(u){if(u.length!==0)return u.map(h=>function(f){return{field:fs(f.field),direction:C2(f.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ip(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:n,parent:r}}function b2(t){let e=w2(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Ee(i===1);const h=n.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(d){const f=rx(d);return f instanceof Vn&&OI(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(v){return new Oc(ps(v.field),function(E){switch(E){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(n.orderBy));let a=null;n.limit&&(a=function(d){let f;return f=typeof d=="object"?d.value:d,Th(f)?null:f}(n.limit));let l=null;n.startAt&&(l=function(d){const f=!!d.before,m=d.values||[];return new Mc(m,f)}(n.startAt));let u=null;return n.endAt&&(u=function(d){const f=!d.before,m=d.values||[];return new Mc(m,f)}(n.endAt)),$M(e,r,o,s,a,"F",l,u)}function k2(t,e){const n=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function rx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=ps(n.unaryFilter.field);return qe.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ps(n.unaryFilter.field);return qe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ps(n.unaryFilter.field);return qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ps(n.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(n){return qe.create(ps(n.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Vn.create(n.compositeFilter.filters.map(i=>rx(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J()}function C2(t){return g2[t]}function A2(t){return m2[t]}function P2(t){return y2[t]}function fs(t){return{fieldPath:t.canonicalString()}}function ps(t){return nt.fromServerFormat(t.fieldPath)}function sx(t){return t instanceof qe?function(n){if(n.op==="=="){if(Zv(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NAN"}};if(Jv(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Zv(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NOT_NAN"}};if(Jv(n.value))return{unaryFilter:{field:fs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fs(n.field),op:A2(n.op),value:n.value}}}(t):t instanceof Vn?function(n){const i=n.getFilters().map(r=>sx(r));return i.length===1?i[0]:{compositeFilter:{op:P2(n.op),filters:i}}}(t):J()}function R2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function ox(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e,n,i,r,s=Z.min(),o=Z.min(),a=at.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(e){this.ct=e}}function D2(t){const e=b2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Sp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(){this.un=new O2}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Ji.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Ji.min())}updateCollectionGroup(e,n,i){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class O2{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n]||new st(Re.comparator),s=!r.has(i);return this.index[n]=r.add(i),s}has(e){const n=e.lastSegment(),i=e.popLast(),r=this.index[n];return r&&r.has(i)}getEntries(e){return(this.index[e]||new st(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Js(0)}static kn(){return new Js(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(){this.changes=new po(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?F.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n,i,r){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,n))).next(r=>(i!==null&&Ea(i.mutation,r,$t.empty(),Ge.now()),r))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,se()).next(()=>i))}getLocalViewOfDocuments(e,n,i=se()){const r=kr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,i).next(s=>{let o=ea();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const i=kr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,se()))}populateOverlays(e,n,i){const r=[];return i.forEach(s=>{n.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,i,r){let s=ui();const o=wa(),a=function(){return wa()}();return n.forEach((l,u)=>{const h=i.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof lr)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),Ea(h.mutation,u,h.mutation.getFieldMask(),Ge.now())):o.set(u.key,$t.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((u,h)=>o.set(u,h)),n.forEach((u,h)=>{var d;return a.set(u,new V2(h,(d=o.get(u))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const i=wa();let r=new Le((o,a)=>o-a),s=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let h=i.get(l)||$t.empty();h=a.applyToLocalView(u,h),i.set(l,h);const d=(r.get(a.batchId)||se()).add(l);r=r.insert(a.batchId,d)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,h=l.value,d=$I();h.forEach(f=>{if(!s.has(f)){const m=QI(n.get(f),i.get(f));m!==null&&d.set(f,m),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,d))}return F.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,r){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WM(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,r):this.getDocumentsMatchingCollectionQuery(e,n,i,r)}getNextDocuments(e,n,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,r-s.size):F.resolve(kr());let a=-1,l=s;return o.next(u=>F.forEach(u,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?F.resolve():this.remoteDocumentCache.getEntry(e,h).next(f=>{l=l.insert(h,f)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,l,u,se())).next(h=>({batchId:a,changes:zI(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(i=>{let r=ea();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,n,i,r){const s=n.collectionGroup;let o=ea();return this.indexManager.getCollectionParents(e,s).next(a=>F.forEach(a,l=>{const u=function(d,f){return new Sh(f,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(h=>{h.forEach((d,f)=>{o=o.insert(d,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,s,r))).next(o=>{s.forEach((l,u)=>{const h=u.getKey();o.get(h)===null&&(o=o.insert(h,mt.newInvalidDocument(h)))});let a=ea();return o.forEach((l,u)=>{const h=s.get(l);h!==void 0&&Ea(h.mutation,u,$t.empty(),Ge.now()),xh(n,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(r){return{id:r.id,version:r.version,createTime:Dn(r.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(r){return{name:r.name,query:D2(r.bundledQuery),readTime:Dn(r.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this.overlays=new Le(Q.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const i=kr();return F.forEach(n,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((r,s)=>{this.ht(e,n,s)}),F.resolve()}removeOverlaysForBatchId(e,n,i){const r=this.Ir.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Ir.delete(i)),F.resolve()}getOverlaysForCollection(e,n,i){const r=kr(),s=n.length+1,o=new Q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return F.resolve(r)}getOverlaysForCollectionGroup(e,n,i,r){let s=new Le((u,h)=>u-h);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>i){let h=s.get(u.largestBatchId);h===null&&(h=kr(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const a=kr(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return F.resolve(a)}ht(e,n,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Ir.get(r.largestBatchId).delete(i.key);this.Ir.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new u2(n,i));let s=this.Ir.get(n);s===void 0&&(s=se(),this.Ir.set(n,s)),this.Ir.set(n,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(){this.sessionToken=at.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(){this.Tr=new st(Qe.Er),this.dr=new st(Qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new Qe(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new Qe(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new Q(new Re([])),i=new Qe(n,e),r=new Qe(n,e+1),s=[];return this.dr.forEachInRange([i,r],o=>{this.Vr(o),s.push(o.key)}),s}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Q(new Re([])),i=new Qe(n,e),r=new Qe(n,e+1);let s=se();return this.dr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new Qe(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class Qe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Q.comparator(e.key,n.key)||ge(e.wr,n.wr)}static Ar(e,n){return ge(e.wr,n.wr)||Q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new st(Qe.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,r){const s=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new l2(s,n,i,r);this.mutationQueue.push(o);for(const a of r)this.br=this.br.add(new Qe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,r=this.vr(i),s=r<0?0:r;return F.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new Qe(n,0),r=new Qe(n,Number.POSITIVE_INFINITY),s=[];return this.br.forEachInRange([i,r],o=>{const a=this.Dr(o.wr);s.push(a)}),F.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new st(ge);return n.forEach(r=>{const s=new Qe(r,0),o=new Qe(r,Number.POSITIVE_INFINITY);this.br.forEachInRange([s,o],a=>{i=i.add(a.wr)})}),F.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,r=i.length+1;let s=i;Q.isDocumentKey(s)||(s=s.child(""));const o=new Qe(new Q(s),0);let a=new st(ge);return this.br.forEachWhile(l=>{const u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(l.wr)),!0)},o),F.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(i=>{const r=this.Dr(i);r!==null&&n.push(r)}),n}removeMutationBatch(e,n){Ee(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return F.forEach(n.mutations,r=>{const s=new Qe(r.key,n.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new Qe(n,0),r=this.br.firstAfterOrEqual(i);return F.resolve(n.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.Mr=e,this.docs=function(){return new Le(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,r=this.docs.get(i),s=r?r.size:0,o=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return F.resolve(i?i.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let i=ui();return n.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():mt.newInvalidDocument(r))}),F.resolve(i)}getDocumentsMatchingQuery(e,n,i,r){let s=ui();const o=n.path,a=new Q(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:h}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||IM(SM(h),i)<=0||(r.has(h.key)||xh(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return F.resolve(s)}getAllFromCollectionGroup(e,n,i,r){J()}Or(e,n){return F.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new W2(this)}getSize(e){return F.resolve(this.size)}}class W2 extends L2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?n.push(this.cr.addEntry(e,r)):this.cr.removeEntry(i)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H2{constructor(e){this.persistence=e,this.Nr=new po(n=>rm(n),sm),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new dm,this.targetCount=0,this.kr=Js.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,r)=>n(r)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Js(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,i){let r=0;const s=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&i.get(a.targetId)===null&&(this.Nr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),F.waitFor(s).next(()=>r)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return F.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),F.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const r=this.persistence.referenceDelegate,s=[];return r&&n.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),F.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return F.resolve(i)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new em(0),this.Kr=!1,this.Kr=!0,this.$r=new B2,this.referenceDelegate=e(this),this.Ur=new H2(this),this.indexManager=new M2,this.remoteDocumentCache=function(r){return new $2(r)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new N2(n),this.Gr=new j2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new U2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new z2(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){W("MemoryPersistence","Starting transaction:",e);const r=new K2(this.Qr.next());return this.referenceDelegate.zr(),i(r).next(s=>this.referenceDelegate.jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Hr(e,n){return F.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class K2 extends bM{constructor(e){super(),this.currentSequenceNumber=e}}class fm{constructor(e){this.persistence=e,this.Jr=new dm,this.Yr=null}static Zr(e){return new fm(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),F.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(r=>this.Xr.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(r=>{r.forEach(s=>this.Xr.add(s.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,i=>{const r=Q.fromPath(i);return this.ei(e,r).next(s=>{s||n.removeEntry(r,Z.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(e,n,i,r){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=r}static Wi(e,n){let i=se(),r=se();for(const s of n.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new pm(e,n.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return kP()?8:kM(vt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,r){const s={result:null};return this.Yi(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Zi(e,n,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new G2;return this.Xi(e,n,o).next(a=>{if(s.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>s.result)}es(e,n,i,r){return i.documentReadCount<this.ji?(jo()<=ae.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",ds(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(jo()<=ae.DEBUG&&W("QueryEngine","Query:",ds(n),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Hi*r?(jo()<=ae.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",ds(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Nn(n))):F.resolve())}Yi(e,n){if(i0(n))return F.resolve(null);let i=Nn(n);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(n.limit!==null&&r===1&&(n=Sp(n,null,"F"),i=Nn(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=se(...s);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const u=this.ts(n,a);return this.ns(n,u,o,l.readTime)?this.Yi(e,Sp(n,null,"F")):this.rs(e,u,n,l)}))})))}Zi(e,n,i,r){return i0(n)||r.isEqual(Z.min())?F.resolve(null):this.Ji.getDocuments(e,i).next(s=>{const o=this.ts(n,s);return this.ns(n,o,i,r)?F.resolve(null):(jo()<=ae.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ds(n)),this.rs(e,o,n,TM(r,-1)).next(a=>a))})}ts(e,n){let i=new st(UI(e));return n.forEach((r,s)=>{xh(e,s)&&(i=i.add(s))}),i}ns(e,n,i,r){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Xi(e,n,i){return jo()<=ae.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",ds(n)),this.Ji.getDocumentsMatchingQuery(e,n,Ji.min(),i)}rs(e,n,i,r){return this.Ji.getDocumentsMatchingQuery(e,i,r).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n,i,r){this.persistence=e,this.ss=n,this.serializer=r,this.os=new Le(ge),this._s=new po(s=>rm(s),sm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new F2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function X2(t,e,n,i){return new Y2(t,e,n,i)}async function ax(t,e){const n=ee(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let r;return n.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=se();for(const u of r){o.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}for(const u of s){a.push(u.batchId);for(const h of u.mutations)l=l.add(h.key)}return n.localDocuments.getDocuments(i,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function J2(t,e){const n=ee(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,h){const d=u.batch,f=d.keys();let m=F.resolve();return f.forEach(v=>{m=m.next(()=>h.getEntry(l,v)).next(w=>{const E=u.docVersions.get(v);Ee(E!==null),w.version.compareTo(E)<0&&(d.applyToRemoteDocument(w,u),w.isValidDocument()&&(w.setReadTime(u.commitVersion),h.addEntry(w)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(n,i,e,s).next(()=>s.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=se();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>n.localDocuments.getDocuments(i,r))})}function lx(t){const e=ee(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Z2(t,e){const n=ee(t),i=e.snapshotVersion;let r=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});r=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const f=r.get(d);if(!f)return;a.push(n.Ur.removeMatchingKeys(s,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(s,h.addedDocuments,d)));let m=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?m=m.withResumeToken(at.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),r=r.insert(d,m),function(w,E,T){return w.resumeToken.approximateByteSize()===0||E.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(f,m,h)&&a.push(n.Ur.updateTargetData(s,m))});let l=ui(),u=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(eO(s,o,e.documentUpdates).next(h=>{l=h.Ps,u=h.Is})),!i.isEqual(Z.min())){const h=n.Ur.getLastRemoteSnapshotVersion(s).next(d=>n.Ur.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return F.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,l,u)).next(()=>l)}).then(s=>(n.os=r,s))}function eO(t,e,n){let i=se(),r=se();return n.forEach(s=>i=i.add(s)),e.getEntries(t,i).next(s=>{let o=ui();return n.forEach((a,l)=>{const u=s.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Z.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:r}})}function tO(t,e){const n=ee(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function nO(t,e){const n=ee(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return n.Ur.getTargetData(i,e).next(s=>s?(r=s,F.resolve(r)):n.Ur.allocateTargetId(i).next(o=>(r=new Di(e,o,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=n.os.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function Cp(t,e,n){const i=ee(t),r=i.os.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Sl(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.os=i.os.remove(e),i._s.delete(r.target)}function p0(t,e,n){const i=ee(t);let r=Z.min(),s=se();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,h){const d=ee(l),f=d._s.get(h);return f!==void 0?F.resolve(d.os.get(f)):d.Ur.getTargetData(u,h)}(i,o,Nn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.ss.getDocumentsMatchingQuery(o,e,n?r:Z.min(),n?s:se())).next(a=>(iO(i,qM(e),a),{documents:a,Ts:s})))}function iO(t,e,n){let i=t.us.get(e)||Z.min();n.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),t.us.set(e,i)}class g0{constructor(){this.activeTargetIds=JM()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class rO{constructor(){this.so=new g0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new g0,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let du=null;function Kd(){return du===null?du=function(){return 268435456+Math.round(2147483648*Math.random())}():du++,"0x"+du.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ft="WebChannelConnection";class lO extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get Fo(){return!1}Mo(n,i,r,s,o){const a=Kd(),l=this.xo(n,i.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,s,o),this.No(n,l,u,r).then(h=>(W("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Gs("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Lo(n,i,r,s,o,a){return this.Mo(n,i,r,s,o)}Oo(n,i,r){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>n[o]=s),r&&r.headers.forEach((s,o)=>n[o]=s)}xo(n,i){const r=oO[n];return`${this.Do}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,r){const s=Kd();return new Promise((o,a)=>{const l=new SI;l.setWithCredentials(!0),l.listenOnce(II.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case $u.NO_ERROR:const h=l.getResponseJson();W(ft,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case $u.TIMEOUT:W(ft,`RPC '${e}' ${s} timed out`),a(new G(j.DEADLINE_EXCEEDED,"Request time out"));break;case $u.HTTP_ERROR:const d=l.getStatus();if(W(ft,`RPC '${e}' ${s} failed with status:`,d,"response text:",l.getResponseText()),d>0){let f=l.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const v=function(E){const T=E.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(T)>=0?T:j.UNKNOWN}(m.status);a(new G(v,m.message))}else a(new G(j.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new G(j.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{W(ft,`RPC '${e}' ${s} completed.`)}});const u=JSON.stringify(r);W(ft,`RPC '${e}' ${s} sending request:`,r),l.send(n,"POST",u,i,15)})}Bo(e,n,i){const r=Kd(),s=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=kI(),a=bI(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,n,i),l.encodeInitMessageHeaders=!0;const h=s.join("");W(ft,`Creating RPC '${e}' stream ${r}: ${h}`,l);const d=o.createWebChannel(h,l);let f=!1,m=!1;const v=new aO({Io:E=>{m?W(ft,`Not sending because RPC '${e}' stream ${r} is closed:`,E):(f||(W(ft,`Opening RPC '${e}' stream ${r} transport.`),d.open(),f=!0),W(ft,`RPC '${e}' stream ${r} sending:`,E),d.send(E))},To:()=>d.close()}),w=(E,T,S)=>{E.listen(T,b=>{try{S(b)}catch(R){setTimeout(()=>{throw R},0)}})};return w(d,Zo.EventType.OPEN,()=>{m||(W(ft,`RPC '${e}' stream ${r} transport opened.`),v.yo())}),w(d,Zo.EventType.CLOSE,()=>{m||(m=!0,W(ft,`RPC '${e}' stream ${r} transport closed`),v.So())}),w(d,Zo.EventType.ERROR,E=>{m||(m=!0,Gs(ft,`RPC '${e}' stream ${r} transport errored:`,E),v.So(new G(j.UNAVAILABLE,"The operation could not be completed")))}),w(d,Zo.EventType.MESSAGE,E=>{var T;if(!m){const S=E.data[0];Ee(!!S);const b=S,R=b.error||((T=b[0])===null||T===void 0?void 0:T.error);if(R){W(ft,`RPC '${e}' stream ${r} received error:`,R);const M=R.status;let D=function(k){const C=$e[k];if(C!==void 0)return XI(C)}(M),I=R.message;D===void 0&&(D=j.INTERNAL,I="Unknown error status: "+M+" with message "+R.message),m=!0,v.So(new G(D,I)),d.close()}else W(ft,`RPC '${e}' stream ${r} received:`,S),v.bo(S)}}),w(a,xI.STAT_EVENT,E=>{E.stat===_p.PROXY?W(ft,`RPC '${e}' stream ${r} detected buffering proxy`):E.stat===_p.NOPROXY&&W(ft,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{v.wo()},0),v}}function Gd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(t){return new _2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(e,n,i=1e3,r=1.5,s=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=r,this.Qo=s,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),r=Math.max(0,n-i);r>0&&W("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,r,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,n,i,r,s,o,a,l){this.ui=e,this.Ho=i,this.Jo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ux(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(li(n.toString()),li("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Yo===n&&this.P_(i,r)},i=>{e(()=>{const r=new G(j.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(r)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(r=>{i(()=>this.I_(r))}),this.stream.onMessage(r=>{i(()=>++this.e_==1?this.E_(r):this.onNext(r))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uO extends cx{constructor(e,n,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=E2(this.serializer,e),i=function(s){if(!("targetChange"in s))return Z.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?Dn(o.readTime):Z.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=kp(this.serializer),n.addTarget=function(s,o){let a;const l=o.target;if(a=Tp(l)?{documents:I2(s,l)}:{query:x2(s,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ex(s,o.resumeToken);const u=Ip(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Z.min())>0){a.readTime=Vc(s,o.snapshotVersion.toTimestamp());const u=Ip(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const i=k2(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=kp(this.serializer),n.removeTarget=e,this.a_(n)}}class cO extends cx{constructor(e,n,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,r,o),this.serializer=s}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,Ee(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Ee(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=S2(e.writeResults,e.commitTime),i=Dn(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=kp(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>T2(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hO extends class{}{constructor(e,n,i,r){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=r,this.y_=!1}w_(){if(this.y_)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,r){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Mo(e,xp(n,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(j.UNKNOWN,s.toString())})}Lo(e,n,i,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,xp(n,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(j.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class dO{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(li(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n,i,r,s){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=s,this.k_._o(o=>{i.enqueueAndForget(async()=>{ts(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=ee(l);u.L_.add(4),await bl(u),u.q_.set("Unknown"),u.L_.delete(4),await Ph(u)}(this))})}),this.q_=new dO(i,r)}}async function Ph(t){if(ts(t))for(const e of t.B_)await e(!0)}async function bl(t){for(const e of t.B_)await e(!1)}function hx(t,e){const n=ee(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),_m(n)?ym(n):go(n).r_()&&mm(n,e))}function gm(t,e){const n=ee(t),i=go(n);n.N_.delete(e),i.r_()&&dx(n,e),n.N_.size===0&&(i.r_()?i.o_():ts(n)&&n.q_.set("Unknown"))}function mm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}go(t).A_(e)}function dx(t,e){t.Q_.xe(e),go(t).R_(e)}function ym(t){t.Q_=new p2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),go(t).start(),t.q_.v_()}function _m(t){return ts(t)&&!go(t).n_()&&t.N_.size>0}function ts(t){return ee(t).L_.size===0}function fx(t){t.Q_=void 0}async function pO(t){t.q_.set("Online")}async function gO(t){t.N_.forEach((e,n)=>{mm(t,e)})}async function mO(t,e){fx(t),_m(t)?(t.q_.M_(e),ym(t)):t.q_.set("Unknown")}async function yO(t,e,n){if(t.q_.set("Online"),e instanceof ZI&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.N_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.N_.delete(a),r.Q_.removeTarget(a))}(t,e)}catch(i){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Fc(t,i)}else if(e instanceof qu?t.Q_.Ke(e):e instanceof JI?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Z.min()))try{const i=await lx(t.localStore);n.compareTo(i)>=0&&await function(s,o){const a=s.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const h=s.N_.get(u);h&&s.N_.set(u,h.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const h=s.N_.get(l);if(!h)return;s.N_.set(l,h.withResumeToken(at.EMPTY_BYTE_STRING,h.snapshotVersion)),dx(s,l);const d=new Di(h.target,l,u,h.sequenceNumber);mm(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(i){W("RemoteStore","Failed to raise snapshot:",i),await Fc(t,i)}}async function Fc(t,e,n){if(!Sl(e))throw e;t.L_.add(1),await bl(t),t.q_.set("Offline"),n||(n=()=>lx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ph(t)})}function px(t,e){return e().catch(n=>Fc(t,n,e))}async function Rh(t){const e=ee(t),n=er(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;_O(e);)try{const r=await tO(e.localStore,i);if(r===null){e.O_.length===0&&n.o_();break}i=r.batchId,vO(e,r)}catch(r){await Fc(e,r)}gx(e)&&mx(e)}function _O(t){return ts(t)&&t.O_.length<10}function vO(t,e){t.O_.push(e);const n=er(t);n.r_()&&n.V_&&n.m_(e.mutations)}function gx(t){return ts(t)&&!er(t).n_()&&t.O_.length>0}function mx(t){er(t).start()}async function wO(t){er(t).p_()}async function EO(t){const e=er(t);for(const n of t.O_)e.m_(n.mutations)}async function TO(t,e,n){const i=t.O_.shift(),r=um.from(i,e,n);await px(t,()=>t.remoteSyncer.applySuccessfulWrite(r)),await Rh(t)}async function SO(t,e){e&&er(t).V_&&await async function(i,r){if(function(o){return h2(o)&&o!==j.ABORTED}(r.code)){const s=i.O_.shift();er(i).s_(),await px(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await Rh(i)}}(t,e),gx(t)&&mx(t)}async function y0(t,e){const n=ee(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const i=ts(n);n.L_.add(3),await bl(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ph(n)}async function IO(t,e){const n=ee(t);e?(n.L_.delete(2),await Ph(n)):e||(n.L_.add(2),await bl(n),n.q_.set("Unknown"))}function go(t){return t.K_||(t.K_=function(n,i,r){const s=ee(n);return s.w_(),new uO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:pO.bind(null,t),Ro:gO.bind(null,t),mo:mO.bind(null,t),d_:yO.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),_m(t)?ym(t):t.q_.set("Unknown")):(await t.K_.stop(),fx(t))})),t.K_}function er(t){return t.U_||(t.U_=function(n,i,r){const s=ee(n);return s.w_(),new cO(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:wO.bind(null,t),mo:SO.bind(null,t),f_:EO.bind(null,t),g_:TO.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Rh(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n,i,r,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,r,s){const o=Date.now()+i,a=new vm(e,n,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function wm(t,e){if(li("AsyncQueue",`${e}: ${t}`),Sl(t))return new G(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e){this.comparator=e?(n,i)=>e(n,i)||Q.comparator(n.key,i.key):(n,i)=>Q.comparator(n.key,i.key),this.keyedMap=ea(),this.sortedSet=new Le(this.comparator)}static emptySet(e){return new Vs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const r=n.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Vs;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.W_=new Le(Q.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Zs{constructor(e,n,i,r,s,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,i,r,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Zs(e,n,Vs.emptySet(n),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ih(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let r=0;r<n.length;r++)if(n[r].type!==i[r].type||!n[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xO{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class bO{constructor(){this.queries=v0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const r=ee(n),s=r.queries;r.queries=v0(),s.forEach((o,a)=>{for(const l of a.j_)l.onError(i)})})(this,new G(j.ABORTED,"Firestore shutting down"))}}function v0(){return new po(t=>jI(t),Ih)}async function kO(t,e){const n=ee(t);let i=3;const r=e.query;let s=n.queries.get(r);s?!s.H_()&&e.J_()&&(i=2):(s=new xO,i=e.J_()?0:1);try{switch(i){case 0:s.z_=await n.onListen(r,!0);break;case 1:s.z_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(o){const a=wm(o,`Initialization of query '${ds(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,s),s.j_.push(e),e.Z_(n.onlineState),s.z_&&e.X_(s.z_)&&Em(n)}async function CO(t,e){const n=ee(t),i=e.query;let r=3;const s=n.queries.get(i);if(s){const o=s.j_.indexOf(e);o>=0&&(s.j_.splice(o,1),s.j_.length===0?r=e.J_()?0:1:!s.H_()&&e.J_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function AO(t,e){const n=ee(t);let i=!1;for(const r of e){const s=r.query,o=n.queries.get(s);if(o){for(const a of o.j_)a.X_(r)&&(i=!0);o.z_=r}}i&&Em(n)}function PO(t,e,n){const i=ee(t),r=i.queries.get(e);if(r)for(const s of r.j_)s.onError(n);i.queries.delete(e)}function Em(t){t.Y_.forEach(e=>{e.next()})}var Ap,w0;(w0=Ap||(Ap={})).ea="default",w0.Cache="cache";class RO{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Zs(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Zs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Ap.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yx{constructor(e){this.key=e}}class _x{constructor(e){this.key=e}}class NO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=UI(e),this.Ra=new Vs(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new _0,r=n?n.Ra:this.Ra;let s=n?n.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{const f=r.get(h),m=xh(this.query,d)?d:null,v=!!f&&this.mutatedKeys.has(f.key),w=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let E=!1;f&&m?f.data.isEqual(m.data)?v!==w&&(i.track({type:3,doc:m}),E=!0):this.ga(f,m)||(i.track({type:2,doc:m}),E=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!f&&m?(i.track({type:0,doc:m}),E=!0):f&&!m&&(i.track({type:1,doc:f}),E=!0,(l||u)&&(a=!0)),E&&(m?(o=o.add(m),s=w?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Ra:o,fa:i,ns:a,mutatedKeys:s}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,r){const s=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(m,v){const w=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return w(m)-w(v)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(i),r=r!=null&&r;const a=n&&!r?this.ya():[],l=this.da.size===0&&this.current&&!r?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new Zs(this.query,e.Ra,s,o,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=se(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new _x(i))}),this.da.forEach(i=>{e.has(i)||n.push(new yx(i))}),n}ba(e){this.Ta=e.Ts,this.da=se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Zs.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class DO{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class MO{constructor(e){this.key=e,this.va=!1}}class OO{constructor(e,n,i,r,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new po(a=>jI(a),Ih),this.Ma=new Map,this.xa=new Set,this.Oa=new Le(Q.comparator),this.Na=new Map,this.La=new dm,this.Ba={},this.ka=new Map,this.qa=Js.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function LO(t,e,n=!0){const i=Ix(t);let r;const s=i.Fa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Da()):r=await vx(i,e,n,!0),r}async function VO(t,e){const n=Ix(t);await vx(n,e,!0,!1)}async function vx(t,e,n,i){const r=await nO(t.localStore,Nn(e)),s=r.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return i&&(a=await FO(t,e,s,o==="current",r.resumeToken)),t.isPrimaryClient&&n&&hx(t.remoteStore,r),a}async function FO(t,e,n,i,r){t.Ka=(d,f,m)=>async function(w,E,T,S){let b=E.view.ma(T);b.ns&&(b=await p0(w.localStore,E.query,!1).then(({documents:I})=>E.view.ma(I,b)));const R=S&&S.targetChanges.get(E.targetId),M=S&&S.targetMismatches.get(E.targetId)!=null,D=E.view.applyChanges(b,w.isPrimaryClient,R,M);return T0(w,E.targetId,D.wa),D.snapshot}(t,d,f,m);const s=await p0(t.localStore,e,!0),o=new NO(e,s.Ts),a=o.ma(s.documents),l=xl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",r),u=o.applyChanges(a,t.isPrimaryClient,l);T0(t,n,u.wa);const h=new DO(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),u.snapshot}async function jO(t,e,n){const i=ee(t),r=i.Fa.get(e),s=i.Ma.get(r.targetId);if(s.length>1)return i.Ma.set(r.targetId,s.filter(o=>!Ih(o,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Cp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),n&&gm(i.remoteStore,r.targetId),Pp(i,r.targetId)}).catch(Tl)):(Pp(i,r.targetId),await Cp(i.localStore,r.targetId,!0))}async function UO(t,e){const n=ee(t),i=n.Fa.get(e),r=n.Ma.get(i.targetId);n.isPrimaryClient&&r.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),gm(n.remoteStore,i.targetId))}async function BO(t,e,n){const i=GO(t);try{const r=await function(o,a){const l=ee(o),u=Ge.now(),h=a.reduce((m,v)=>m.add(v.key),se());let d,f;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=ui(),w=se();return l.cs.getEntries(m,h).next(E=>{v=E,v.forEach((T,S)=>{S.isValidDocument()||(w=w.add(T))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,v)).next(E=>{d=E;const T=[];for(const S of a){const b=o2(S,d.get(S.key).overlayedDocument);b!=null&&T.push(new lr(S.key,b,NI(b.value.mapValue),pn.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,T,a)}).next(E=>{f=E;const T=E.applyToLocalDocumentSet(d,w);return l.documentOverlayCache.saveOverlays(m,E.batchId,T)})}).then(()=>({batchId:f.batchId,changes:zI(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Le(ge)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(i,r.batchId,n),await kl(i,r.changes),await Rh(i.remoteStore)}catch(r){const s=wm(r,"Failed to persist write");n.reject(s)}}async function wx(t,e){const n=ee(t);try{const i=await Z2(n.localStore,e);e.targetChanges.forEach((r,s)=>{const o=n.Na.get(s);o&&(Ee(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.va=!0:r.modifiedDocuments.size>0?Ee(o.va):r.removedDocuments.size>0&&(Ee(o.va),o.va=!1))}),await kl(n,i,e)}catch(i){await Tl(i)}}function E0(t,e,n){const i=ee(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const r=[];i.Fa.forEach((s,o)=>{const a=o.view.Z_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=ee(o);l.onlineState=a;let u=!1;l.queries.forEach((h,d)=>{for(const f of d.j_)f.Z_(a)&&(u=!0)}),u&&Em(l)}(i.eventManager,e),r.length&&i.Ca.d_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function zO(t,e,n){const i=ee(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Na.get(e),s=r&&r.key;if(s){let o=new Le(Q.comparator);o=o.insert(s,mt.newNoDocument(s,Z.min()));const a=se().add(s),l=new Ch(Z.min(),new Map,new Le(ge),o,a);await wx(i,l),i.Oa=i.Oa.remove(s),i.Na.delete(e),Tm(i)}else await Cp(i.localStore,e,!1).then(()=>Pp(i,e,n)).catch(Tl)}async function $O(t,e){const n=ee(t),i=e.batch.batchId;try{const r=await J2(n.localStore,e);Tx(n,i,null),Ex(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await kl(n,r)}catch(r){await Tl(r)}}async function WO(t,e,n){const i=ee(t);try{const r=await function(o,a){const l=ee(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return l.mutationQueue.lookupMutationBatch(u,a).next(d=>(Ee(d!==null),h=d.keys(),l.mutationQueue.removeMutationBatch(u,d))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>l.localDocuments.getDocuments(u,h))})}(i.localStore,e);Tx(i,e,n),Ex(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await kl(i,r)}catch(r){await Tl(r)}}function Ex(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function Tx(t,e,n){const i=ee(t);let r=i.Ba[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(n?s.reject(n):s.resolve(),r=r.remove(e)),i.Ba[i.currentUser.toKey()]=r}}function Pp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||Sx(t,i)})}function Sx(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(gm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Tm(t))}function T0(t,e,n){for(const i of n)i instanceof yx?(t.La.addReference(i.key,e),HO(t,i)):i instanceof _x?(W("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||Sx(t,i.key)):J()}function HO(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(i),Tm(t))}function Tm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Q(Re.fromString(e)),i=t.qa.next();t.Na.set(i,new MO(n)),t.Oa=t.Oa.insert(n,i),hx(t.remoteStore,new Di(Nn(om(n.path)),i,"TargetPurposeLimboResolution",em.oe))}}async function kl(t,e,n){const i=ee(t),r=[],s=[],o=[];i.Fa.isEmpty()||(i.Fa.forEach((a,l)=>{o.push(i.Ka(l,e,n).then(u=>{var h;if((u||n)&&i.isPrimaryClient){const d=u?!u.fromCache:(h=n==null?void 0:n.targetChanges.get(l.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(u){r.push(u);const d=pm.Wi(l.targetId,u);s.push(d)}}))}),await Promise.all(o),i.Ca.d_(r),await async function(l,u){const h=ee(l);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>F.forEach(u,f=>F.forEach(f.$i,m=>h.persistence.referenceDelegate.addReference(d,f.targetId,m)).next(()=>F.forEach(f.Ui,m=>h.persistence.referenceDelegate.removeReference(d,f.targetId,m)))))}catch(d){if(!Sl(d))throw d;W("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const f=d.targetId;if(!d.fromCache){const m=h.os.get(f),v=m.snapshotVersion,w=m.withLastLimboFreeSnapshotVersion(v);h.os=h.os.insert(f,w)}}}(i.localStore,s))}async function qO(t,e){const n=ee(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const i=await ax(n.localStore,e);n.currentUser=e,function(s,o){s.ka.forEach(a=>{a.forEach(l=>{l.reject(new G(j.CANCELLED,o))})}),s.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await kl(n,i.hs)}}function KO(t,e){const n=ee(t),i=n.Na.get(e);if(i&&i.va)return se().add(i.key);{let r=se();const s=n.Ma.get(e);if(!s)return r;for(const o of s){const a=n.Fa.get(o);r=r.unionWith(a.view.Va)}return r}}function Ix(t){const e=ee(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=wx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=KO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zO.bind(null,e),e.Ca.d_=AO.bind(null,e.eventManager),e.Ca.$a=PO.bind(null,e.eventManager),e}function GO(t){const e=ee(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$O.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=WO.bind(null,e),e}class jc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ah(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return X2(this.persistence,new Q2,e.initialUser,this.serializer)}Ga(e){return new q2(fm.Zr,this.serializer)}Wa(e){return new rO}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}jc.provider={build:()=>new jc};class Rp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>E0(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=qO.bind(null,this.syncEngine),await IO(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bO}()}createDatastore(e){const n=Ah(e.databaseInfo.databaseId),i=function(s){return new lO(s)}(e.databaseInfo);return function(s,o,a,l){return new hO(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,r,s,o,a){return new fO(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>E0(this.syncEngine,n,0),function(){return m0.D()?new m0:new sO}())}createSyncEngine(e,n){return function(r,s,o,a,l,u,h){const d=new OO(r,s,o,a,l,u);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(r){const s=ee(r);W("RemoteStore","RemoteStore shutting down."),s.L_.add(5),await bl(s),s.k_.shutdown(),s.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Rp.provider={build:()=>new Rp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):li("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YO{constructor(e,n,i,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=r,this.user=pt.UNAUTHENTICATED,this.clientId=AI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=wm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Qd(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async r=>{i.isEqual(r)||(await ax(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function S0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await XO(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>y0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,r)=>y0(e.remoteStore,r)),t._onlineComponents=e}async function XO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await Qd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(r){return r.name==="FirebaseError"?r.code===j.FAILED_PRECONDITION||r.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(n))throw n;Gs("Error using user provided cache. Falling back to memory cache: "+n),await Qd(t,new jc)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await Qd(t,new jc);return t._offlineComponents}async function xx(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await S0(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await S0(t,new Rp))),t._onlineComponents}function JO(t){return xx(t).then(e=>e.syncEngine)}async function I0(t){const e=await xx(t),n=e.eventManager;return n.onListen=LO.bind(null,e.syncEngine),n.onUnlisten=jO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=VO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=UO.bind(null,e.syncEngine),n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kx(t,e,n){if(!n)throw new G(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function ZO(t,e,n,i){if(e===!0&&i===!0)throw new G(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function b0(t){if(!Q.isDocumentKey(t))throw new G(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function k0(t){if(Q.isDocumentKey(t))throw new G(j.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Sm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function ti(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Sm(t);throw new G(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new G(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ZO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bx((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(j.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Nh{constructor(e,n,i,r){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C0(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new fM;switch(i.type){case"firstParty":return new yM(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new G(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=x0.get(n);i&&(W("ComponentProvider","Removing Datastore"),x0.delete(n),i.terminate())}(this),Promise.resolve()}}function eL(t,e,n,i={}){var r;const s=(t=ti(t,Nh))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Gs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=pt.MOCK_USER;else{a=EP(i.mockUserToken,(r=t._app)===null||r===void 0?void 0:r.options.projectId);const u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new G(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new pt(u)}t._authCredentials=new pM(new CI(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Dh(this.firestore,e,this._query)}}class Vt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vt(this.firestore,e,this._key)}}class Gi extends Dh{constructor(e,n,i){super(e,n,om(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new Q(e))}withConverter(e){return new Gi(this.firestore,e,this._path)}}function tL(t,e,...n){if(t=ze(t),kx("collection","path",e),t instanceof Nh){const i=Re.fromString(e,...n);return k0(i),new Gi(t,null,i)}{if(!(t instanceof Vt||t instanceof Gi))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Re.fromString(e,...n));return k0(i),new Gi(t.firestore,null,i)}}function rl(t,e,...n){if(t=ze(t),arguments.length===1&&(e=AI.newId()),kx("doc","path",e),t instanceof Nh){const i=Re.fromString(e,...n);return b0(i),new Vt(t,null,new Q(i))}{if(!(t instanceof Vt||t instanceof Gi))throw new G(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Re.fromString(e,...n));return b0(i),new Vt(t.firestore,t instanceof Gi?t.converter:null,new Q(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ux(this,"async_queue_retry"),this.Vu=()=>{const i=Gd();i&&W("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Gd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Gd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Mr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Sl(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw li("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const r=vm.createAndSchedule(this,e,n,i,s=>this.yu(s));return this.Tu.push(r),r}fu(){this.Eu&&J()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function P0(t){return function(n,i){if(typeof n!="object"||n===null)return!1;const r=n;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class eo extends Nh{constructor(e,n,i,r){super(e,n,i,r),this.type="firestore",this._queue=new A0,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new A0(e),this._firestoreClient=void 0,await e}}}function nL(t,e){const n=typeof t=="object"?t:FS(),i=typeof t=="string"?t:"(default)",r=yl(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=vP("firestore");s&&eL(r,...s)}return r}function Cx(t){if(t._terminated)throw new G(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||iL(t),t._firestoreClient}function iL(t){var e,n,i;const r=t._freezeSettings(),s=function(a,l,u,h){return new PM(a,l,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,bx(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,r);t._componentsProvider||!((n=r.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),t._firestoreClient=new YO(t._authCredentials,t._appCheckCredentials,t._queue,s,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this._byteString=e}static fromBase64String(e){try{return new to(at.fromBase64String(e))}catch(n){throw new G(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new to(at.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oh{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=/^__.*__$/;class sL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Il(e,this.data,n,this.fieldTransforms)}}class Ax{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new lr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Px(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}class bm{constructor(e,n,i,r,s,o){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.vu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new bm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.Ou(e),r}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),r=this.Fu({path:i,xu:!1});return r.vu(),r}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Uc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Px(this.Cu)&&rL.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class oL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Ah(e)}Qu(e,n,i,r=!1){return new bm({Cu:e,methodName:n,qu:i,path:nt.emptyPath(),xu:!1,ku:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rx(t){const e=t._freezeSettings(),n=Ah(t._databaseId);return new oL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function aL(t,e,n,i,r,s={}){const o=t.Qu(s.merge||s.mergeFields?2:0,e,n,r);Cm("Data must be an object, but it was:",o,i);const a=Nx(i,o);let l,u;if(s.merge)l=new $t(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const d of s.mergeFields){const f=Np(e,d,n);if(!o.contains(f))throw new G(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);Mx(h,f)||h.push(f)}l=new $t(h),u=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,u=o.fieldTransforms;return new sL(new Pt(a),l,u)}class Lh extends Oh{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lh}}class km extends Oh{_toFieldTransform(e){return new n2(e.path,new tl)}isEqual(e){return e instanceof km}}function lL(t,e,n,i){const r=t.Qu(1,e,n);Cm("Data must be an object, but it was:",r,i);const s=[],o=Pt.empty();es(i,(l,u)=>{const h=Am(e,l,n);u=ze(u);const d=r.Nu(h);if(u instanceof Lh)s.push(h);else{const f=Vh(u,d);f!=null&&(s.push(h),o.set(h,f))}});const a=new $t(s);return new Ax(o,a,r.fieldTransforms)}function uL(t,e,n,i,r,s){const o=t.Qu(1,e,n),a=[Np(e,i,n)],l=[r];if(s.length%2!=0)throw new G(j.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<s.length;f+=2)a.push(Np(e,s[f])),l.push(s[f+1]);const u=[],h=Pt.empty();for(let f=a.length-1;f>=0;--f)if(!Mx(u,a[f])){const m=a[f];let v=l[f];v=ze(v);const w=o.Nu(m);if(v instanceof Lh)u.push(m);else{const E=Vh(v,w);E!=null&&(u.push(m),h.set(m,E))}}const d=new $t(u);return new Ax(h,d,o.fieldTransforms)}function Vh(t,e){if(Dx(t=ze(t)))return Cm("Unsupported field value:",e,t),Nx(t,e);if(t instanceof Oh)return function(i,r){if(!Px(r.Cu))throw r.Bu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Bu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Vh(a,r.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(t,e)}return function(i,r){if((i=ze(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return ZM(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Ge.fromDate(i);return{timestampValue:Vc(r.serializer,s)}}if(i instanceof Ge){const s=new Ge(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Vc(r.serializer,s)}}if(i instanceof Im)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof to)return{bytesValue:ex(r.serializer,i._byteString)};if(i instanceof Vt){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:hm(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof xm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return am(a.serializer,l)})}}}}}}(i,r);throw r.Bu(`Unsupported field value: ${Sm(i)}`)}(t,e)}function Nx(t,e){const n={};return PI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):es(t,(i,r)=>{const s=Vh(r,e.Mu(i));s!=null&&(n[i]=s)}),{mapValue:{fields:n}}}function Dx(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ge||t instanceof Im||t instanceof to||t instanceof Vt||t instanceof Oh||t instanceof xm)}function Cm(t,e,n){if(!Dx(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const i=Sm(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function Np(t,e,n){if((e=ze(e))instanceof Mh)return e._internalPath;if(typeof e=="string")return Am(t,e);throw Uc("Field path arguments must be of type string or ",t,!1,void 0,n)}const cL=new RegExp("[~\\*/\\[\\]]");function Am(t,e,n){if(e.search(cL)>=0)throw Uc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Mh(...e.split("."))._internalPath}catch{throw Uc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Uc(t,e,n,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new G(j.INVALID_ARGUMENT,a+t+l)}function Mx(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,n,i,r,s){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new hL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Lx("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class hL extends Ox{data(){return super.data()}}function Lx(t,e){return typeof e=="string"?Am(t,e):e instanceof Mh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fL{convertValue(e,n="none"){switch(Hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Wr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return es(e,(r,s)=>{i[r]=this.convertValue(s,n)}),i}convertVectorValue(e){var n,i,r;const s=(r=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>je(o.doubleValue));return new xm(s)}convertGeoPoint(e){return new Im(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=nm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Ja(e));default:return null}}convertTimestamp(e){const n=Zi(e);return new Ge(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Re.fromString(e);Ee(ox(i));const r=new Za(i.get(1),i.get(3)),s=new Q(i.popFirst(5));return r.isEqual(n)||li(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Vx extends Ox{constructor(e,n,i,r,s,o){super(e,n,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ku(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Lx("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class Ku extends Vx{data(e={}){return super.data(e)}}class gL{constructor(e,n,i,r){this._firestore=e,this._userDataWriter=n,this._snapshot=r,this.metadata=new na(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new Ku(this._firestore,this._userDataWriter,i.key,i,new na(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new Ku(r._firestore,r._userDataWriter,a.doc.key,a.doc,new na(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Ku(r._firestore,r._userDataWriter,a.doc.key,a.doc,new na(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:mL(a.type),doc:l,oldIndex:u,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function mL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}class Fx extends fL{constructor(e){super(),this.firestore=e}convertBytes(e){return new to(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,n)}}function jx(t,e,n){t=ti(t,Vt);const i=ti(t.firestore,eo),r=pL(t.converter,e,n);return Pm(i,[aL(Rx(i),"setDoc",t._key,r,t.converter!==null,n).toMutation(t._key,pn.none())])}function Ux(t,e,n,...i){t=ti(t,Vt);const r=ti(t.firestore,eo),s=Rx(r);let o;return o=typeof(e=ze(e))=="string"||e instanceof Mh?uL(s,"updateDoc",t._key,e,n,i):lL(s,"updateDoc",t._key,e),Pm(r,[o.toMutation(t._key,pn.exists(!0))])}function yL(t){return Pm(ti(t.firestore,eo),[new lm(t._key,pn.none())])}function Bx(t,...e){var n,i,r;t=ze(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||P0(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(P0(e[o])){const d=e[o];e[o]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[o+1]=(i=d.error)===null||i===void 0?void 0:i.bind(d),e[o+2]=(r=d.complete)===null||r===void 0?void 0:r.bind(d)}let l,u,h;if(t instanceof Vt)u=ti(t.firestore,eo),h=om(t._key.path),l={next:d=>{e[o]&&e[o](_L(u,t,d))},error:e[o+1],complete:e[o+2]};else{const d=ti(t,Dh);u=ti(d.firestore,eo),h=d._query;const f=new Fx(u);l={next:m=>{e[o]&&e[o](new gL(u,f,d,m))},error:e[o+1],complete:e[o+2]},dL(t._query)}return function(f,m,v,w){const E=new QO(w),T=new RO(m,E,v);return f.asyncQueue.enqueueAndForget(async()=>kO(await I0(f),T)),()=>{E.Za(),f.asyncQueue.enqueueAndForget(async()=>CO(await I0(f),T))}}(Cx(u),h,a,l)}function Pm(t,e){return function(i,r){const s=new Mr;return i.asyncQueue.enqueueAndForget(async()=>BO(await JO(i),r,s)),s.promise}(Cx(t),e)}function _L(t,e,n){const i=n.docs.get(e._key),r=new Fx(t);return new Vx(t,r,e._key,i,new na(n.hasPendingWrites,n.fromCache),e.converter)}function Rm(){return new km("serverTimestamp")}(function(e,n=!0){(function(r){fo=r})(ho),On(new mn("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new eo(new gM(i.getProvider("auth-internal")),new vM(i.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new G(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Za(u.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),en(Kv,"4.7.3",e),en(Kv,"4.7.3","esm2017")})();const zx="@firebase/installations",Nm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $x=1e4,Wx=`w:${Nm}`,Hx="FIS_v2",vL="https://firebaseinstallations.googleapis.com/v1",wL=60*60*1e3,EL="installations",TL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},qr=new Jr(EL,TL,SL);function qx(t){return t instanceof vn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx({projectId:t}){return`${vL}/projects/${t}/installations`}function Gx(t){return{token:t.token,requestStatus:2,expiresIn:xL(t.expiresIn),creationTime:Date.now()}}async function Qx(t,e){const i=(await e.json()).error;return qr.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Yx({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function IL(t,{refreshToken:e}){const n=Yx(t);return n.append("Authorization",bL(e)),n}async function Xx(t){const e=await t();return e.status>=500&&e.status<600?t():e}function xL(t){return Number(t.replace("s","000"))}function bL(t){return`${Hx} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kL({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=Kx(t),r=Yx(t),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={fid:n,authVersion:Hx,appId:t.appId,sdkVersion:Wx},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await Xx(()=>fetch(i,a));if(l.ok){const u=await l.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:Gx(u.authToken)}}else throw await Qx("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jx(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CL(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AL=/^[cdef][\w-]{21}$/,Dp="";function PL(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=RL(t);return AL.test(n)?n:Dp}catch{return Dp}}function RL(t){return CL(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fh(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zx=new Map;function eb(t,e){const n=Fh(t);tb(n,e),NL(n,e)}function tb(t,e){const n=Zx.get(t);if(n)for(const i of n)i(e)}function NL(t,e){const n=DL();n&&n.postMessage({key:t,fid:e}),ML()}let Cr=null;function DL(){return!Cr&&"BroadcastChannel"in self&&(Cr=new BroadcastChannel("[Firebase] FID Change"),Cr.onmessage=t=>{tb(t.data.key,t.data.fid)}),Cr}function ML(){Zx.size===0&&Cr&&(Cr.close(),Cr=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL="firebase-installations-database",LL=1,Kr="firebase-installations-store";let Yd=null;function Dm(){return Yd||(Yd=LS(OL,LL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Kr)}}})),Yd}async function Bc(t,e){const n=Fh(t),r=(await Dm()).transaction(Kr,"readwrite"),s=r.objectStore(Kr),o=await s.get(n);return await s.put(e,n),await r.done,(!o||o.fid!==e.fid)&&eb(t,e.fid),e}async function nb(t){const e=Fh(t),i=(await Dm()).transaction(Kr,"readwrite");await i.objectStore(Kr).delete(e),await i.done}async function jh(t,e){const n=Fh(t),r=(await Dm()).transaction(Kr,"readwrite"),s=r.objectStore(Kr),o=await s.get(n),a=e(o);return a===void 0?await s.delete(n):await s.put(a,n),await r.done,a&&(!o||o.fid!==a.fid)&&eb(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mm(t){let e;const n=await jh(t.appConfig,i=>{const r=VL(i),s=FL(t,r);return e=s.registrationPromise,s.installationEntry});return n.fid===Dp?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function VL(t){const e=t||{fid:PL(),registrationStatus:0};return ib(e)}function FL(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(qr.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=jL(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:UL(t)}:{installationEntry:e}}async function jL(t,e){try{const n=await kL(t,e);return Bc(t.appConfig,n)}catch(n){throw qx(n)&&n.customData.serverCode===409?await nb(t.appConfig):await Bc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function UL(t){let e=await R0(t.appConfig);for(;e.registrationStatus===1;)await Jx(100),e=await R0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Mm(t);return i||n}return e}function R0(t){return jh(t,e=>{if(!e)throw qr.create("installation-not-found");return ib(e)})}function ib(t){return BL(t)?{fid:t.fid,registrationStatus:0}:t}function BL(t){return t.registrationStatus===1&&t.registrationTime+$x<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zL({appConfig:t,heartbeatServiceProvider:e},n){const i=$L(t,n),r=IL(t,n),s=e.getImmediate({optional:!0});if(s){const u=await s.getHeartbeatsHeader();u&&r.append("x-firebase-client",u)}const o={installation:{sdkVersion:Wx,appId:t.appId}},a={method:"POST",headers:r,body:JSON.stringify(o)},l=await Xx(()=>fetch(i,a));if(l.ok){const u=await l.json();return Gx(u)}else throw await Qx("Generate Auth Token",l)}function $L(t,{fid:e}){return`${Kx(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Om(t,e=!1){let n;const i=await jh(t.appConfig,s=>{if(!rb(s))throw qr.create("not-registered");const o=s.authToken;if(!e&&qL(o))return s;if(o.requestStatus===1)return n=WL(t,e),s;{if(!navigator.onLine)throw qr.create("app-offline");const a=GL(s);return n=HL(t,a),a}});return n?await n:i.authToken}async function WL(t,e){let n=await N0(t.appConfig);for(;n.authToken.requestStatus===1;)await Jx(100),n=await N0(t.appConfig);const i=n.authToken;return i.requestStatus===0?Om(t,e):i}function N0(t){return jh(t,e=>{if(!rb(e))throw qr.create("not-registered");const n=e.authToken;return QL(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function HL(t,e){try{const n=await zL(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await Bc(t.appConfig,i),n}catch(n){if(qx(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await nb(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Bc(t.appConfig,i)}throw n}}function rb(t){return t!==void 0&&t.registrationStatus===2}function qL(t){return t.requestStatus===2&&!KL(t)}function KL(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+wL}function GL(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function QL(t){return t.requestStatus===1&&t.requestTime+$x<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YL(t){const e=t,{installationEntry:n,registrationPromise:i}=await Mm(e);return i?i.catch(console.error):Om(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XL(t,e=!1){const n=t;return await JL(n),(await Om(n,e)).token}async function JL(t){const{registrationPromise:e}=await Mm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZL(t){if(!t||!t.options)throw Xd("App Configuration");if(!t.name)throw Xd("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Xd(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Xd(t){return qr.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="installations",eV="installations-internal",tV=t=>{const e=t.getProvider("app").getImmediate(),n=ZL(e),i=yl(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},nV=t=>{const e=t.getProvider("app").getImmediate(),n=yl(e,sb).getImmediate();return{getId:()=>YL(n),getToken:r=>XL(n,r)}};function iV(){On(new mn(sb,tV,"PUBLIC")),On(new mn(eV,nV,"PRIVATE"))}iV();en(zx,Nm);en(zx,Nm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D0="analytics",rV="firebase_id",sV="origin",oV=60*1e3,aV="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Lm="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ft=new _h("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lV={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},tn=new Jr("analytics","Analytics",lV);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(t){if(!t.startsWith(Lm)){const e=tn.create("invalid-gtag-resource",{gtagURL:t});return Ft.warn(e.message),""}return t}function ob(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function cV(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function hV(t,e){const n=cV("firebase-js-sdk-policy",{createScriptURL:uV}),i=document.createElement("script"),r=`${Lm}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function dV(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function fV(t,e,n,i,r,s){const o=i[r];try{if(o)await e[o];else{const l=(await ob(n)).find(u=>u.measurementId===r);l&&await e[l.appId]}}catch(a){Ft.error(a)}t("config",r,s)}async function pV(t,e,n,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const a=await ob(n);for(const l of o){const u=a.find(d=>d.measurementId===l),h=u&&e[u.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),await Promise.all(s),t("event",i,r||{})}catch(s){Ft.error(s)}}function gV(t,e,n,i){async function r(s,...o){try{if(s==="event"){const[a,l]=o;await pV(t,e,n,a,l)}else if(s==="config"){const[a,l]=o;await fV(t,e,n,i,a,l)}else if(s==="consent"){const[a,l]=o;t("consent",a,l)}else if(s==="get"){const[a,l,u]=o;t("get",a,l,u)}else if(s==="set"){const[a]=o;t("set",a)}else t(s,...o)}catch(a){Ft.error(a)}}return r}function mV(t,e,n,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=gV(s,t,e,n),{gtagCore:s,wrappedGtag:window[r]}}function yV(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Lm)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=30,vV=1e3;class wV{constructor(e={},n=vV){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const ab=new wV;function EV(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function TV(t){var e;const{appId:n,apiKey:i}=t,r={method:"GET",headers:EV(i)},s=aV.replace("{app-id}",n),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw tn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function SV(t,e=ab,n){const{appId:i,apiKey:r,measurementId:s}=t.options;if(!i)throw tn.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw tn.create("no-api-key")}const o=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new bV;return setTimeout(async()=>{a.abort()},oV),lb({appId:i,apiKey:r,measurementId:s},o,a,e)}async function lb(t,{throttleEndTimeMillis:e,backoffCount:n},i,r=ab){var s;const{appId:o,measurementId:a}=t;try{await IV(i,e)}catch(l){if(a)return Ft.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await TV(t);return r.deleteThrottleMetadata(o),l}catch(l){const u=l;if(!xV(u)){if(r.deleteThrottleMetadata(o),a)return Ft.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${u==null?void 0:u.message}]`),{appId:o,measurementId:a};throw l}const h=Number((s=u==null?void 0:u.customData)===null||s===void 0?void 0:s.httpStatus)===503?_v(n,r.intervalMillis,_V):_v(n,r.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return r.setThrottleMetadata(o,d),Ft.debug(`Calling attemptFetch again in ${h} millis`),lb(t,d,i,r)}}function IV(t,e){return new Promise((n,i)=>{const r=Math.max(e-Date.now(),0),s=setTimeout(n,r);t.addEventListener(()=>{clearTimeout(s),i(tn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function xV(t){if(!(t instanceof vn)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class bV{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function kV(t,e,n,i,r){if(r&&r.global){t("event",n,i);return}else{const s=await e,o=Object.assign(Object.assign({},i),{send_to:s});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CV(){if(NS())try{await DS()}catch(t){return Ft.warn(tn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return Ft.warn(tn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function AV(t,e,n,i,r,s,o){var a;const l=SV(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Ft.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Ft.error(m)),e.push(l);const u=CV().then(m=>{if(m)return i.getId()}),[h,d]=await Promise.all([l,u]);yV(s)||hV(s,h.measurementId),r("js",new Date);const f=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return f[sV]="firebase",f.update=!0,d!=null&&(f[rV]=d),r("config",h.measurementId,f),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e){this.app=e}_delete(){return delete Ta[this.app.options.appId],Promise.resolve()}}let Ta={},M0=[];const O0={};let Jd="dataLayer",RV="gtag",L0,ub,V0=!1;function NV(){const t=[];if(RS()&&t.push("This is a browser extension environment."),CP()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=tn.create("invalid-analytics-context",{errorInfo:e});Ft.warn(n.message)}}function DV(t,e,n){NV();const i=t.options.appId;if(!i)throw tn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Ft.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw tn.create("no-api-key");if(Ta[i]!=null)throw tn.create("already-exists",{id:i});if(!V0){dV(Jd);const{wrappedGtag:s,gtagCore:o}=mV(Ta,M0,O0,Jd,RV);ub=s,L0=o,V0=!0}return Ta[i]=AV(t,M0,O0,e,L0,Jd,n),new PV(t)}function MV(t,e,n,i){t=ze(t),kV(ub,Ta[t.app.options.appId],e,n,i).catch(r=>Ft.error(r))}const F0="@firebase/analytics",j0="0.10.8";function OV(){On(new mn(D0,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return DV(i,r,n)},"PUBLIC")),On(new mn("analytics-internal",t,"PRIVATE")),en(F0,j0),en(F0,j0,"esm2017");function t(e){try{const n=e.getProvider(D0).getImmediate();return{logEvent:(i,r,s)=>MV(n,i,r,s)}}catch(n){throw tn.create("interop-component-reg-failed",{reason:n})}}}OV();const LV={apiKey:"AIzaSyDtWe5NbdrjDIW1MOHApJ5i2k7_pBJEaeA",authDomain:"body-recomposition-tracker.firebaseapp.com",projectId:"body-recomposition-tracker",storageBucket:"body-recomposition-tracker.firebasestorage.app",messagingSenderId:"733446074102",appId:"1:733446074102:web:bdf0cc2e1b962ce7d506d7",measurementId:"G-EQ7E5CY3B0"},cb=VS(LV),Uo=uM(cb),no=nL(cb),hb=O.createContext(null);function VV({children:t}){const[e,n]=O.useState(null),[i,r]=O.useState(!0),[s,o]=O.useState(null);O.useEffect(()=>{const l=XN(Uo,u=>{n(u),r(!1)});return()=>l()},[]);const a=O.useMemo(()=>({user:e,initializing:i,authError:s,clearAuthError:()=>o(null),async signup(l,u){o(null);try{return(await HN(Uo,l,u)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to sign up."),h}},async login(l,u){o(null);try{return(await qN(Uo,l,u)).user}catch(h){throw o((h==null?void 0:h.message)||"Failed to log in."),h}},async logout(){await JN(Uo)},async resetPassword(l){o(null);try{await WN(Uo,l)}catch(u){throw o((u==null?void 0:u.message)||"Failed to send reset email."),u}}}),[e,i,s]);return y.jsx(hb.Provider,{value:a,children:t})}function fi(){return O.useContext(hb)}function FV(){const{user:t,logout:e}=fi(),n=gl();async function i(){await e(),n("/dashboard")}return y.jsx("div",{className:"nav",children:y.jsxs("div",{className:"nav-inner",children:[y.jsxs("div",{className:"brand",children:[y.jsx("div",{className:"badge"}),y.jsxs("div",{children:[y.jsx("h1",{children:"Body Recomposition Tracker"}),y.jsx("div",{className:"small",children:"Trend-first logging: weight , strength /"})]})]}),y.jsxs("div",{className:"nav-links",children:[y.jsxs("div",{className:"nav-tabs",children:[y.jsx(us,{to:"/dashboard",className:({isActive:r})=>r?"active":"",children:"Dashboard"}),y.jsx(us,{to:"/insights",className:({isActive:r})=>r?"active":"",children:"Insights"})]}),t&&y.jsx(us,{to:"/entry",className:({isActive:r})=>r?"active":"",children:"Entry"}),t&&y.jsx(us,{to:"/profile",className:({isActive:r})=>r?"active":"",children:"Profile"})]}),y.jsx("div",{className:"nav-actions",children:t?y.jsx("button",{className:"btn danger",onClick:i,children:"Log out"}):y.jsxs(y.Fragment,{children:[y.jsx(us,{to:"/login",className:"btn",children:"Log in"}),y.jsx(us,{to:"/signup",className:"btn primary",children:"Sign up"})]})})]})})}function U0({children:t}){const{user:e,initializing:n}=fi();return n?y.jsx("div",{className:"panel",children:y.jsx("div",{className:"muted",children:"Loading"})}):e?t:y.jsx(ap,{to:"/login",replace:!0})}const db=O.createContext(null),B0={email:"",sex:"",height:"",targetWeight:"",triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],createdAt:null};function jV({children:t}){const{user:e}=fi(),[n,i]=O.useState(B0),[r,s]=O.useState(!1),[o,a]=O.useState(null);O.useEffect(()=>{if(i(B0),a(null),!e)return;const u=rl(no,"users",e.uid);s(!0);const h=Bx(u,async d=>{if(!d.exists()){await jx(u,{email:e.email||"",sex:"",height:"",targetWeight:null,triplemeasurements:!1,liftNames:["Bench Press","Squat","Deadlift"],createdAt:Rm()});return}const f=d.data();i({email:f.email||e.email||"",sex:f.sex||"",height:f.height||"",targetWeight:f.targetWeight??"",triplemeasurements:!!f.triplemeasurements,liftNames:Array.isArray(f.liftNames)&&f.liftNames.length===3?f.liftNames:["Bench Press","Squat","Deadlift"],createdAt:f.createdAt||null}),s(!1)},d=>{a((d==null?void 0:d.message)||"Failed to load profile."),s(!1)});return()=>h()},[e]);const l=O.useMemo(()=>({profile:n,loading:r,profileError:o,async updateProfile(u){if(!e)throw new Error("Not authenticated");a(null);const h=rl(no,"users",e.uid);await Ux(h,u)}}),[n,r,o,e]);return y.jsx(db.Provider,{value:l,children:t})}function Vm(){return O.useContext(db)}function fb(t){const e=t.getFullYear(),n=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0");return`${e}-${n}-${i}`}function Mp(t){const[e,n,i]=t.split("-").map(Number);return new Date(e,n-1,i,12,0,0)}function UV(){return fb(new Date)}function BV(t,e){return t.dateIso.localeCompare(e.dateIso)}function Fm(t,e,n){const i=tL(no,"users",t,"entries");return Bx(i,r=>{const s=[];r.forEach(a=>{const l=a.data();s.push({id:a.id,...l})});const o=s.map(a=>({...a,dateIso:a.dateIso||a.id})).sort(BV);e(o)},n)}async function zV(t,e){const n=e.dateIso;if(!n)throw new Error("dateIso is required");const i=rl(no,"users",t,"entries",n),r=Mp(n),s={...e,dateIso:n,date:e.date||r,updatedAt:Rm()};await jx(i,s,{merge:!0})}async function $V(t,e,n){const i=rl(no,"users",t,"entries",e);await Ux(i,{...n,updatedAt:Rm()})}async function WV(t,e){const n=rl(no,"users",t,"entries",e);await yL(n)}const HV=2/8;function pb({protein:t,carbs:e,fats:n}){const i=Number(t??0),r=Number(e??0),s=Number(n??0);return i*4+r*4+s*9}function qV({bench:t,squat:e,deadlift:n}){const i=[t,e,n].map(r=>Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function cs(t,e=HV){const n=[];let i=null;for(const r of t){if(!Number.isFinite(r)){n.push(i);continue}if(i===null){i=r,n.push(r);continue}const s=e*r+(1-e)*i;i=s,n.push(s)}return n}function KV(t,e,n){const i=[t,e,n].map(r=>Number(r)).filter(r=>Number.isFinite(r));return i.length?i.reduce((r,s)=>r+s,0)/i.length:null}function Zd(t,e,n){if(!n){const a=Number(t==null?void 0:t[e]);return Number.isFinite(a)?a:null}const i=t==null?void 0:t[`${e}1`],r=t==null?void 0:t[`${e}2`],s=t==null?void 0:t[`${e}3`],o=KV(i,r,s);return Number.isFinite(o)?o:null}function GV({sex:t,heightCm:e,entry:n,tripleEnabled:i}){const r=Number(e);if(!Number.isFinite(r)||r<=0)return null;const s=String(t||"").toLowerCase(),o=Zd(n,"neck",i),a=Zd(n,"waist",i),l=Zd(n,"hip",i);if(s==="male"){if(!Number.isFinite(o)||!Number.isFinite(a))return null;const u=a-o;if(!(u>0))return null;const h=495/(1.0324-.19077*Math.log10(u)+.15456*Math.log10(r))-450;return Number.isFinite(h)?h:null}if(s==="female"){if(!Number.isFinite(o)||!Number.isFinite(a)||!Number.isFinite(l))return null;const u=a+l-o;if(!(u>0))return null;const h=495/(1.29579-.35004*Math.log10(u)+.221*Math.log10(r))-450;return Number.isFinite(h)?h:null}return null}function QV({weightKg:t,bfPct:e}){const n=Number(t),i=Number(e);return!Number.isFinite(n)||!Number.isFinite(i)?null:n*(1-i/100)}function gb(t,e){const n=!!(e!=null&&e.triplemeasurements),i=(e==null?void 0:e.sex)||null,r=(e==null?void 0:e.height)||null,s=t.map(a=>({dateIso:a.dateIso,weight:pr(a.weight),protein:pr(a.protein),carbs:pr(a.carbs),fats:pr(a.fats),bench:pr(a.bench),squat:pr(a.squat),deadlift:pr(a.deadlift),calories:pb(a),avgStrength:qV(a),bfPct:GV({sex:i,heightCm:r,entry:a,tripleEnabled:n})}));s.forEach(a=>{a.lbm=QV({weightKg:a.weight,bfPct:a.bfPct})});const o={weight:cs(s.map(a=>a.weight)),bench:cs(s.map(a=>a.bench)),squat:cs(s.map(a=>a.squat)),deadlift:cs(s.map(a=>a.deadlift)),calories:cs(s.map(a=>a.calories)),avgStrength:cs(s.map(a=>a.avgStrength))};return s.map((a,l)=>({...a,wma:{weight:o.weight[l],bench:o.bench[l],squat:o.squat[l],deadlift:o.deadlift[l],calories:o.calories[l],avgStrength:o.avgStrength[l]}}))}function YV(t){var f,m,v,w;if(!t||t.length<14)return{weeks:[],baselineTdee:null,baselineStrength:null,baselineWeeklyLoss:null};const e=[],n=t.length,i=Math.floor(n/7),r=E=>E*7-1;function s(E){var T;for(let S=E;S>=0;S--){const b=(T=t[S])==null?void 0:T.lbm;if(Number.isFinite(b))return b}return null}for(let E=1;E<=i;E++){const T=(E-1)*7,S=r(E),b=t.slice(T,S+1),R=Bo(b.map(A=>A.calories)),M=Bo(b.map(A=>{var re;return(re=A==null?void 0:A.wma)==null?void 0:re.avgStrength})),D=(m=(f=b[0])==null?void 0:f.wma)==null?void 0:m.weight,I=(w=(v=b[b.length-1])==null?void 0:v.wma)==null?void 0:w.weight,_=Number.isFinite(D)&&Number.isFinite(I)?I-D:null;let k=null;if(Number.isFinite(R)&&Number.isFinite(_)){const re=-_*7700/7;k=R+re}const C=s(S);let P=null,N="";Number.isFinite(C)&&Number.isFinite(_)&&(P=Math.max(0,-_)/C*100,P<.5?N="Conservative":P<=1?N="Optimal":N="Aggressive"),e.push({week:E,avgCalories:R,weightChange:_,tdee:k,avgStrengthWma:M,lbm:C,lossRatePct:P,lossRateStatus:N,tdeeChangeFromBaseline:null,adaptationPct:null})}const o=e.slice(0,2).map(E=>E.tdee).filter(Number.isFinite),a=o.length?Bo(o):null,l=e.slice(0,2).map(E=>E.avgStrengthWma).filter(Number.isFinite),u=l.length?Bo(l):null,h=e.slice(0,2).map(E=>Number.isFinite(E.weightChange)?Math.max(0,-E.weightChange):null).filter(Number.isFinite),d=h.length?Bo(h):null;if(Number.isFinite(a))for(const E of e)Number.isFinite(E.tdee)&&(E.tdeeChangeFromBaseline=E.tdee-a,E.adaptationPct=E.tdeeChangeFromBaseline/a*100);return{weeks:e,baselineTdee:a,baselineStrength:u,baselineWeeklyLoss:d}}function pr(t){const e=Number(t);return Number.isFinite(e)?e:null}function Bo(t){const e=t.map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function Bn(){let t=0,e=0;for(;t===0;)t=Math.random();for(;e===0;)e=Math.random();return Math.sqrt(-2*Math.log(t))*Math.cos(2*Math.PI*e)}function z0(t,e,n){return Math.max(e,Math.min(n,t))}function XV(){return{email:"sample@demo.local",sex:"male",height:175,targetWeight:82,triplemeasurements:!1,createdAt:null}}function JV(t=60){const e=new Date;e.setDate(e.getDate()-(t-1));const n=[];let i=90,r=100,s=140,o=180;for(let a=0;a<t;a++){const l=new Date(e);l.setDate(e.getDate()+a);const u=fb(l),d=2400-Math.floor(a/14)*125;i-=5.5/(t-1),r+=4/(t-1),s+=4/(t-1),o+=5/(t-1);const f=i+Bn()*.8,m=r+Bn()*2,v=s+Bn()*2.5,w=o+Bn()*2.8,E=180+Bn()*10,T=70+Bn()*6,S=(d-4*E-9*T)/4+Bn()*10,b={id:u,dateIso:u,date:null,weight:fu(f),protein:ef(E),carbs:ef(z0(S,100,320)),fats:ef(z0(T,45,95)),bench:fu(m),squat:fu(v),deadlift:fu(w),neck:null,waist:null,hip:null};if(a%7===0){const D=96+-7*(a/(t-1));b.neck=40+Bn()*.3,b.waist=D+Bn()*.6}n.push(b)}return n}function ef(t){return Number.isFinite(t)?Math.round(t):null}function fu(t){return Number.isFinite(t)?Math.round(t*10)/10:null}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Cl(t){return t+.5|0}const Mi=(t,e,n)=>Math.max(Math.min(t,n),e);function ia(t){return Mi(Cl(t*2.55),0,255)}function Qi(t){return Mi(Cl(t*255),0,255)}function Kn(t){return Mi(Cl(t/2.55)/100,0,1)}function $0(t){return Mi(Cl(t*100),0,100)}const Gt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Op=[..."0123456789ABCDEF"],ZV=t=>Op[t&15],eF=t=>Op[(t&240)>>4]+Op[t&15],pu=t=>(t&240)>>4===(t&15),tF=t=>pu(t.r)&&pu(t.g)&&pu(t.b)&&pu(t.a);function nF(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Gt[t[1]]*17,g:255&Gt[t[2]]*17,b:255&Gt[t[3]]*17,a:e===5?Gt[t[4]]*17:255}:(e===7||e===9)&&(n={r:Gt[t[1]]<<4|Gt[t[2]],g:Gt[t[3]]<<4|Gt[t[4]],b:Gt[t[5]]<<4|Gt[t[6]],a:e===9?Gt[t[7]]<<4|Gt[t[8]]:255})),n}const iF=(t,e)=>t<255?e(t):"";function rF(t){var e=tF(t)?ZV:eF;return t?"#"+e(t.r)+e(t.g)+e(t.b)+iF(t.a,e):void 0}const sF=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function mb(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function oF(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function aF(t,e,n){const i=mb(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function lF(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function jm(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,u,h;return s!==o&&(h=s-o,u=a>.5?h/(2-s-o):h/(s+o),l=lF(n,i,r,h,s),l=l*60+.5),[l|0,u||0,a]}function Um(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Qi)}function Bm(t,e,n){return Um(mb,t,e,n)}function uF(t,e,n){return Um(aF,t,e,n)}function cF(t,e,n){return Um(oF,t,e,n)}function yb(t){return(t%360+360)%360}function hF(t){const e=sF.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?ia(+e[5]):Qi(+e[5]));const r=yb(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=uF(r,s,o):e[1]==="hsv"?i=cF(r,s,o):i=Bm(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function dF(t,e){var n=jm(t);n[0]=yb(n[0]+e),n=Bm(n),t.r=n[0],t.g=n[1],t.b=n[2]}function fF(t){if(!t)return;const e=jm(t),n=e[0],i=$0(e[1]),r=$0(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${Kn(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const W0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},H0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function pF(){const t={},e=Object.keys(H0),n=Object.keys(W0);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,W0[s]);s=parseInt(H0[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let gu;function gF(t){gu||(gu=pF(),gu.transparent=[0,0,0,0]);const e=gu[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const mF=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function yF(t){const e=mF.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?ia(o):Mi(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?ia(i):Mi(i,0,255)),r=255&(e[4]?ia(r):Mi(r,0,255)),s=255&(e[6]?ia(s):Mi(s,0,255)),{r:i,g:r,b:s,a:n}}}function _F(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Kn(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const tf=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,hs=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function vF(t,e,n){const i=hs(Kn(t.r)),r=hs(Kn(t.g)),s=hs(Kn(t.b));return{r:Qi(tf(i+n*(hs(Kn(e.r))-i))),g:Qi(tf(r+n*(hs(Kn(e.g))-r))),b:Qi(tf(s+n*(hs(Kn(e.b))-s))),a:t.a+n*(e.a-t.a)}}function mu(t,e,n){if(t){let i=jm(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=Bm(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function _b(t,e){return t&&Object.assign(e||{},t)}function q0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Qi(t[3]))):(e=_b(t,{r:0,g:0,b:0,a:1}),e.a=Qi(e.a)),e}function wF(t){return t.charAt(0)==="r"?yF(t):hF(t)}class sl{constructor(e){if(e instanceof sl)return e;const n=typeof e;let i;n==="object"?i=q0(e):n==="string"&&(i=nF(e)||gF(e)||wF(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=_b(this._rgb);return e&&(e.a=Kn(e.a)),e}set rgb(e){this._rgb=q0(e)}rgbString(){return this._valid?_F(this._rgb):void 0}hexString(){return this._valid?rF(this._rgb):void 0}hslString(){return this._valid?fF(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,u=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-u,i.r=255&u*i.r+s*r.r+.5,i.g=255&u*i.g+s*r.g+.5,i.b=255&u*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=vF(this._rgb,e._rgb,n)),this}clone(){return new sl(this.rgb)}alpha(e){return this._rgb.a=Qi(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=Cl(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return mu(this._rgb,2,e),this}darken(e){return mu(this._rgb,2,-e),this}saturate(e){return mu(this._rgb,1,e),this}desaturate(e){return mu(this._rgb,1,-e),this}rotate(e){return dF(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function zn(){}const EF=(()=>{let t=0;return()=>t++})();function xe(t){return t==null}function it(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function me(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function sn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function En(t,e){return sn(t)?t:e}function ue(t,e){return typeof t>"u"?e:t}const TF=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ce(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function ve(t,e,n,i){let r,s,o;if(it(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(me(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function zc(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function $c(t){if(it(t))return t.map($c);if(me(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=$c(t[n[r]]);return e}return t}function vb(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function SF(t,e,n,i){if(!vb(t))return;const r=e[t],s=n[t];me(r)&&me(s)?ol(r,s,i):e[t]=$c(s)}function ol(t,e,n){const i=it(e)?e:[e],r=i.length;if(!me(t))return t;n=n||{};const s=n.merger||SF;let o;for(let a=0;a<r;++a){if(o=i[a],!me(o))continue;const l=Object.keys(o);for(let u=0,h=l.length;u<h;++u)s(l[u],t,o,n)}return t}function Sa(t,e){return ol(t,e,{merger:IF})}function IF(t,e,n){if(!vb(t))return;const i=e[t],r=n[t];me(i)&&me(r)?Sa(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=$c(r))}const K0={"":t=>t,x:t=>t.x,y:t=>t.y};function xF(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function bF(t){const e=xF(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function Wc(t,e){return(K0[e]||(K0[e]=bF(e)))(t)}function zm(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Hc=t=>typeof t<"u",tr=t=>typeof t=="function",G0=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function kF(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const yt=Math.PI,Mn=2*yt,CF=Mn+yt,qc=Number.POSITIVE_INFINITY,AF=yt/180,hn=yt/2,gr=yt/4,Q0=yt*2/3,wb=Math.log10,io=Math.sign;function Ia(t,e,n){return Math.abs(t-e)<n}function Y0(t){const e=Math.round(t);t=Ia(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(wb(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function PF(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function RF(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function al(t){return!RF(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function NF(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function DF(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Ar(t){return t*(yt/180)}function MF(t){return t*(180/yt)}function X0(t){if(!sn(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function OF(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*yt&&(s+=Mn),{angle:s,distance:r}}function Lp(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function LF(t,e){return(t-e+CF)%Mn-yt}function Ei(t){return(t%Mn+Mn)%Mn}function Eb(t,e,n,i){const r=Ei(t),s=Ei(e),o=Ei(n),a=Ei(s-r),l=Ei(o-r),u=Ei(r-s),h=Ei(r-o);return r===s||r===o||i&&s===o||a>l&&u<h}function Jt(t,e,n){return Math.max(e,Math.min(n,t))}function VF(t){return Jt(t,-32768,32767)}function ra(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function $m(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Pr=(t,e,n,i)=>$m(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),FF=(t,e,n)=>$m(t,n,i=>t[i][e]>=n);function jF(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const Tb=["push","pop","shift","splice","unshift"];function UF(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Tb.forEach(n=>{const i="_onData"+zm(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function J0(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(Tb.forEach(s=>{delete t[s]}),delete t._chartjs)}function BF(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Sb=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Ib(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,Sb.call(window,()=>{i=!1,t.apply(e,n)}))}}function zF(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const xb=t=>t==="start"?"left":t==="end"?"right":"center",Ut=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,$F=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function WF(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,u=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=o.axis,{min:d,max:f,minDefined:m,maxDefined:v}=o.getUserBounds();if(m){if(r=Math.min(Pr(l,h,d).lo,n?i:Pr(e,h,o.getPixelForValue(d)).lo),u){const w=l.slice(0,r+1).reverse().findIndex(E=>!xe(E[a.axis]));r-=Math.max(0,w)}r=Jt(r,0,i-1)}if(v){let w=Math.max(Pr(l,o.axis,f,!0).hi+1,n?0:Pr(e,h,o.getPixelForValue(f),!0).hi+1);if(u){const E=l.slice(w-1).findIndex(T=>!xe(T[a.axis]));w+=Math.max(0,E)}s=Jt(w,r,i)-r}else s=i-r}return{start:r,count:s}}function HF(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const yu=t=>t===0||t===1,Z0=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Mn/n)),ew=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Mn/n)+1,xa={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*hn)+1,easeOutSine:t=>Math.sin(t*hn),easeInOutSine:t=>-.5*(Math.cos(yt*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>yu(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>yu(t)?t:Z0(t,.075,.3),easeOutElastic:t=>yu(t)?t:ew(t,.075,.3),easeInOutElastic(t){return yu(t)?t:t<.5?.5*Z0(t*2,.1125,.45):.5+.5*ew(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-xa.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?xa.easeInBounce(t*2)*.5:xa.easeOutBounce(t*2-1)*.5+.5};function Wm(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function tw(t){return Wm(t)?t:new sl(t)}function nf(t){return Wm(t)?t:new sl(t).saturate(.5).darken(.1).hexString()}const qF=["x","y","borderWidth","radius","tension"],KF=["color","borderColor","backgroundColor"];function GF(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:KF},numbers:{type:"number",properties:qF}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function QF(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const nw=new Map;function YF(t,e){e=e||{};const n=t+JSON.stringify(e);let i=nw.get(n);return i||(i=new Intl.NumberFormat(t,e),nw.set(n,i)),i}function bb(t,e,n){return YF(e,n).format(t)}const XF={values(t){return it(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const u=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),s=JF(t,n)}const o=wb(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),bb(t,i,l)}};function JF(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var kb={formatters:XF};function ZF(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:kb.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const Gr=Object.create(null),Vp=Object.create(null);function ba(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function rf(t,e,n){return typeof e=="string"?ol(ba(t,e),n):ol(ba(t,""),e)}class ej{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>nf(r.backgroundColor),this.hoverBorderColor=(i,r)=>nf(r.borderColor),this.hoverColor=(i,r)=>nf(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return rf(this,e,n)}get(e){return ba(this,e)}describe(e,n){return rf(Vp,e,n)}override(e,n){return rf(Gr,e,n)}route(e,n,i,r){const s=ba(this,e),o=ba(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],u=o[r];return me(l)?Object.assign({},u,l):ue(l,u)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var Be=new ej({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[GF,QF,ZF]);function tj(t){return!t||xe(t.size)||xe(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function iw(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function mr(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function rw(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Fp(t,e,n,i){Cb(t,e,n,i,null)}function Cb(t,e,n,i,r){let s,o,a,l,u,h,d,f;const m=e.pointStyle,v=e.rotation,w=e.radius;let E=(v||0)*AF;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(E),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(w)||w<=0)){switch(t.beginPath(),m){default:r?t.ellipse(n,i,r/2,w,0,0,Mn):t.arc(n,i,w,0,Mn),t.closePath();break;case"triangle":h=r?r/2:w,t.moveTo(n+Math.sin(E)*h,i-Math.cos(E)*w),E+=Q0,t.lineTo(n+Math.sin(E)*h,i-Math.cos(E)*w),E+=Q0,t.lineTo(n+Math.sin(E)*h,i-Math.cos(E)*w),t.closePath();break;case"rectRounded":u=w*.516,l=w-u,o=Math.cos(E+gr)*l,d=Math.cos(E+gr)*(r?r/2-u:l),a=Math.sin(E+gr)*l,f=Math.sin(E+gr)*(r?r/2-u:l),t.arc(n-d,i-a,u,E-yt,E-hn),t.arc(n+f,i-o,u,E-hn,E),t.arc(n+d,i+a,u,E,E+hn),t.arc(n-f,i+o,u,E+hn,E+yt),t.closePath();break;case"rect":if(!v){l=Math.SQRT1_2*w,h=r?r/2:l,t.rect(n-h,i-l,2*h,2*l);break}E+=gr;case"rectRot":d=Math.cos(E)*(r?r/2:w),o=Math.cos(E)*w,a=Math.sin(E)*w,f=Math.sin(E)*(r?r/2:w),t.moveTo(n-d,i-a),t.lineTo(n+f,i-o),t.lineTo(n+d,i+a),t.lineTo(n-f,i+o),t.closePath();break;case"crossRot":E+=gr;case"cross":d=Math.cos(E)*(r?r/2:w),o=Math.cos(E)*w,a=Math.sin(E)*w,f=Math.sin(E)*(r?r/2:w),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"star":d=Math.cos(E)*(r?r/2:w),o=Math.cos(E)*w,a=Math.sin(E)*w,f=Math.sin(E)*(r?r/2:w),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o),E+=gr,d=Math.cos(E)*(r?r/2:w),o=Math.cos(E)*w,a=Math.sin(E)*w,f=Math.sin(E)*(r?r/2:w),t.moveTo(n-d,i-a),t.lineTo(n+d,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"line":o=r?r/2:Math.cos(E)*w,a=Math.sin(E)*w,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(E)*(r?r/2:w),i+Math.sin(E)*w);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function ll(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Hm(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function qm(t){t.restore()}function nj(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function ij(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function rj(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),xe(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function sj(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,u=n+s.actualBoundingBoxDescent,h=r.strikethrough?(l+u)/2:u;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,h),t.lineTo(a,h),t.stroke()}}function oj(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Kc(t,e,n,i,r,s={}){const o=it(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,u;for(t.save(),t.font=r.string,rj(t,s),l=0;l<o.length;++l)u=o[l],s.backdrop&&oj(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),xe(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(u,n,i,s.maxWidth)),t.fillText(u,n,i,s.maxWidth),sj(t,n,i,u,s),i+=Number(r.lineHeight);t.restore()}function jp(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*yt,yt,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,yt,hn,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,hn,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-hn,!0),t.lineTo(n+o.topLeft,i)}const aj=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,lj=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function uj(t,e){const n=(""+t).match(aj);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const cj=t=>+t||0;function Ab(t,e){const n={},i=me(e),r=i?Object.keys(e):e,s=me(t)?i?o=>ue(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=cj(s(o));return n}function hj(t){return Ab(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ka(t){return Ab(t,["topLeft","topRight","bottomLeft","bottomRight"])}function _n(t){const e=hj(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Dt(t,e){t=t||{},e=e||Be.font;let n=ue(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=ue(t.style,e.style);i&&!(""+i).match(lj)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:ue(t.family,e.family),lineHeight:uj(ue(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:ue(t.weight,e.weight),string:""};return r.string=tj(r),r}function _u(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function dj(t,e,n){const{min:i,max:r}=t,s=TF(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function ns(t,e){return Object.assign(Object.create(t),e)}function Km(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=Db("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>Km([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return Rb(a,l,()=>wj(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return ow(a).includes(l)},ownKeys(a){return ow(a)},set(a,l,u){const h=a._storage||(a._storage=r());return a[l]=h[l]=u,delete a._keys,!0}})}function ro(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Pb(t,i),setContext:s=>ro(t,s,n,i),override:s=>ro(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return Rb(s,o,()=>pj(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function Pb(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:tr(n)?n:()=>n,isIndexable:tr(i)?i:()=>i}}const fj=(t,e)=>t?t+zm(e):e,Gm=(t,e)=>me(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Rb(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function pj(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return tr(a)&&o.isScriptable(e)&&(a=gj(e,a,t,n)),it(a)&&a.length&&(a=mj(e,a,t,o.isIndexable)),Gm(e,a)&&(a=ro(a,r,s&&s[e],o)),a}function gj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),Gm(t,l)&&(l=Qm(r._scopes,r,t,l)),l}function mj(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(me(e[0])){const l=e,u=r._scopes.filter(h=>h!==l);e=[];for(const h of l){const d=Qm(u,r,t,h);e.push(ro(d,s,o&&o[t],a))}}return e}function Nb(t,e,n){return tr(t)?t(e,n):t}const yj=(t,e)=>t===!0?e:typeof t=="string"?Wc(e,t):void 0;function _j(t,e,n,i,r){for(const s of e){const o=yj(n,s);if(o){t.add(o);const a=Nb(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function Qm(t,e,n,i){const r=e._rootScopes,s=Nb(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=sw(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=sw(a,o,s,l,i),l===null)?!1:Km(Array.from(a),[""],r,s,()=>vj(e,n,i))}function sw(t,e,n,i,r){for(;n;)n=_j(t,e,n,i,r);return n}function vj(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return it(r)&&me(n)?n:r||{}}function wj(t,e,n,i){let r;for(const s of e)if(r=Db(fj(s,t),n),typeof r<"u")return Gm(t,r)?Qm(n,i,t,r):r}function Db(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function ow(t){let e=t._keys;return e||(e=t._keys=Ej(t._scopes)),e}function Ej(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const Tj=Number.EPSILON||1e-14,so=(t,e)=>e<t.length&&!t[e].skip&&t[e],Mb=t=>t==="x"?"y":"x";function Sj(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=Lp(s,r),l=Lp(o,s);let u=a/(a+l),h=l/(a+l);u=isNaN(u)?0:u,h=isNaN(h)?0:h;const d=i*u,f=i*h;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+f*(o.x-r.x),y:s.y+f*(o.y-r.y)}}}function Ij(t,e,n){const i=t.length;let r,s,o,a,l,u=so(t,0);for(let h=0;h<i-1;++h)if(l=u,u=so(t,h+1),!(!l||!u)){if(Ia(e[h],0,Tj)){n[h]=n[h+1]=0;continue}r=n[h]/e[h],s=n[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[h]=r*o*e[h],n[h+1]=s*o*e[h])}}function xj(t,e,n="x"){const i=Mb(n),r=t.length;let s,o,a,l=so(t,0);for(let u=0;u<r;++u){if(o=a,a=l,l=so(t,u+1),!a)continue;const h=a[n],d=a[i];o&&(s=(h-o[n])/3,a[`cp1${n}`]=h-s,a[`cp1${i}`]=d-s*e[u]),l&&(s=(l[n]-h)/3,a[`cp2${n}`]=h+s,a[`cp2${i}`]=d+s*e[u])}}function bj(t,e="x"){const n=Mb(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,u=so(t,0);for(o=0;o<i;++o)if(a=l,l=u,u=so(t,o+1),!!l){if(u){const h=u[e]-l[e];r[o]=h!==0?(u[n]-l[n])/h:0}s[o]=a?u?io(r[o-1])!==io(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}Ij(t,r,s),xj(t,s,e)}function vu(t,e,n){return Math.max(Math.min(t,n),e)}function kj(t,e){let n,i,r,s,o,a=ll(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&ll(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=vu(r.cp1x,e.left,e.right),r.cp1y=vu(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=vu(r.cp2x,e.left,e.right),r.cp2y=vu(r.cp2y,e.top,e.bottom)))}function Cj(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")bj(t,r);else{let u=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=Sj(u,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,u=a}e.capBezierPoints&&kj(t,n)}function Ym(){return typeof window<"u"&&typeof document<"u"}function Xm(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Gc(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Uh=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Aj(t,e){return Uh(t).getPropertyValue(e)}const Pj=["top","right","bottom","left"];function Or(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Pj[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const Rj=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function Nj(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(Rj(r,s,t.target))a=r,l=s;else{const u=e.getBoundingClientRect();a=i.clientX-u.left,l=i.clientY-u.top,o=!0}return{x:a,y:l,box:o}}function Tr(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Uh(n),s=r.boxSizing==="border-box",o=Or(r,"padding"),a=Or(r,"border","width"),{x:l,y:u,box:h}=Nj(t,n),d=o.left+(h&&a.left),f=o.top+(h&&a.top);let{width:m,height:v}=e;return s&&(m-=o.width+a.width,v-=o.height+a.height),{x:Math.round((l-d)/m*n.width/i),y:Math.round((u-f)/v*n.height/i)}}function Dj(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&Xm(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Uh(s),l=Or(a,"border","width"),u=Or(a,"padding");e=o.width-u.width-l.width,n=o.height-u.height-l.height,i=Gc(a.maxWidth,s,"clientWidth"),r=Gc(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||qc,maxHeight:r||qc}}const Oi=t=>Math.round(t*10)/10;function Mj(t,e,n,i){const r=Uh(t),s=Or(r,"margin"),o=Gc(r.maxWidth,t,"clientWidth")||qc,a=Gc(r.maxHeight,t,"clientHeight")||qc,l=Dj(t,e,n);let{width:u,height:h}=l;if(r.boxSizing==="content-box"){const f=Or(r,"border","width"),m=Or(r,"padding");u-=m.width+f.width,h-=m.height+f.height}return u=Math.max(0,u-s.width),h=Math.max(0,i?u/i:h-s.height),u=Oi(Math.min(u,o,l.maxWidth)),h=Oi(Math.min(h,a,l.maxHeight)),u&&!h&&(h=Oi(u/2)),(e!==void 0||n!==void 0)&&i&&l.height&&h>l.height&&(h=l.height,u=Oi(Math.floor(h*i))),{width:u,height:h}}function aw(t,e,n){const i=e||1,r=Oi(t.height*i),s=Oi(t.width*i);t.height=Oi(t.height),t.width=Oi(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const Oj=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Ym()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function lw(t,e){const n=Aj(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Sr(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function Lj(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function Vj(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Sr(t,r,n),a=Sr(r,s,n),l=Sr(s,e,n),u=Sr(o,a,n),h=Sr(a,l,n);return Sr(u,h,n)}const Fj=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},jj=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Fs(t,e,n){return t?Fj(e,n):jj()}function Ob(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function Lb(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Vb(t){return t==="angle"?{between:Eb,compare:LF,normalize:Ei}:{between:ra,compare:(e,n)=>e-n,normalize:e=>e}}function uw({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function Uj(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=Vb(i),l=e.length;let{start:u,end:h,loop:d}=t,f,m;if(d){for(u+=l,h+=l,f=0,m=l;f<m&&o(a(e[u%l][i]),r,s);++f)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:d,style:t.style}}function Bj(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:u}=Vb(i),{start:h,end:d,loop:f,style:m}=Uj(t,e,n),v=[];let w=!1,E=null,T,S,b;const R=()=>l(r,b,T)&&a(r,b)!==0,M=()=>a(s,T)===0||l(s,b,T),D=()=>w||R(),I=()=>!w||M();for(let _=h,k=h;_<=d;++_)S=e[_%o],!S.skip&&(T=u(S[i]),T!==b&&(w=l(T,r,s),E===null&&D()&&(E=a(T,r)===0?_:k),E!==null&&I()&&(v.push(uw({start:E,end:_,loop:f,count:o,style:m})),E=null),k=_,b=T));return E!==null&&v.push(uw({start:E,end:d,loop:f,count:o,style:m})),v}function zj(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=Bj(i[r],t.points,e);s.length&&n.push(...s)}return n}function $j(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function Wj(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const u=t[l%r];u.skip||u.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=u.stop?l:null):(o=l,a.skip&&(e=l)),a=u}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function Hj(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=$j(n,r,s,i);if(i===!0)return cw(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,u=!!t._fullLoop&&o===0&&a===r-1;return cw(t,Wj(n,o,l,u),n,e)}function cw(t,e,n,i){return!i||!i.setContext||!n?e:qj(t,e,n,i)}function qj(t,e,n,i){const r=t._chart.getContext(),s=hw(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,u=[];let h=s,d=e[0].start,f=d;function m(v,w,E,T){const S=a?-1:1;if(v!==w){for(v+=l;n[v%l].skip;)v-=S;for(;n[w%l].skip;)w+=S;v%l!==w%l&&(u.push({start:v%l,end:w%l,loop:E,style:T}),h=T,d=w%l)}}for(const v of e){d=a?d:v.start;let w=n[d%l],E;for(f=d+1;f<=v.end;f++){const T=n[f%l];E=hw(i.setContext(ns(r,{type:"segment",p0:w,p1:T,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),Kj(E,h)&&m(d,f-1,v.loop,h),w=T,h=E}d<f-1&&m(d,f-1,v.loop,h)}return u}function hw(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Kj(t,e){if(!e)return!1;const n=[],i=function(r,s){return Wm(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function wu(t,e,n){return t.options.clip?t[n]:e[n]}function Gj(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:wu(n,e,"left"),right:wu(n,e,"right"),top:wu(i,e,"top"),bottom:wu(i,e,"bottom")}:e}function Qj(t,e){const n=e._clip;if(n.disabled)return!1;const i=Gj(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Yj{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Sb.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var $n=new Yj;const dw="transparent",Xj={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=tw(t||dw),r=i.valid&&tw(e||dw);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class Jj{constructor(e,n,i,r){const s=n[i];r=_u([e.to,r,s,e.from]);const o=_u([e.from,s,r]);this._active=!0,this._fn=e.fn||Xj[e.type||typeof o],this._easing=xa[e.easing]||xa.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=_u([e.to,n,r,e.from]),this._from=_u([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class Fb{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!me(e))return;const n=Object.keys(Be.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!me(s))return;const o={};for(const a of n)o[a]=s[a];(it(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=e4(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&Zj(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const u=o[l];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(e,n));continue}const h=n[u];let d=s[u];const f=i.get(u);if(d)if(f&&d.active()){d.update(f,h,a);continue}else d.cancel();if(!f||!f.duration){e[u]=h;continue}s[u]=d=new Jj(f,e,u,h),r.push(d)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return $n.add(this._chart,i),!0}}function Zj(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function e4(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function fw(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function t4(t,e,n){if(n===!1)return!1;const i=fw(t,n),r=fw(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function n4(t){let e,n,i,r;return me(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function jb(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function pw(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,u;if(e===null)return;let h=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(h=!0,i.all)continue;break}u=t.values[l],sn(u)&&(s||e===0||io(e)===io(u))&&(e+=u)}return!h&&!i.all?0:e}function i4(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,u,h;for(l=0,u=o.length;l<u;++l)h=o[l],a[l]={[r]:h,[s]:t[h]};return a}function sf(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function r4(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function s4(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function o4(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function gw(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function mw(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,u=o.axis,h=r4(s,o,i),d=e.length;let f;for(let m=0;m<d;++m){const v=e[m],{[l]:w,[u]:E}=v,T=v._stacks||(v._stacks={});f=T[u]=o4(r,h,w),f[a]=E,f._top=gw(f,o,!0,i.type),f._bottom=gw(f,o,!1,i.type);const S=f._visualValues||(f._visualValues={});S[a]=E}}function of(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function a4(t,e){return ns(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function l4(t,e,n){return ns(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function zo(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const af=t=>t==="reset"||t==="none",yw=(t,e)=>e?t:Object.assign({},t),u4=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:jb(n,!0),values:null};class Ca{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=sf(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&zo(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(d,f,m,v)=>d==="x"?f:d==="r"?v:m,s=n.xAxisID=ue(i.xAxisID,of(e,"x")),o=n.yAxisID=ue(i.yAxisID,of(e,"y")),a=n.rAxisID=ue(i.rAxisID,of(e,"r")),l=n.indexAxis,u=n.iAxisID=r(l,s,o,a),h=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(u),n.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&J0(this._data,this),e._stacked&&zo(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(me(n)){const r=this._cachedMeta;this._data=i4(n,r)}else if(i!==n){if(i){J0(i,this);const r=this._cachedMeta;zo(r),r._parsed=[]}n&&Object.isExtensible(n)&&UF(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=sf(n.vScale,n),n.stack!==i.stack&&(r=!0,zo(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(mw(this,n._parsed),n._stacked=sf(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,u=e>0&&i._parsed[e-1],h,d,f;if(this._parsing===!1)i._parsed=r,i._sorted=!0,f=r;else{it(r[e])?f=this.parseArrayData(i,r,e,n):me(r[e])?f=this.parseObjectData(i,r,e,n):f=this.parsePrimitiveData(i,r,e,n);const m=()=>d[a]===null||u&&d[a]<u[a];for(h=0;h<n;++h)i._parsed[h+e]=d=f[h],l&&(m()&&(l=!1),u=d);i._sorted=l}o&&mw(this,f)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,u=s.getLabels(),h=s===o,d=new Array(r);let f,m,v;for(f=0,m=r;f<m;++f)v=f+i,d[f]={[a]:h||s.parse(u[v],v),[l]:o.parse(n[v],v)};return d}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,u,h,d;for(l=0,u=r;l<u;++l)h=l+i,d=n[h],a[l]={x:s.parse(d[0],h),y:o.parse(d[1],h)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,u=new Array(r);let h,d,f,m;for(h=0,d=r;h<d;++h)f=h+i,m=n[f],u[h]={x:s.parse(Wc(m,a),f),y:o.parse(Wc(m,l),f)};return u}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:jb(r,!0),values:n._stacks[e.axis]._visualValues};return pw(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=pw(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=u4(n,i,this.chart),u={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:d}=s4(a);let f,m;function v(){m=r[f];const w=m[a.axis];return!sn(m[e.axis])||h>w||d<w}for(f=0;f<o&&!(!v()&&(this.updateRangeFromParsed(u,e,m,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!v()){this.updateRangeFromParsed(u,e,m,l);break}}return u}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],sn(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=n4(ue(this.options.clip,t4(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,u=this.options.drawActiveElementsOnTop;let h;for(i.dataset&&i.dataset.draw(e,s,a,l),h=a;h<a+l;++h){const d=r[h];d.hidden||(d.active&&u?o.push(d):d.draw(e,s))}for(h=0;h<o.length;++h)o[h].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=l4(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=a4(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Hc(i);if(a)return yw(a,l);const u=this.chart.config,h=u.datasetElementScopeKeys(this._type,e),d=r?[`${e}Hover`,"hover",e,""]:[e,""],f=u.getOptionScopes(this.getDataset(),h),m=Object.keys(Be.elements[e]),v=()=>this.getContext(i,r,n),w=u.resolveNamedOptions(f,m,v,d);return w.$shared&&(w.$shared=l,s[o]=Object.freeze(yw(w,l))),w}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const h=this.chart.config,d=h.datasetAnimationScopeKeys(this._type,n),f=h.getOptionScopes(this.getDataset(),d);l=h.createResolver(f,this.getContext(e,i,n))}const u=new Fb(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(u)),u}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||af(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){af(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!af(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,u]of this._syncList)this[a](l,u);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=u=>{for(u.length+=n,a=u.length-1;a>=o;a--)u[a]=u[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&zo(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ne(Ca,"defaults",{}),ne(Ca,"datasetElementType",null),ne(Ca,"dataElementType",null);class Gu extends Ca{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=WF(n,r,o);this._drawStart=a,this._drawCount=l,HF(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const u=this.resolveDatasetElementOptions(e);this.options.showLine||(u.borderWidth=0),u.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:u},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:u}=this._cachedMeta,{sharedOptions:h,includeOptions:d}=this._getSharedOptions(n,r),f=o.axis,m=a.axis,{spanGaps:v,segment:w}=this.options,E=al(v)?v:Number.POSITIVE_INFINITY,T=this.chart._animationsDisabled||s||r==="none",S=n+i,b=e.length;let R=n>0&&this.getParsed(n-1);for(let M=0;M<b;++M){const D=e[M],I=T?D:{};if(M<n||M>=S){I.skip=!0;continue}const _=this.getParsed(M),k=xe(_[m]),C=I[f]=o.getPixelForValue(_[f],M),P=I[m]=s||k?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,_,l):_[m],M);I.skip=isNaN(C)||isNaN(P)||k,I.stop=M>0&&Math.abs(_[f]-R[f])>E,w&&(I.parsed=_,I.raw=u.data[M]),d&&(I.options=h||this.resolveDataElementOptions(M,D.active?"active":r)),T||this.updateElement(D,M,I,r),R=_}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ne(Gu,"id","line"),ne(Gu,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ne(Gu,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function yr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Jm{constructor(e){ne(this,"options");this.options=e||{}}static override(e){Object.assign(Jm.prototype,e)}init(){}formats(){return yr()}parse(){return yr()}format(){return yr()}add(){return yr()}diff(){return yr()}startOf(){return yr()}endOf(){return yr()}}var c4={_date:Jm};function h4(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const u=a._reversePixels?FF:Pr;if(i){if(r._sharedOptions){const h=s[0],d=typeof h.getRange=="function"&&h.getRange(e);if(d){const f=u(s,e,n-d),m=u(s,e,n+d);return{lo:f.lo,hi:m.hi}}}}else{const h=u(s,e,n);if(l){const{vScale:d}=r._cachedMeta,{_parsed:f}=t,m=f.slice(0,h.lo+1).reverse().findIndex(w=>!xe(w[d.axis]));h.lo-=Math.max(0,m);const v=f.slice(h.hi).findIndex(w=>!xe(w[d.axis]));h.hi+=Math.max(0,v)}return h}}return{lo:0,hi:s.length-1}}function Bh(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:u,data:h}=s[a],{lo:d,hi:f}=h4(s[a],e,o,r);for(let m=d;m<=f;++m){const v=h[m];v.skip||i(v,u,m)}}}function d4(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function lf(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||Bh(t,n,e,function(a,l,u){!r&&!ll(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:u})},!0),s}function f4(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=OF(o,{x:e.x,y:e.y});Eb(d,u,h)&&r.push({element:o,datasetIndex:a,index:l})}return Bh(t,n,e,s),r}function p4(t,e,n,i,r,s){let o=[];const a=d4(n);let l=Number.POSITIVE_INFINITY;function u(h,d,f){const m=h.inRange(e.x,e.y,r);if(i&&!m)return;const v=h.getCenterPoint(r);if(!(!!s||t.isPointInArea(v))&&!m)return;const E=a(e,v);E<l?(o=[{element:h,datasetIndex:d,index:f}],l=E):E===l&&o.push({element:h,datasetIndex:d,index:f})}return Bh(t,n,e,u),o}function uf(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?f4(t,e,n,r):p4(t,e,n,i,r,s)}function _w(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Bh(t,n,e,(l,u,h)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:u,index:h}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var g4={modes:{index(t,e,n,i){const r=Tr(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?lf(t,r,s,i,o):uf(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(u=>{const h=a[0].index,d=u.data[h];d&&!d.skip&&l.push({element:d,datasetIndex:u.index,index:h})}),l):[]},dataset(t,e,n,i){const r=Tr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?lf(t,r,s,i,o):uf(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,u=t.getDatasetMeta(l).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:l,index:h})}return a},point(t,e,n,i){const r=Tr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return lf(t,r,s,i,o)},nearest(t,e,n,i){const r=Tr(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return uf(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Tr(e,t);return _w(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Tr(e,t);return _w(t,r,"y",n.intersect,i)}}};const Ub=["left","top","right","bottom"];function $o(t,e){return t.filter(n=>n.pos===e)}function vw(t,e){return t.filter(n=>Ub.indexOf(n.pos)===-1&&n.box.axis===e)}function Wo(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function m4(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function y4(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!Ub.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function _4(t,e){const n=y4(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,u=n[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:l&&e.availableHeight)}return n}function v4(t){const e=m4(t),n=Wo(e.filter(u=>u.box.fullSize),!0),i=Wo($o(e,"left"),!0),r=Wo($o(e,"right")),s=Wo($o(e,"top"),!0),o=Wo($o(e,"bottom")),a=vw(e,"x"),l=vw(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:$o(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function ww(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function Bb(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function w4(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!me(r)){n.size&&(t[r]-=n.size);const d=i[n.stack]||{size:0,count:1};d.size=Math.max(d.size,n.horizontal?s.height:s.width),n.size=d.size/d.count,t[r]+=n.size}s.getPadding&&Bb(o,s.getPadding());const a=Math.max(0,e.outerWidth-ww(o,t,"left","right")),l=Math.max(0,e.outerHeight-ww(o,t,"top","bottom")),u=a!==t.w,h=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:u,other:h}:{same:h,other:u}}function E4(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function T4(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function sa(t,e,n,i){const r=[];let s,o,a,l,u,h;for(s=0,o=t.length,u=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,T4(a.horizontal,e));const{same:d,other:f}=w4(e,n,a,i);u|=d&&r.length,h=h||f,l.fullSize||r.push(a)}return u&&sa(r,e,n,i)||h}function Eu(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function Ew(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,u=i[a.stack]||{placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){const d=e.w*h,f=u.size||l.height;Hc(u.start)&&(o=u.start),l.fullSize?Eu(l,r.left,o,n.outerWidth-r.right-r.left,f):Eu(l,e.left+u.placed,o,d,f),u.start=o,u.placed+=d,o=l.bottom}else{const d=e.h*h,f=u.size||l.width;Hc(u.start)&&(s=u.start),l.fullSize?Eu(l,s,r.top,f,n.outerHeight-r.bottom-r.top):Eu(l,s,e.top+u.placed,f,d),u.start=s,u.placed+=d,s=l.right}}e.x=s,e.y=o}var Li={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=_n(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=v4(t.boxes),l=a.vertical,u=a.horizontal;ve(t.boxes,w=>{typeof w.beforeLayout=="function"&&w.beforeLayout()});const h=l.reduce((w,E)=>E.box.options&&E.box.options.display===!1?w:w+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),f=Object.assign({},r);Bb(f,_n(i));const m=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),v=_4(l.concat(u),d);sa(a.fullSize,m,d,v),sa(l,m,d,v),sa(u,m,d,v)&&sa(l,m,d,v),E4(m),Ew(a.leftAndTop,m,d,v),m.x+=m.w,m.y+=m.h,Ew(a.rightAndBottom,m,d,v),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ve(a.chartArea,w=>{const E=w.box;Object.assign(E,t.chartArea),E.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class zb{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class S4 extends zb{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Qu="$chartjs",I4={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Tw=t=>t===null||t==="";function x4(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[Qu]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",Tw(r)){const s=lw(t,"width");s!==void 0&&(t.width=s)}if(Tw(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=lw(t,"height");s!==void 0&&(t.height=s)}return t}const $b=Oj?{passive:!0}:!1;function b4(t,e,n){t&&t.addEventListener(e,n,$b)}function k4(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,$b)}function C4(t,e){const n=I4[t.type]||t.type,{x:i,y:r}=Tr(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Qc(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function A4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Qc(a.addedNodes,i),o=o&&!Qc(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function P4(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Qc(a.removedNodes,i),o=o&&!Qc(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const ul=new Map;let Sw=0;function Wb(){const t=window.devicePixelRatio;t!==Sw&&(Sw=t,ul.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function R4(t,e){ul.size||window.addEventListener("resize",Wb),ul.set(t,e)}function N4(t){ul.delete(t),ul.size||window.removeEventListener("resize",Wb)}function D4(t,e,n){const i=t.canvas,r=i&&Xm(i);if(!r)return;const s=Ib((a,l)=>{const u=r.clientWidth;n(a,l),u<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],u=l.contentRect.width,h=l.contentRect.height;u===0&&h===0||s(u,h)});return o.observe(r),R4(t,s),o}function cf(t,e,n){n&&n.disconnect(),e==="resize"&&N4(t)}function M4(t,e,n){const i=t.canvas,r=Ib(s=>{t.ctx!==null&&n(C4(s,t))},t);return b4(i,e,r),r}class O4 extends zb{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(x4(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[Qu])return!1;const i=n[Qu].initial;["height","width"].forEach(s=>{const o=i[s];xe(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[Qu],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:A4,detach:P4,resize:D4}[n]||M4;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:cf,detach:cf,resize:cf}[n]||k4)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return Mj(e,n,i,r)}isAttached(e){const n=e&&Xm(e);return!!(n&&n.isConnected)}}function L4(t){return!Ym()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?S4:O4}class nr{constructor(){ne(this,"x");ne(this,"y");ne(this,"active",!1);ne(this,"options");ne(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return al(this.x)&&al(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}}ne(nr,"defaults",{}),ne(nr,"defaultRoutes");function V4(t,e){const n=t.options.ticks,i=F4(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?U4(e):[],o=s.length,a=s[0],l=s[o-1],u=[];if(o>r)return B4(e,u,s,o/r),u;const h=j4(s,e,r);if(o>0){let d,f;const m=o>1?Math.round((l-a)/(o-1)):null;for(Tu(e,u,h,xe(m)?0:a-m,a),d=0,f=o-1;d<f;d++)Tu(e,u,h,s[d],s[d+1]);return Tu(e,u,h,l,xe(m)?e.length:l+m),u}return Tu(e,u,h),u}function F4(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function j4(t,e,n){const i=z4(t),r=e.length/n;if(!i)return Math.max(r,1);const s=PF(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function U4(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function B4(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function Tu(t,e,n,i,r){const s=ue(i,0),o=Math.min(ue(r,t.length),t.length);let a=0,l,u,h;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),h=s;h<0;)a++,h=Math.round(s+a*n);for(u=Math.max(s,0);u<o;u++)u===h&&(e.push(t[u]),a++,h=Math.round(s+a*n))}function z4(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const $4=t=>t==="left"?"right":t==="right"?"left":t,Iw=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,xw=(t,e)=>Math.min(e||t,t);function bw(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function W4(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),u;if(!(n&&(i===1?u=Math.max(l-s,o-l):e===0?u=(t.getPixelForTick(1)-l)/2:u=(l-t.getPixelForTick(r-1))/2,l+=r<e?u:-u,l<s-a||l>o+a)))return l}function H4(t,e){ve(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function Ho(t){return t.drawTicks?t.tickLength:0}function kw(t,e){if(!t.display)return 0;const n=Dt(t.font,e),i=_n(t.padding);return(it(t.text)?t.text.length:1)*n.lineHeight+i.height}function q4(t,e){return ns(t,{scale:e,type:"scale"})}function K4(t,e,n){return ns(t,{tick:n,index:e,type:"tick"})}function G4(t,e,n){let i=xb(t);return(n&&e!=="right"||!n&&e==="right")&&(i=$4(i)),i}function Q4(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:u,scales:h}=l;let d=0,f,m,v;const w=o-r,E=a-s;if(t.isHorizontal()){if(m=Ut(i,s,a),me(n)){const T=Object.keys(n)[0],S=n[T];v=h[T].getPixelForValue(S)+w-e}else n==="center"?v=(u.bottom+u.top)/2+w-e:v=Iw(t,n,e);f=a-s}else{if(me(n)){const T=Object.keys(n)[0],S=n[T];m=h[T].getPixelForValue(S)-E+e}else n==="center"?m=(u.left+u.right)/2-E+e:m=Iw(t,n,e);v=Ut(i,o,r),d=n==="left"?-hn:hn}return{titleX:m,titleY:v,maxWidth:f,rotation:d}}class mo extends nr{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=En(e,Number.POSITIVE_INFINITY),n=En(n,Number.NEGATIVE_INFINITY),i=En(i,Number.POSITIVE_INFINITY),r=En(r,Number.NEGATIVE_INFINITY),{min:En(e,i),max:En(n,r),minDefined:sn(e),maxDefined:sn(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,u=a.length;l<u;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:En(n,En(i,n)),max:En(i,En(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ce(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=dj(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?bw(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=V4(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ce(this.options.afterUpdate,[this])}beforeSetDimensions(){Ce(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ce(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ce(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ce(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Ce(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Ce(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ce(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=xw(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,u;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const h=this._getLabelSizes(),d=h.widest.width,f=h.highest.height,m=Jt(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:m/(i-1),d+6>a&&(a=m/(i-(e.offset?.5:1)),l=this.maxHeight-Ho(e.grid)-n.padding-kw(e.title,this.chart.options.font),u=Math.sqrt(d*d+f*f),o=MF(Math.min(Math.asin(Jt((h.highest.height+6)/a,-1,1)),Math.asin(Jt(l/u,-1,1))-Math.asin(Jt(f/u,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ce(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ce(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=kw(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Ho(s)+l):(e.height=this.maxHeight,e.width=Ho(s)+l),i.display&&this.ticks.length){const{first:u,last:h,widest:d,highest:f}=this._getLabelSizes(),m=i.padding*2,v=Ar(this.labelRotation),w=Math.cos(v),E=Math.sin(v);if(a){const T=i.mirror?0:E*d.width+w*f.height;e.height=Math.min(this.maxHeight,e.height+T+m)}else{const T=i.mirror?0:w*d.width+E*f.height;e.width=Math.min(this.maxWidth,e.width+T+m)}this._calculatePadding(u,h,E,w)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;l?u?(f=r*e.width,m=i*n.height):(f=i*e.height,m=r*n.width):s==="start"?m=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,m=n.width/2),this.paddingLeft=Math.max((f-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-d+o)*this.width/(this.width-d),0)}else{let h=n.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=n.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ce(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)xe(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=bw(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/xw(n,i));let u=0,h=0,d,f,m,v,w,E,T,S,b,R,M;for(d=0;d<n;d+=l){if(v=e[d].label,w=this._resolveTickFontOptions(d),r.font=E=w.string,T=s[E]=s[E]||{data:{},gc:[]},S=w.lineHeight,b=R=0,!xe(v)&&!it(v))b=iw(r,T.data,T.gc,b,v),R=S;else if(it(v))for(f=0,m=v.length;f<m;++f)M=v[f],!xe(M)&&!it(M)&&(b=iw(r,T.data,T.gc,b,M),R+=S);o.push(b),a.push(R),u=Math.max(b,u),h=Math.max(R,h)}H4(s,n);const D=o.indexOf(u),I=a.indexOf(h),_=k=>({width:o[k]||0,height:a[k]||0});return{first:_(0),last:_(n-1),widest:_(D),highest:_(I),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return VF(this._alignToPixels?mr(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=K4(this.getContext(),e,i))}return this.$context||(this.$context=q4(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Ar(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,u=this.isHorizontal(),d=this.ticks.length+(l?1:0),f=Ho(s),m=[],v=a.setContext(this.getContext()),w=v.display?v.width:0,E=w/2,T=function(_e){return mr(i,_e,w)};let S,b,R,M,D,I,_,k,C,P,N,A;if(o==="top")S=T(this.bottom),I=this.bottom-f,k=S-E,P=T(e.top)+E,A=e.bottom;else if(o==="bottom")S=T(this.top),P=e.top,A=T(e.bottom)-E,I=S+E,k=this.top+f;else if(o==="left")S=T(this.right),D=this.right-f,_=S-E,C=T(e.left)+E,N=e.right;else if(o==="right")S=T(this.left),C=e.left,N=T(e.right)-E,D=S+E,_=this.left+f;else if(n==="x"){if(o==="center")S=T((e.top+e.bottom)/2+.5);else if(me(o)){const _e=Object.keys(o)[0],Se=o[_e];S=T(this.chart.scales[_e].getPixelForValue(Se))}P=e.top,A=e.bottom,I=S+E,k=I+f}else if(n==="y"){if(o==="center")S=T((e.left+e.right)/2);else if(me(o)){const _e=Object.keys(o)[0],Se=o[_e];S=T(this.chart.scales[_e].getPixelForValue(Se))}D=S-E,_=D-f,C=e.left,N=e.right}const re=ue(r.ticks.maxTicksLimit,d),ce=Math.max(1,Math.ceil(d/re));for(b=0;b<d;b+=ce){const _e=this.getContext(b),Se=s.setContext(_e),B=a.setContext(_e),q=Se.lineWidth,K=Se.color,he=B.dash||[],te=B.dashOffset,fe=Se.tickWidth,H=Se.tickColor,oe=Se.tickBorderDash||[],ye=Se.tickBorderDashOffset;R=W4(this,b,l),R!==void 0&&(M=mr(i,R,q),u?D=_=C=N=M:I=k=P=A=M,m.push({tx1:D,ty1:I,tx2:_,ty2:k,x1:C,y1:P,x2:N,y2:A,width:q,color:K,borderDash:he,borderDashOffset:te,tickWidth:fe,tickColor:H,tickBorderDash:oe,tickBorderDashOffset:ye}))}return this._ticksLength=d,this._borderValue=S,m}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:u,padding:h,mirror:d}=s,f=Ho(i.grid),m=f+h,v=d?-h:m,w=-Ar(this.labelRotation),E=[];let T,S,b,R,M,D,I,_,k,C,P,N,A="middle";if(r==="top")D=this.bottom-v,I=this._getXAxisLabelAlignment();else if(r==="bottom")D=this.top+v,I=this._getXAxisLabelAlignment();else if(r==="left"){const ce=this._getYAxisLabelAlignment(f);I=ce.textAlign,M=ce.x}else if(r==="right"){const ce=this._getYAxisLabelAlignment(f);I=ce.textAlign,M=ce.x}else if(n==="x"){if(r==="center")D=(e.top+e.bottom)/2+m;else if(me(r)){const ce=Object.keys(r)[0],_e=r[ce];D=this.chart.scales[ce].getPixelForValue(_e)+m}I=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")M=(e.left+e.right)/2-m;else if(me(r)){const ce=Object.keys(r)[0],_e=r[ce];M=this.chart.scales[ce].getPixelForValue(_e)}I=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?A="top":l==="end"&&(A="bottom"));const re=this._getLabelSizes();for(T=0,S=a.length;T<S;++T){b=a[T],R=b.label;const ce=s.setContext(this.getContext(T));_=this.getPixelForTick(T)+s.labelOffset,k=this._resolveTickFontOptions(T),C=k.lineHeight,P=it(R)?R.length:1;const _e=P/2,Se=ce.color,B=ce.textStrokeColor,q=ce.textStrokeWidth;let K=I;o?(M=_,I==="inner"&&(T===S-1?K=this.options.reverse?"left":"right":T===0?K=this.options.reverse?"right":"left":K="center"),r==="top"?u==="near"||w!==0?N=-P*C+C/2:u==="center"?N=-re.highest.height/2-_e*C+C:N=-re.highest.height+C/2:u==="near"||w!==0?N=C/2:u==="center"?N=re.highest.height/2-_e*C:N=re.highest.height-P*C,d&&(N*=-1),w!==0&&!ce.showLabelBackdrop&&(M+=C/2*Math.sin(w))):(D=_,N=(1-P)*C/2);let he;if(ce.showLabelBackdrop){const te=_n(ce.backdropPadding),fe=re.heights[T],H=re.widths[T];let oe=N-te.top,ye=0-te.left;switch(A){case"middle":oe-=fe/2;break;case"bottom":oe-=fe;break}switch(I){case"center":ye-=H/2;break;case"right":ye-=H;break;case"inner":T===S-1?ye-=H:T>0&&(ye-=H/2);break}he={left:ye,top:oe,width:H+te.width,height:fe+te.height,color:ce.backdropColor}}E.push({label:R,font:k,textOffset:N,options:{rotation:w,color:Se,strokeColor:B,strokeWidth:q,textAlign:K,textBaseline:A,translation:[M,D],backdrop:he}})}return E}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Ar(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let u,h;return n==="left"?r?(h=this.right+s,i==="near"?u="left":i==="center"?(u="center",h+=l/2):(u="right",h+=l)):(h=this.right-a,i==="near"?u="right":i==="center"?(u="center",h-=l/2):(u="left",h=this.left)):n==="right"?r?(h=this.left+s,i==="near"?u="right":i==="center"?(u="center",h-=l/2):(u="left",h-=l)):(h=this.left+a,i==="near"?u="left":i==="center"?(u="center",h+=l/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,u,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,h,d,f;this.isHorizontal()?(u=mr(e,this.left,o)-o/2,h=mr(e,this.right,a)+a/2,d=f=l):(d=mr(e,this.top,o)-o/2,f=mr(e,this.bottom,a)+a/2,u=h=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(u,d),n.lineTo(h,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&Hm(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,u=o.label,h=o.textOffset;Kc(i,u,0,h,l,a)}r&&qm(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Dt(i.font),o=_n(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||me(n)?(l+=o.bottom,it(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:u,titleY:h,maxWidth:d,rotation:f}=Q4(this,l,n,a);Kc(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:f,textAlign:G4(a,n,r),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=ue(e.grid&&e.grid.z,-1),r=ue(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==mo.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Dt(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Su{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;J4(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,Y4(e,o,i),this.override&&Be.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in Be[r]&&(delete Be[r][i],this.override&&delete Gr[i])}}function Y4(t,e,n){const i=ol(Object.create(null),[n?Be.get(n):{},Be.get(e),t.defaults]);Be.set(e,i),t.defaultRoutes&&X4(e,t.defaultRoutes),t.descriptors&&Be.describe(e,t.descriptors)}function X4(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");Be.route(s,r,l,a)})}function J4(t){return"id"in t&&"defaults"in t}class Z4{constructor(){this.controllers=new Su(Ca,"datasets",!0),this.elements=new Su(nr,"elements"),this.plugins=new Su(Object,"plugins"),this.scales=new Su(mo,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):ve(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=zm(e);Ce(i["before"+r],[],i),n[e](i),Ce(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var xn=new Z4;class eU{constructor(){this._init=void 0}notify(e,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(Ce(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){xe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=ue(i.options&&i.options.plugins,{}),s=tU(i);return r===!1&&!n?[]:iU(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function tU(t){const e={},n=[],i=Object.keys(xn.plugins.items);for(let s=0;s<i.length;s++)n.push(xn.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function nU(t,e){return!e&&t===!1?null:t===!0?{}:t}function iU(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,u=nU(i[l],r);u!==null&&s.push({plugin:a,options:rU(t.config,{plugin:a,local:n[l]},u,o)})}return s}function rU(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Up(t,e){const n=Be.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function sU(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function oU(t,e){return t===e?"_index_":"_value_"}function Cw(t){if(t==="x"||t==="y"||t==="r")return t}function aU(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Bp(t,...e){if(Cw(t))return t;for(const n of e){const i=n.axis||aU(n.position)||t.length>1&&Cw(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Aw(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function lU(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return Aw(t,"x",n[0])||Aw(t,"y",n[0])}return{}}function uU(t,e){const n=Gr[t.type]||{scales:{}},i=e.scales||{},r=Up(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!me(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Bp(o,a,lU(o,t),Be.scales[a.type]),u=oU(l,r),h=n.scales||{};s[o]=Sa(Object.create(null),[{axis:l},a,h[l],h[u]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||Up(a,e),h=(Gr[a]||{}).scales||{};Object.keys(h).forEach(d=>{const f=sU(d,l),m=o[f+"AxisID"]||f;s[m]=s[m]||Object.create(null),Sa(s[m],[{axis:f},i[m],h[d]])})}),Object.keys(s).forEach(o=>{const a=s[o];Sa(a,[Be.scales[a.type],Be.scale])}),s}function Hb(t){const e=t.options||(t.options={});e.plugins=ue(e.plugins,{}),e.scales=uU(t,e)}function qb(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function cU(t){return t=t||{},t.data=qb(t.data),Hb(t),t}const Pw=new Map,Kb=new Set;function Iu(t,e){let n=Pw.get(t);return n||(n=e(),Pw.set(t,n),Kb.add(n)),n}const qo=(t,e,n)=>{const i=Wc(e,n);i!==void 0&&t.add(i)};class hU{constructor(e){this._config=cU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=qb(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Hb(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Iu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Iu(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Iu(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Iu(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(h=>{e&&(l.add(e),h.forEach(d=>qo(l,e,d))),h.forEach(d=>qo(l,r,d)),h.forEach(d=>qo(l,Gr[s]||{},d)),h.forEach(d=>qo(l,Be,d)),h.forEach(d=>qo(l,Vp,d))});const u=Array.from(l);return u.length===0&&u.push(Object.create(null)),Kb.has(n)&&o.set(n,u),u}chartOptionScopes(){const{options:e,type:n}=this;return[e,Gr[n]||{},Be.datasets[n]||{},{type:n},Be,Vp]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=Rw(this._resolverCache,e,r);let l=o;if(fU(o,n)){s.$shared=!1,i=tr(i)?i():i;const u=this.createResolver(e,i,a);l=ro(o,i,u)}for(const u of n)s[u]=l[u];return s}createResolver(e,n,i=[""],r){const{resolver:s}=Rw(this._resolverCache,e,i);return me(n)?ro(s,n,void 0,r):s}}function Rw(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:Km(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const dU=t=>me(t)&&Object.getOwnPropertyNames(t).some(e=>tr(t[e]));function fU(t,e){const{isScriptable:n,isIndexable:i}=Pb(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(tr(a)||dU(a))||o&&it(a))return!0}return!1}var pU="4.5.1";const gU=["top","bottom","left","right","chartArea"];function Nw(t,e){return t==="top"||t==="bottom"||gU.indexOf(t)===-1&&e==="x"}function Dw(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function Mw(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Ce(n&&n.onComplete,[t],e)}function mU(t){const e=t.chart,n=e.options.animation;Ce(n&&n.onProgress,[t],e)}function Gb(t){return Ym()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Yu={},Ow=t=>{const e=Gb(t);return Object.values(Yu).filter(n=>n.canvas===e).pop()};function yU(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function _U(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var wi;let zh=(wi=class{static register(...e){xn.add(...e),Lw()}static unregister(...e){xn.remove(...e),Lw()}constructor(e,n){const i=this.config=new hU(n),r=Gb(e),s=Ow(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||L4(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,u=l&&l.height,h=l&&l.width;if(this.id=EF(),this.ctx=a,this.canvas=l,this.width=h,this.height=u,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new eU,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=zF(d=>this.update(d),o.resizeDelay||0),this._dataChanges=[],Yu[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}$n.listen(this,"complete",Mw),$n.listen(this,"progress",mU),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return xe(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return xn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():aw(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return rw(this.canvas,this.ctx),this}stop(){return $n.stop(this),this}resize(e,n){$n.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,aw(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Ce(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};ve(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Bp(o,a),u=l==="r",h=l==="x";return{options:a,dposition:u?"chartArea":h?"bottom":"left",dtype:u?"radialLinear":h?"category":"linear"}}))),ve(s,o=>{const a=o.options,l=a.id,u=Bp(l,a),h=ue(a.type,o.dtype);(a.position===void 0||Nw(a.position,u)!==Nw(o.dposition))&&(a.position=o.dposition),r[l]=!0;let d=null;if(l in i&&i[l].type===h)d=i[l];else{const f=xn.getScale(h);d=new f({id:l,type:h,ctx:this.ctx,chart:this}),i[d.id]=d}d.init(a,e)}),ve(r,(o,a)=>{o||delete i[a]}),ve(i,o=>{Li.configure(this,o,o.options),Li.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(Dw("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||Up(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=xn.getController(a),{datasetElementType:u,dataElementType:h}=Be.datasets[a];Object.assign(l,{dataElementType:xn.getElement(h),datasetElementType:u&&xn.getElement(u)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ve(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let u=0,h=this.data.datasets.length;u<h;u++){const{controller:d}=this.getDatasetMeta(u),f=!r&&s.indexOf(d)===-1;d.buildOrUpdateElements(f),o=Math.max(+d.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||ve(s,u=>{u.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Dw("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){ve(this.scales,e=>{Li.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!G0(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;yU(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!G0(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Li.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],ve(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,tr(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&($n.has(this)?this.attached&&!$n.running(this)&&$n.start(this):(this.draw(),Mw({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=Qj(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&Hm(n,r),e.controller.draw(),r&&qm(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return ll(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=g4.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=ns(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);Hc(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),$n.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),rw(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete Yu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};ve(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,u)=>{n.addEventListener(this,l,u),e[l]=u},r=(l,u)=>{e[l]&&(n.removeEventListener(this,l,u),delete e[l])},s=(l,u)=>{this.canvas&&this.resize(l,u)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){ve(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},ve(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const u=o&&this.getDatasetMeta(o.datasetIndex).controller;u&&u[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!zc(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,u)=>l.filter(h=>!u.some(d=>h.datasetIndex===d.datasetIndex&&h.index===d.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=kF(e),u=_U(e,this._lastEvent,i,l);i&&(this._lastEvent=null,Ce(s.onHover,[e,a,this],this),l&&Ce(s.onClick,[e,a,this],this));const h=!zc(a,r);return(h||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=u,h}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},ne(wi,"defaults",Be),ne(wi,"instances",Yu),ne(wi,"overrides",Gr),ne(wi,"registry",xn),ne(wi,"version",pU),ne(wi,"getChart",Ow),wi);function Lw(){return ve(zh.instances,t=>t._plugins.invalidate())}function Qb(t,e,n=e){t.lineCap=ue(n.borderCapStyle,e.borderCapStyle),t.setLineDash(ue(n.borderDash,e.borderDash)),t.lineDashOffset=ue(n.borderDashOffset,e.borderDashOffset),t.lineJoin=ue(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ue(n.borderWidth,e.borderWidth),t.strokeStyle=ue(n.borderColor,e.borderColor)}function vU(t,e,n){t.lineTo(n.x,n.y)}function wU(t){return t.stepped?nj:t.tension||t.cubicInterpolationMode==="monotone"?ij:vU}function Yb(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),u=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:u<l&&!h?i+u-l:u-l}}function EU(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:u}=Yb(r,n,i),h=wU(s);let{move:d=!0,reverse:f}=i||{},m,v,w;for(m=0;m<=u;++m)v=r[(a+(f?u-m:m))%o],!v.skip&&(d?(t.moveTo(v.x,v.y),d=!1):h(t,w,v,f,s.stepped),w=v);return l&&(v=r[(a+(f?u:0))%o],h(t,w,v,f,s.stepped)),!!l}function TU(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=Yb(r,n,i),{move:l=!0,reverse:u}=i||{};let h=0,d=0,f,m,v,w,E,T;const S=R=>(o+(u?a-R:R))%s,b=()=>{w!==E&&(t.lineTo(h,E),t.lineTo(h,w),t.lineTo(h,T))};for(l&&(m=r[S(0)],t.moveTo(m.x,m.y)),f=0;f<=a;++f){if(m=r[S(f)],m.skip)continue;const R=m.x,M=m.y,D=R|0;D===v?(M<w?w=M:M>E&&(E=M),h=(d*h+R)/++d):(b(),t.lineTo(R,M),v=D,d=0,w=E=M),T=M}b()}function zp(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?TU:EU}function SU(t){return t.stepped?Lj:t.tension||t.cubicInterpolationMode==="monotone"?Vj:Sr}function IU(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),Qb(t,e.options),t.stroke(r)}function xU(t,e,n,i){const{segments:r,options:s}=e,o=zp(e);for(const a of r)Qb(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const bU=typeof Path2D=="function";function kU(t,e,n,i){bU&&!e.options.segment?IU(t,e,n,i):xU(t,e,n,i)}class oa extends nr{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;Cj(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Hj(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=zj(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=SU(i);let u,h;for(u=0,h=o.length;u<h;++u){const{start:d,end:f}=o[u],m=s[d],v=s[f];if(m===v){a.push(m);continue}const w=Math.abs((r-m[n])/(v[n]-m[n])),E=l(m,v,w,i.stepped);E[n]=e[n],a.push(E)}return a.length===1?a[0]:a}pathSegment(e,n,i){return zp(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=zp(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),kU(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ne(oa,"id","line"),ne(oa,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ne(oa,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ne(oa,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Vw(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class Xu extends nr{constructor(n){super();ne(this,"parsed");ne(this,"skip");ne(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return Vw(this,n,"x",i)}inYRange(n,i){return Vw(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!ll(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,Fp(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}ne(Xu,"id","point"),ne(Xu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ne(Xu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Fw=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},CU=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class jw extends nr{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=Ce(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Dt(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=Fw(i,s);let u,h;n.font=r.string,this.isHorizontal()?(u=this.maxWidth,h=this._fitRows(o,s,a,l)+10):(h=this.maxHeight,u=this._fitCols(o,r,a,l)+10),this.width=Math.min(u,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.lineWidths=[0],h=r+a;let d=e;s.textAlign="left",s.textBaseline="middle";let f=-1,m=-h;return this.legendItems.forEach((v,w)=>{const E=i+n/2+s.measureText(v.text).width;(w===0||u[u.length-1]+E+2*a>o)&&(d+=h,u[u.length-(w>0?0:1)]=0,m+=h,f++),l[w]={left:0,top:m,row:f,width:E,height:r},u[u.length-1]+=E+a}),d}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],u=this.columnSizes=[],h=o-e;let d=a,f=0,m=0,v=0,w=0;return this.legendItems.forEach((E,T)=>{const{itemWidth:S,itemHeight:b}=AU(i,n,s,E,r);T>0&&m+b+2*a>h&&(d+=f+a,u.push({width:f,height:m}),v+=f+a,w++,f=m=0),l[T]={left:v,top:m,col:w,width:S,height:b},f=Math.max(f,S),m+=b+a}),d+=f,u.push({width:f,height:m}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Fs(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Ut(i,this.left+r,this.right-this.lineWidths[a]);for(const u of n)a!==u.row&&(a=u.row,l=Ut(i,this.left+r,this.right-this.lineWidths[a])),u.top+=this.top+e+r,u.left=o.leftForLtr(o.x(l),u.width),l+=u.width+r}else{let a=0,l=Ut(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const u of n)u.col!==a&&(a=u.col,l=Ut(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),u.top=l,u.left+=this.left+r,u.left=o.leftForLtr(o.x(u.left),u.width),l+=u.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Hm(e,this),this._draw(),qm(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Be.color,l=Fs(e.rtl,this.left,this.width),u=Dt(o.font),{padding:h}=o,d=u.size,f=d/2;let m;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=u.string;const{boxWidth:v,boxHeight:w,itemHeight:E}=Fw(o,d),T=function(D,I,_){if(isNaN(v)||v<=0||isNaN(w)||w<0)return;r.save();const k=ue(_.lineWidth,1);if(r.fillStyle=ue(_.fillStyle,a),r.lineCap=ue(_.lineCap,"butt"),r.lineDashOffset=ue(_.lineDashOffset,0),r.lineJoin=ue(_.lineJoin,"miter"),r.lineWidth=k,r.strokeStyle=ue(_.strokeStyle,a),r.setLineDash(ue(_.lineDash,[])),o.usePointStyle){const C={radius:w*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:k},P=l.xPlus(D,v/2),N=I+f;Cb(r,C,P,N,o.pointStyleWidth&&v)}else{const C=I+Math.max((d-w)/2,0),P=l.leftForLtr(D,v),N=ka(_.borderRadius);r.beginPath(),Object.values(N).some(A=>A!==0)?jp(r,{x:P,y:C,w:v,h:w,radius:N}):r.rect(P,C,v,w),r.fill(),k!==0&&r.stroke()}r.restore()},S=function(D,I,_){Kc(r,_.text,D,I+E/2,u,{strikethrough:_.hidden,textAlign:l.textAlign(_.textAlign)})},b=this.isHorizontal(),R=this._computeTitleHeight();b?m={x:Ut(s,this.left+h,this.right-i[0]),y:this.top+h+R,line:0}:m={x:this.left+h,y:Ut(s,this.top+R+h,this.bottom-n[0].height),line:0},Ob(this.ctx,e.textDirection);const M=E+h;this.legendItems.forEach((D,I)=>{r.strokeStyle=D.fontColor,r.fillStyle=D.fontColor;const _=r.measureText(D.text).width,k=l.textAlign(D.textAlign||(D.textAlign=o.textAlign)),C=v+f+_;let P=m.x,N=m.y;l.setWidth(this.width),b?I>0&&P+C+h>this.right&&(N=m.y+=M,m.line++,P=m.x=Ut(s,this.left+h,this.right-i[m.line])):I>0&&N+M>this.bottom&&(P=m.x=P+n[m.line].width+h,m.line++,N=m.y=Ut(s,this.top+R+h,this.bottom-n[m.line].height));const A=l.x(P);if(T(A,N,D),P=$F(k,P+v+f,b?P+C:this.right,e.rtl),S(l.x(P),N,D),b)m.x+=C+h;else if(typeof D.text!="string"){const re=u.lineHeight;m.y+=Xb(D,re)+h}else m.y+=M}),Lb(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Dt(n.font),r=_n(n.padding);if(!n.display)return;const s=Fs(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,u=r.top+l;let h,d=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),h=this.top+u,d=Ut(e.align,d,this.right-f);else{const v=this.columnSizes.reduce((w,E)=>Math.max(w,E.height),0);h=u+Ut(e.align,this.top,this.bottom-v-e.labels.padding-this._computeTitleHeight())}const m=Ut(a,d,d+f);o.textAlign=s.textAlign(xb(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,Kc(o,n.text,m,h,i)}_computeTitleHeight(){const e=this.options.title,n=Dt(e.font),i=_n(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if(ra(e,this.left,this.right)&&ra(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],ra(e,r.left,r.left+r.width)&&ra(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!NU(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=CU(r,i);r&&!s&&Ce(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Ce(n.onHover,[e,i,this],this)}else i&&Ce(n.onClick,[e,i,this],this)}}function AU(t,e,n,i,r){const s=PU(i,t,e,n),o=RU(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function PU(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function RU(t,e,n){let i=t;return typeof e.text!="string"&&(i=Xb(e,n)),i}function Xb(t,e){const n=t.text?t.text.length:0;return e*n}function NU(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var DU={id:"legend",_element:jw,start(t,e,n){const i=t.legend=new jw({ctx:t.ctx,options:n,chart:t});Li.configure(t,i,n),Li.addBox(t,i)},stop(t){Li.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Li.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const u=l.controller.getStyle(n?0:void 0),h=_n(u.borderWidth);return{text:e[l.index].label,fillStyle:u.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:u.borderCapStyle,lineDash:u.borderDash,lineDashOffset:u.borderDashOffset,lineJoin:u.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:u.borderColor,pointStyle:i||u.pointStyle,rotation:u.rotation,textAlign:r||u.textAlign,borderRadius:o&&(a||u.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const aa={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const u=l.getCenterPoint(),h=Lp(e,u);h<r&&(r=h,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Sn(t,e){return e&&(it(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Wn(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function MU(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function Uw(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Dt(e.bodyFont),u=Dt(e.titleFont),h=Dt(e.footerFont),d=s.length,f=r.length,m=i.length,v=_n(e.padding);let w=v.height,E=0,T=i.reduce((R,M)=>R+M.before.length+M.lines.length+M.after.length,0);if(T+=t.beforeBody.length+t.afterBody.length,d&&(w+=d*u.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),T){const R=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;w+=m*R+(T-m)*l.lineHeight+(T-1)*e.bodySpacing}f&&(w+=e.footerMarginTop+f*h.lineHeight+(f-1)*e.footerSpacing);let S=0;const b=function(R){E=Math.max(E,n.measureText(R).width+S)};return n.save(),n.font=u.string,ve(t.title,b),n.font=l.string,ve(t.beforeBody.concat(t.afterBody),b),S=e.displayColors?o+2+e.boxPadding:0,ve(i,R=>{ve(R.before,b),ve(R.lines,b),ve(R.after,b)}),S=0,n.font=h.string,ve(t.footer,b),n.restore(),E+=v.width,{width:E,height:w}}function OU(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function LU(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function VU(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let u="center";return i==="center"?u=r<=(a+l)/2?"left":"right":r<=s/2?u="left":r>=o-s/2&&(u="right"),LU(u,t,e,n)&&(u="center"),u}function Bw(t,e,n){const i=n.yAlign||e.yAlign||OU(t,n);return{xAlign:n.xAlign||e.xAlign||VU(t,e,n,i),yAlign:i}}function FU(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function jU(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function zw(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,u=r+s,{topLeft:h,topRight:d,bottomLeft:f,bottomRight:m}=ka(o);let v=FU(e,a);const w=jU(e,l,u);return l==="center"?a==="left"?v+=u:a==="right"&&(v-=u):a==="left"?v-=Math.max(h,f)+r:a==="right"&&(v+=Math.max(d,m)+r),{x:Jt(v,0,i.width-e.width),y:Jt(w,0,i.height-e.height)}}function xu(t,e,n){const i=_n(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function $w(t){return Sn([],Wn(t))}function UU(t,e,n){return ns(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function Ww(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Jb={beforeTitle:zn,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:zn,beforeBody:zn,beforeLabel:zn,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return xe(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:zn,afterBody:zn,beforeFooter:zn,footer:zn,afterFooter:zn};function Ct(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?Jb[e].call(n,i):r}class $p extends nr{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new Fb(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=UU(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=Ct(i,"beforeTitle",this,e),s=Ct(i,"title",this,e),o=Ct(i,"afterTitle",this,e);let a=[];return a=Sn(a,Wn(r)),a=Sn(a,Wn(s)),a=Sn(a,Wn(o)),a}getBeforeBody(e,n){return $w(Ct(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return ve(e,s=>{const o={before:[],lines:[],after:[]},a=Ww(i,s);Sn(o.before,Wn(Ct(a,"beforeLabel",this,s))),Sn(o.lines,Ct(a,"label",this,s)),Sn(o.after,Wn(Ct(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return $w(Ct(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=Ct(i,"beforeFooter",this,e),s=Ct(i,"footer",this,e),o=Ct(i,"afterFooter",this,e);let a=[];return a=Sn(a,Wn(r)),a=Sn(a,Wn(s)),a=Sn(a,Wn(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,u;for(l=0,u=n.length;l<u;++l)a.push(MU(this.chart,n[l]));return e.filter&&(a=a.filter((h,d,f)=>e.filter(h,d,f,i))),e.itemSort&&(a=a.sort((h,d)=>e.itemSort(h,d,i))),ve(a,h=>{const d=Ww(e.callbacks,h);r.push(Ct(d,"labelColor",this,h)),s.push(Ct(d,"labelPointStyle",this,h)),o.push(Ct(d,"labelTextColor",this,h))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=aa[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=Uw(this,i),u=Object.assign({},a,l),h=Bw(this.chart,i,u),d=zw(i,u,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,s={opacity:1,x:d.x,y:d.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:u,bottomLeft:h,bottomRight:d}=ka(a),{x:f,y:m}=e,{width:v,height:w}=n;let E,T,S,b,R,M;return s==="center"?(R=m+w/2,r==="left"?(E=f,T=E-o,b=R+o,M=R-o):(E=f+v,T=E+o,b=R-o,M=R+o),S=E):(r==="left"?T=f+Math.max(l,h)+o:r==="right"?T=f+v-Math.max(u,d)-o:T=this.caretX,s==="top"?(b=m,R=b-o,E=T-o,S=T+o):(b=m+w,R=b+o,E=T+o,S=T-o),M=b),{x1:E,x2:T,x3:S,y1:b,y2:R,y3:M}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const u=Fs(i.rtl,this.x,this.width);for(e.x=xu(this,i.titleAlign,i),n.textAlign=u.textAlign(i.titleAlign),n.textBaseline="middle",o=Dt(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],u.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:u}=s,h=Dt(s.bodyFont),d=xu(this,"left",s),f=r.x(d),m=l<h.lineHeight?(h.lineHeight-l)/2:0,v=n.y+m;if(s.usePointStyle){const w={radius:Math.min(u,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},E=r.leftForLtr(f,u)+u/2,T=v+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,Fp(e,w,E,T),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Fp(e,w,E,T)}else{e.lineWidth=me(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const w=r.leftForLtr(f,u),E=r.leftForLtr(r.xPlus(f,1),u-2),T=ka(o.borderRadius);Object.values(T).some(S=>S!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,jp(e,{x:w,y:v,w:u,h:l,radius:T}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),jp(e,{x:E,y:v+1,w:u-2,h:l-2,radius:T}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(w,v,u,l),e.strokeRect(w,v,u,l),e.fillStyle=o.backgroundColor,e.fillRect(E,v+1,u-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:u,boxPadding:h}=i,d=Dt(i.bodyFont);let f=d.lineHeight,m=0;const v=Fs(i.rtl,this.x,this.width),w=function(_){n.fillText(_,v.x(e.x+m),e.y+f/2),e.y+=f+s},E=v.textAlign(o);let T,S,b,R,M,D,I;for(n.textAlign=o,n.textBaseline="middle",n.font=d.string,e.x=xu(this,E,i),n.fillStyle=i.bodyColor,ve(this.beforeBody,w),m=a&&E!=="right"?o==="center"?u/2+h:u+2+h:0,R=0,D=r.length;R<D;++R){for(T=r[R],S=this.labelTextColors[R],n.fillStyle=S,ve(T.before,w),b=T.lines,a&&b.length&&(this._drawColorBox(n,e,R,v,i),f=Math.max(d.lineHeight,l)),M=0,I=b.length;M<I;++M)w(b[M]),f=d.lineHeight;ve(T.after,w)}m=0,f=d.lineHeight,ve(this.afterBody,w),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=Fs(i.rtl,this.x,this.width);for(e.x=xu(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=Dt(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:u,height:h}=i,{topLeft:d,topRight:f,bottomLeft:m,bottomRight:v}=ka(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+d,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+u-f,l),n.quadraticCurveTo(a+u,l,a+u,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+u,l+h-v),n.quadraticCurveTo(a+u,l+h,a+u-v,l+h),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+m,l+h),n.quadraticCurveTo(a,l+h,a,l+h-m),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+d),n.quadraticCurveTo(a,l,a+d,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=aa[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=Uw(this,e),l=Object.assign({},o,this._size),u=Bw(n,e,l),h=zw(e,l,u,n);(r._to!==h.x||s._to!==h.y)&&(this.xAlign=u.xAlign,this.yAlign=u.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=_n(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),Ob(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),Lb(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const u=this.chart.getDatasetMeta(a);if(!u)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:u.data[l],index:l}}),s=!zc(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!zc(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=aa[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}ne($p,"positioners",aa);var BU={id:"tooltip",_element:$p,positioners:aa,afterInit(t,e,n){n&&(t.tooltip=new $p({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Jb},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const zU=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function $U(t,e,n,i){const r=t.indexOf(e);if(r===-1)return zU(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const WU=(t,e)=>t===null?null:Jt(Math.round(t),0,e);function Hw(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Wp extends mo{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(xe(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:$U(i,e,ue(n,e),this._addedLabels),WU(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return Hw.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ne(Wp,"id","category"),ne(Wp,"defaults",{ticks:{callback:Hw}});function HU(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:u,maxTicks:h,maxDigits:d,includeBounds:f}=t,m=s||1,v=h-1,{min:w,max:E}=e,T=!xe(o),S=!xe(a),b=!xe(u),R=(E-w)/(d+1);let M=Y0((E-w)/v/m)*m,D,I,_,k;if(M<1e-14&&!T&&!S)return[{value:w},{value:E}];k=Math.ceil(E/M)-Math.floor(w/M),k>v&&(M=Y0(k*M/v/m)*m),xe(l)||(D=Math.pow(10,l),M=Math.ceil(M*D)/D),r==="ticks"?(I=Math.floor(w/M)*M,_=Math.ceil(E/M)*M):(I=w,_=E),T&&S&&s&&NF((a-o)/s,M/1e3)?(k=Math.round(Math.min((a-o)/M,h)),M=(a-o)/k,I=o,_=a):b?(I=T?o:I,_=S?a:_,k=u-1,M=(_-I)/k):(k=(_-I)/M,Ia(k,Math.round(k),M/1e3)?k=Math.round(k):k=Math.ceil(k));const C=Math.max(X0(M),X0(I));D=Math.pow(10,xe(l)?C:l),I=Math.round(I*D)/D,_=Math.round(_*D)/D;let P=0;for(T&&(f&&I!==o?(n.push({value:o}),I<o&&P++,Ia(Math.round((I+P*M)*D)/D,o,qw(o,R,t))&&P++):I<o&&P++);P<k;++P){const N=Math.round((I+P*M)*D)/D;if(S&&N>a)break;n.push({value:N})}return S&&f&&_!==a?n.length&&Ia(n[n.length-1].value,a,qw(a,R,t))?n[n.length-1].value=a:n.push({value:a}):(!S||_===a)&&n.push({value:_}),n}function qw(t,e,{horizontal:n,minRotation:i}){const r=Ar(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class qU extends mo{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return xe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=io(r),u=io(s);l<0&&u<0?a(0):l>0&&u>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=HU(r,s);return e.bounds==="ticks"&&DF(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return bb(e,this.chart.options.locale,this.options.ticks.format)}}class Hp extends qU{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=sn(e)?e:0,this.max=sn(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Ar(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ne(Hp,"id","linear"),ne(Hp,"defaults",{ticks:{callback:kb.formatters.numeric}});const $h={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Rt=Object.keys($h);function Kw(t,e){return t-e}function Gw(t,e){if(xe(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),sn(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(al(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function Qw(t,e,n,i){const r=Rt.length;for(let s=Rt.indexOf(t);s<r-1;++s){const o=$h[Rt[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return Rt[s]}return Rt[r-1]}function KU(t,e,n,i,r){for(let s=Rt.length-1;s>=Rt.indexOf(n);s--){const o=Rt[s];if($h[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return Rt[n?Rt.indexOf(n):0]}function GU(t){for(let e=Rt.indexOf(t)+1,n=Rt.length;e<n;++e)if($h[Rt[e]].common)return Rt[e]}function Yw(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=$m(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function QU(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function Xw(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:QU(t,i,r,n)}class Yc extends mo{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new c4._date(e.adapters.date);r.init(n),Sa(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:Gw(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(u){!o&&!isNaN(u.min)&&(r=Math.min(r,u.min)),!a&&!isNaN(u.max)&&(s=Math.max(s,u.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=sn(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=sn(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=jF(r,s,o);return this._unit=n.unit||(i.autoSkip?Qw(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):KU(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:GU(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),Xw(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=Jt(n,0,o),i=Jt(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||Qw(s.minUnit,n,i,this._getLabelCapacity(n)),a=ue(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,u=al(l)||l===!0,h={};let d=n,f,m;if(u&&(d=+e.startOf(d,"isoWeek",l)),d=+e.startOf(d,u?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const v=r.ticks.source==="data"&&this.getDataTimestamps();for(f=d,m=0;f<i;f=+e.add(f,a,o),m++)Yw(h,f,v);return(f===i||r.bounds==="ticks"||m===1)&&Yw(h,f,v),Object.keys(h).sort(Kw).map(w=>+w)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return Ce(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,u=this._majorUnit,h=l&&a[l],d=u&&a[u],f=i[n],m=u&&d&&f&&f.major;return this._adapter.format(e,r||(m?d:h))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Ar(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,Xw(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push(Gw(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return BF(e.sort(Kw))}}ne(Yc,"id","time"),ne(Yc,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function bu(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Pr(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Pr(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const u=o-s;return u?a+(l-a)*(e-s)/u:a}class Jw extends Yc{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=bu(n,this.min),this._tableRange=bu(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,u,h;for(o=0,a=e.length;o<a;++o)u=e[o],u>=n&&u<=i&&r.push(u);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],l=r[o-1],u=r[o],Math.round((h+l)/2)!==u&&s.push({time:u,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(bu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return bu(this._table,i*this._tableRange+this._minPos,!0)}}ne(Jw,"id","timeseries"),ne(Jw,"defaults",Yc.defaults);zh.register(oa,Xu,Hp,Wp,BU,DU);const Zb="label";function Zw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function YU(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function ek(t,e){t.labels=e}function tk(t,e,n=Zb){const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function XU(t,e=Zb){const n={labels:[],datasets:[]};return ek(n,t.labels),tk(n,t.datasets,e),n}function JU(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:u=[],fallbackContent:h,updateMode:d,...f}=t,m=O.useRef(null),v=O.useRef(null),w=()=>{m.current&&(v.current=new zh(m.current,{type:o,data:XU(a,s),options:l&&{...l},plugins:u}),Zw(e,v.current))},E=()=>{Zw(e,null),v.current&&(v.current.destroy(),v.current=null)};return O.useEffect(()=>{!r&&v.current&&l&&YU(v.current,l)},[r,l]),O.useEffect(()=>{!r&&v.current&&ek(v.current.config.data,a.labels)},[r,a.labels]),O.useEffect(()=>{!r&&v.current&&a.datasets&&tk(v.current.config.data,a.datasets,s)},[r,a.datasets]),O.useEffect(()=>{v.current&&(r?(E(),setTimeout(w)):v.current.update(d))},[r,l,a.labels,a.datasets,d]),O.useEffect(()=>{v.current&&(E(),setTimeout(w))},[o]),O.useEffect(()=>(w(),()=>E()),[]),y.jsx("canvas",{ref:m,role:"img",height:n,width:i,...f,children:h})}const ZU=O.forwardRef(JU);function e5(t,e){return zh.register(e),O.forwardRef((n,i)=>y.jsx(ZU,{...n,ref:i,type:t}))}const Zm=e5("line",Gu);function t5({derived:t}){const e=t.map(o=>o.dateIso),n=t.map(o=>o.weight),i=t.map(o=>{var a;return(a=o.wma)==null?void 0:a.weight}),r={labels:e,datasets:[{label:"Daily Weight (raw)",data:n,borderColor:"rgba(255,255,255,0.35)",borderWidth:1,pointRadius:0,tension:.25},{label:"Weight Trend (7-day WMA)",data:i,borderColor:"rgba(125,211,252,0.95)",borderWidth:3,pointRadius:0,tension:.25}]},s={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:o=>{var a,l;return`${o.dataset.label}: ${(l=(a=o.parsed.y)==null?void 0:a.toFixed)==null?void 0:l.call(a,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Weight Trend (Raw vs Smoothed)"}),y.jsx("div",{className:"chart-inner",children:y.jsx(Zm,{data:r,options:s})})]})}function n5({derived:t,liftNames:e}){const n=Array.isArray(e)&&e.length===3?e:["Bench Press","Squat","Deadlift"],i=t.map(u=>u.dateIso),r=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.bench}),s=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.squat}),o=t.map(u=>{var h;return(h=u.wma)==null?void 0:h.deadlift}),a={labels:i,datasets:[{label:`${n[0]} (7-day WMA)`,data:r,borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:`${n[1]} (7-day WMA)`,data:s,borderColor:"rgba(251,191,36,0.9)",borderWidth:2,pointRadius:0,tension:.25},{label:`${n[2]} (7-day WMA)`,data:o,borderColor:"rgba(147,197,253,0.95)",borderWidth:2,pointRadius:0,tension:.25}]},l={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}},tooltip:{callbacks:{label:u=>{var h,d;return`${u.dataset.label}: ${(d=(h=u.parsed.y)==null?void 0:h.toFixed)==null?void 0:d.call(h,1)} kg`}}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},y:{ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Strength Progress (Smoothed)"}),y.jsx("div",{className:"chart-inner",children:y.jsx(Zm,{data:a,options:l})})]})}function i5({derived:t}){const e=t.map(a=>a.dateIso),n=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.weight}),i=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.avgStrength}),r=t.map(a=>{var l;return(l=a.wma)==null?void 0:l.calories}),s={labels:e,datasets:[{label:"Weight (WMA)",data:n,yAxisID:"yLeft",borderColor:"rgba(125,211,252,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Avg Strength (WMA)",data:i,yAxisID:"yLeft",borderColor:"rgba(167,243,208,0.95)",borderWidth:2,pointRadius:0,tension:.25},{label:"Calories (WMA)",data:r,yAxisID:"yRight",borderColor:"rgba(251,191,36,0.95)",borderWidth:2,pointRadius:0,tension:.25}]},o={responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{labels:{color:"#e6eefc"}}},scales:{x:{ticks:{color:"#9bb0c9",maxTicksLimit:8},grid:{color:"rgba(255,255,255,0.06)"}},yLeft:{position:"left",ticks:{color:"#9bb0c9"},grid:{color:"rgba(255,255,255,0.06)"},title:{display:!0,text:"kg (weight / strength)",color:"#9bb0c9"}},yRight:{position:"right",ticks:{color:"#9bb0c9"},grid:{drawOnChartArea:!1},title:{display:!0,text:"kcal",color:"#9bb0c9"}}}};return y.jsxs("div",{className:"chart card",children:[y.jsx("div",{className:"card-title",children:"Weight + Strength vs Calories (Smoothed)"}),y.jsx("div",{className:"chart-inner",children:y.jsx(Zm,{data:s,options:o})})]})}function _r(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function r5(t){return Number.isFinite(t)?t<-10?"text-red":t<-5?"text-orange":"":""}function s5(t){return t==="Conservative"?"text-blue":t==="Optimal"?"text-green strong":t==="Aggressive"?"text-red strong":""}function o5({weekly:t}){var e;return(e=t==null?void 0:t.weeks)!=null&&e.length?y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Weekly Analysis"}),y.jsx("div",{className:"muted",children:"Appears once you have 14 days of data (2 full weeks)."})]}),y.jsx("div",{className:"table-wrap",style:{marginTop:12},children:y.jsxs("table",{className:"table",children:[y.jsx("thead",{children:y.jsxs("tr",{children:[y.jsx("th",{children:"Week #"}),y.jsx("th",{children:"Avg Calories"}),y.jsx("th",{children:"Weight Change (kg)"}),y.jsx("th",{children:"Calculated TDEE"}),y.jsx("th",{children:"TDEE "}),y.jsx("th",{children:"Adaptation %"}),y.jsx("th",{children:"LBM (kg)"}),y.jsx("th",{children:"Loss Rate vs LBM %"}),y.jsx("th",{children:"Status"})]})}),y.jsx("tbody",{children:t.weeks.map(n=>y.jsxs("tr",{children:[y.jsx("td",{children:n.week}),y.jsx("td",{children:_r(n.avgCalories,0)}),y.jsx("td",{children:_r(n.weightChange,2)}),y.jsx("td",{children:_r(n.tdee,0)}),y.jsx("td",{children:_r(n.tdeeChangeFromBaseline,0)}),y.jsx("td",{className:r5(n.adaptationPct),children:_r(n.adaptationPct,1)}),y.jsx("td",{children:_r(n.lbm,1)}),y.jsx("td",{children:_r(n.lossRatePct,2)}),y.jsx("td",{className:s5(n.lossRateStatus),children:n.lossRateStatus})]},n.week))})]})}),y.jsxs("div",{className:"notice info",style:{marginTop:12},children:[y.jsx("div",{children:y.jsx("b",{children:"How to read this:"})}),y.jsxs("div",{className:"small",style:{marginTop:6,lineHeight:1.4},children:[y.jsxs("div",{children:[y.jsx("b",{children:"Calculated TDEE"})," is derived from observed weekly trend weight change: (kg  7700)  daily deficit  daily deficit + avg calories."]}),y.jsxs("div",{children:[y.jsx("b",{children:"Metabolic adaptation"})," compares each weeks TDEE to your baseline (avg of first 2 weeks). Negative % indicates slowdown."]}),y.jsxs("div",{children:[y.jsx("b",{children:"Loss rate vs LBM"})," = weekly loss / current LBM. Target ",y.jsx("b",{children:"0.51.0%"})," weekly for best muscle retention odds."]})]})]})]}):null}function St(t,e=0){return Number.isFinite(t)?t.toFixed(e):""}function eE(t,e=50){return Number.isFinite(t)?Math.round(t/e)*e:null}function tE(t,e){const n=Mp(t).getTime(),i=Mp(e).getTime();return Math.round((n-i)/(1e3*60*60*24))}function nE(t){const e=t.map(Number).filter(Number.isFinite);return e.length?e.reduce((n,i)=>n+i,0)/e.length:null}function a5(t){return t==="good"?"good":t==="warn"?"warn":t==="bad"?"bad":"info"}function l5({derived:t,weekly:e,profile:n}){const i=O.useMemo(()=>{var S,b,R,M;if(!(t!=null&&t.length))return[];const r=t[t.length-1],s=r.dateIso,o=(S=e==null?void 0:e.weeks)!=null&&S.length?e.weeks[e.weeks.length-1]:null,a=e==null?void 0:e.baselineTdee,l=e==null?void 0:e.baselineStrength,u=e==null?void 0:e.baselineWeeklyLoss,h=t.filter(D=>{const I=tE(s,D.dateIso);return I>=0&&I<=6}),d=h.length,f=nE(h.map(D=>D.protein)),m=nE(h.map(D=>D.calories)),v=Number.isFinite((b=r==null?void 0:r.wma)==null?void 0:b.weight)?r.wma.weight:r.weight,w=[];if(o&&Number.isFinite(a)&&Number.isFinite(o.tdee)&&Number.isFinite(o.adaptationPct)){const D=Math.max(0,-o.adaptationPct);let I="good";D>=10?I="bad":D>=5&&(I="warn");const _=o.adaptationPct<0?"dropped":"increased",k=`${St(Math.abs(o.adaptationPct),0)}%`;w.push({key:"adaptation",level:I,title:"Metabolic adaptation",message:`Your TDEE has ${_} ${k} from baseline (${St(a,0)}  ${St(o.tdee,0)} kcal).`,action:I!=="good"?"Consider a refeed day or reducing training volume.":null})}if(o&&Number.isFinite(o.lossRatePct)){const D=String(o.lossRateStatus||"").toUpperCase();let I="info";o.lossRateStatus==="Optimal"&&(I="good"),o.lossRateStatus==="Aggressive"&&(I="bad");const _=o.lossRateStatus==="Aggressive"?"Risk of muscle loss.":o.lossRateStatus==="Conservative"?"Consider increasing deficit slightly.":"Optimal pace.";w.push({key:"lossrate",level:I,title:"Loss rate vs LBM",message:`This week: ${St(o.lossRatePct,1)}% of LBM lost  ${D}. ${_}`,action:null})}if(o&&Number.isFinite(l)&&Number.isFinite(o.avgStrengthWma)){const D=(o.avgStrengthWma-l)/l*100;let I="good",_="",k="Strength maintained/increasing.",C=null;D<-7.5?(I="bad",_="",k="Strength declining significantly.",C="Consider eating more or reducing cardio."):D<-5&&(I="warn",_="",k="Strength declining.",C="Consider eating more or reducing cardio."),w.push({key:"strength",level:I,title:"Strength trend",message:`${k} ${_} (${St(D,1)}% vs baseline)`,action:C})}if(o&&Number.isFinite(o.tdee)&&Number.isFinite(o.lbm)){const D=o.lbm,I=.005*D,_=.01*D,k=I*7700/7,C=_*7700/7,P=o.tdee-k,N=o.tdee-C,A=eE(Math.min(N,P),50),re=eE(Math.max(N,P),50);w.push({key:"calrec",level:"info",title:"Weekly calorie target",message:`To maintain an optimal loss rate, target about ${A}-${re} kcal/day this week.`,action:null})}d<6&&w.push({key:"completeness",level:"warn",title:"Data completeness",message:`${d}/7 days logged this week  missing data may affect accuracy.`,action:null});let E=null;for(let D=t.length-1;D>=0;D--)if(Number.isFinite((R=t[D])==null?void 0:R.bfPct)){E=t[D].dateIso;break}if(!E)w.push({key:"navy",level:"info",title:"Navy method",message:"No measurements logged yet  take your first set this week for BF% + LBM tracking.",action:null});else{const D=tE(s,E);D>=7?w.push({key:"navy",level:"warn",title:"Navy method",message:"Take measurements this week (last set is 7+ days old).",action:null}):w.push({key:"navy",level:"info",title:"Navy method",message:`Next measurements due in ${7-D} day(s).`,action:null})}if(Number.isFinite(f)&&Number.isFinite(v)){const D=1.6*v,I=2.2*v;if(f<D){const _=(D-f)/D*100;w.push({key:"protein",level:"warn",title:"Protein adequacy",message:`Your protein is ${St(_,0)}% below the muscle-retention range (${St(f,0)}g/day vs ${St(D,0)}g/day).`,action:"Aim for 1.62.2g/kg bodyweight/day to support muscle retention."})}else f>I?w.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is strong (${St(f,0)}g/day).`,action:null}):w.push({key:"protein",level:"good",title:"Protein adequacy",message:`Protein is on target (${St(f,0)}g/day).`,action:null})}if(o&&Number.isFinite(u)&&Number.isFinite(o.weightChange)){const D=Math.max(0,-o.weightChange),I=u;(D<.2||I>.2&&D<I*.35)&&w.push({key:"stall",level:"warn",title:"Trend direction",message:`Weight loss may be stalling (${St(D,1)}kg this week vs ${St(I,1)}kg baseline).`,action:"Time to reduce calories by ~100150/day (or add a small activity increase)."})}const T=Number(n==null?void 0:n.targetWeight);if(Number.isFinite(T)&&Number.isFinite((M=t[0])==null?void 0:M.weight)&&Number.isFinite(v)){const D=t[0].weight;if(D>T){const I=D-v,_=D-T,k=Math.max(0,Math.min(1,I/_))*100,C=Math.floor(I/5)*5;C>=5&&w.push({key:"milestone",level:"good",title:"Progress milestone",message:`${St(C,0)}kg down! Youre ${St(k,0)}% to your goal.`,action:null})}}return o||(w.unshift({key:"needs14",level:"info",title:"Insights need trend data",message:"Log at least 14 days to unlock weekly TDEE, adaptation, and loss-rate insights.",action:null}),Number.isFinite(m)&&w.push({key:"cal7",level:"info",title:"Last 7 days",message:`Average calories: ${St(m,0)} kcal/day.`,action:null})),w},[t,e,n]);return i.length?y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Insights"}),y.jsx("div",{className:"muted",children:"Short, actionable signals from your last 7 days + weekly trends."})]}),y.jsx("div",{className:"grid",style:{marginTop:12},children:i.map(r=>y.jsxs("div",{className:`card insight-card ${a5(r.level)}`,style:{gridColumn:"span 6"},children:[y.jsx("div",{className:"insight-title",children:r.title}),y.jsx("div",{style:{marginTop:6,lineHeight:1.35},children:r.message}),r.action&&y.jsx("div",{className:"small",style:{marginTop:8},children:r.action})]},r.key))})]}):null}function vi(t,e=1){return Number.isFinite(t)?t.toFixed(e):""}function nk({view:t="dashboard"}){const{user:e}=fi(),{profile:n}=Vm(),i=Array.isArray(n==null?void 0:n.liftNames)&&n.liftNames.length===3?n.liftNames:["Bench Press","Squat","Deadlift"],[r,s]=O.useState([]),[o,a]=O.useState(null);O.useEffect(()=>{if(a(null),!e)return;const w=Fm(e.uid,E=>s(E),E=>a((E==null?void 0:E.message)||"Failed to load entries."));return()=>w()},[e]);const l=O.useMemo(()=>XV(),[]),u=O.useMemo(()=>JV(60),[]),h=e?n:l,d=e?r:u,f=O.useMemo(()=>gb(d,h||{}),[d,h]),m=O.useMemo(()=>YV(f),[f]),v=O.useMemo(()=>{var C;if(!f.length)return null;const w=f[0],E=f[f.length-1],T=(C=E==null?void 0:E.wma)==null?void 0:C.weight,S=Number.isFinite(w.weight)&&Number.isFinite(E.weight)?E.weight-w.weight:null,b=E.calories,R=w.calories,M=Number.isFinite(b)&&Number.isFinite(R)?b-R:null,D=E.avgStrength,I=w.avgStrength,_=Number.isFinite(D)&&Number.isFinite(I)?D-I:null;let k=null;for(let P=f.length-1;P>=0;P--)if(Number.isFinite(f[P].bfPct)){k=f[P].bfPct;break}return{weightTrend:T,totalLost:S,calNow:b,calDelta:M,strengthNow:D,strengthDelta:_,bf:k}},[f]);return y.jsxs(y.Fragment,{children:[!e&&y.jsxs("div",{className:"notice info",style:{marginTop:14},children:[y.jsx("b",{children:"Demo mode:"})," This dashboard is showing 60 days of realistic sample data. Log in to start tracking your own."]}),e&&(!(h!=null&&h.sex)||!(h!=null&&h.height))&&y.jsxs("div",{className:"notice error",style:{marginTop:14},children:["Your profile is incomplete. Go to ",y.jsx("b",{children:"Profile"})," and set sex + height for accurate Navy BF% calculations."]}),o&&y.jsx("div",{className:"notice error",style:{marginTop:14},children:o}),t==="insights"&&y.jsx(l5,{derived:f,weekly:m,profile:h||{}}),y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Summary"}),y.jsx("div",{className:"muted",children:"Trend over noise. Weekly reality checks. No guesswork."})]}),!v||!f.length?y.jsxs("div",{className:"muted",style:{marginTop:10},children:["No data yet. Add your first entry in ",y.jsx("b",{children:"Entry"}),"."]}):y.jsxs("div",{className:"grid",style:{marginTop:12},children:[y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Current weight trend (WMA)"}),y.jsxs("div",{className:"big",children:[vi(v.weightTrend,1)," kg"]}),y.jsx("div",{className:"small",children:"Smoothed 7-day exponential"})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Total weight change"}),y.jsxs("div",{className:"big",children:[vi(v.totalLost,1)," kg"]}),y.jsx("div",{className:"small",children:"Negative = loss"})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Calories now / change from start"}),y.jsxs("div",{className:"big",children:[vi(v.calNow,0)," kcal"]}),y.jsxs("div",{className:"small",children:[" ",vi(v.calDelta,0)," kcal"]})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Average strength now"}),y.jsxs("div",{className:"big",children:[vi(v.strengthNow,1)," kg"]}),y.jsxs("div",{className:"small",children:[" ",vi(v.strengthDelta,1)," kg"]})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Estimated body fat (Navy)"}),y.jsx("div",{className:"big",children:v.bf===null?"":`${vi(v.bf,1)}%`}),y.jsx("div",{className:"small",children:"Most recent measurement day"})]}),y.jsxs("div",{className:"card",style:{gridColumn:"span 4"},children:[y.jsx("div",{className:"card-title",children:"Baseline TDEE (first 2 weeks)"}),y.jsx("div",{className:"big",children:Number.isFinite(m.baselineTdee)?`${vi(m.baselineTdee,0)} kcal`:""}),y.jsx("div",{className:"small",children:"Computed from observed trends"})]})]})]}),f.length>0&&y.jsxs("div",{className:"grid",style:{marginTop:14},children:[y.jsx("div",{style:{gridColumn:"span 12"},children:y.jsx(t5,{derived:f})}),y.jsx("div",{style:{gridColumn:"span 12"},children:y.jsx(n5,{derived:f,liftNames:i})}),y.jsx("div",{style:{gridColumn:"span 12"},children:y.jsx(i5,{derived:f})})]}),f.length>=14&&y.jsx(o5,{weekly:m})]})}function u5(){return y.jsx(nk,{view:"insights"})}function c5(){const{user:t,login:e,authError:n,clearAuthError:i}=fi(),r=gl(),s=Xr(),[o,a]=O.useState(""),[l,u]=O.useState(""),[h,d]=O.useState(!1),[f,m]=O.useState(null);O.useEffect(()=>{i==null||i()},[]),O.useEffect(()=>{t&&r("/dashboard")},[t]);async function v(w){var E;w.preventDefault(),m(null),d(!0);try{await e(o.trim(),l);const T=((E=s.state)==null?void 0:E.from)||"/dashboard";r(T)}catch{}finally{d(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Log in"}),y.jsx("div",{className:"muted",children:"Email/password only."})]}),n&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:n}),f&&y.jsx("div",{className:"notice info",style:{marginTop:12},children:f}),y.jsxs("form",{onSubmit:v,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:o,onChange:w=>a(w.target.value),type:"email",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Password"}),y.jsx("input",{value:l,onChange:w=>u(w.target.value),type:"password",required:!0})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:h,children:h?"Logging in":"Log in"}),y.jsx(Ga,{className:"btn",to:"/reset-password",children:"Forgot password"}),y.jsx(Ga,{className:"btn",to:"/signup",children:"Create account"})]})]})]})}function h5(){const{signup:t,authError:e,clearAuthError:n}=fi(),i=gl(),[r,s]=O.useState(""),[o,a]=O.useState(""),[l,u]=O.useState(""),[h,d]=O.useState(!1),[f,m]=O.useState(null);O.useEffect(()=>{n==null||n()},[]);async function v(w){if(w.preventDefault(),m(null),o!==l){m({type:"error",text:"Passwords do not match."});return}d(!0);try{await t(r.trim(),o),i("/profile?setup=1")}catch{}finally{d(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Create account"}),y.jsx("div",{className:"muted",children:"Youll set sex + height next."})]}),e&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),f&&y.jsx("div",{className:`notice ${f.type==="error"?"error":"info"}`,style:{marginTop:12},children:f.text}),y.jsxs("form",{onSubmit:v,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:r,onChange:w=>s(w.target.value),type:"email",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Password"}),y.jsx("input",{value:o,onChange:w=>a(w.target.value),type:"password",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Confirm password"}),y.jsx("input",{value:l,onChange:w=>u(w.target.value),type:"password",required:!0})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:h,children:h?"Creating":"Sign up"}),y.jsx(Ga,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function d5(){const{resetPassword:t,authError:e,clearAuthError:n}=fi(),[i,r]=O.useState(""),[s,o]=O.useState(!1),[a,l]=O.useState(!1);O.useEffect(()=>{n==null||n()},[]);async function u(h){h.preventDefault(),o(!0),l(!1);try{await t(i.trim()),l(!0)}finally{o(!1)}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Reset password"}),y.jsx("div",{className:"muted",children:"Well email you a reset link."})]}),e&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:e}),a&&y.jsx("div",{className:"notice success",style:{marginTop:12},children:"Reset email sent. Check your inbox."}),y.jsxs("form",{onSubmit:u,style:{marginTop:12},children:[y.jsx("div",{className:"row",children:y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Email"}),y.jsx("input",{value:i,onChange:h=>r(h.target.value),type:"email",required:!0})]})}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:s,children:s?"Sending":"Send reset email"}),y.jsx(Ga,{className:"btn",to:"/login",children:"Back to login"})]})]})]})}function f5(t){if(t==null)return"";const e=String(t);return/[",\n]/.test(e)?`"${e.replace(/"/g,'""')}"`:e}function p5(t,e){const n=e.map(o=>o.map(f5).join(",")).join(`
`),i=new Blob([n],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(r)}function g5({entries:t,derived:e}){var s,o,a,l,u,h;const n=["dateIso","weightKg","proteinG","carbsG","fatsG","benchKg","squatKg","deadliftKg","calories","avgStrength","wmaWeight","wmaCalories","wmaAvgStrength","wmaBench","wmaSquat","wmaDeadlift","neck","waist","hip","neck1","neck2","neck3","waist1","waist2","waist3","hip1","hip2","hip3","bodyFatPct","lbmKg"],i=new Map((e||[]).map(d=>[d.dateIso,d])),r=[n];for(const d of t||[]){const f=i.get(d.dateIso);r.push([d.dateIso,d.weight,d.protein,d.carbs,d.fats,d.bench,d.squat,d.deadlift,f==null?void 0:f.calories,f==null?void 0:f.avgStrength,(s=f==null?void 0:f.wma)==null?void 0:s.weight,(o=f==null?void 0:f.wma)==null?void 0:o.calories,(a=f==null?void 0:f.wma)==null?void 0:a.avgStrength,(l=f==null?void 0:f.wma)==null?void 0:l.bench,(u=f==null?void 0:f.wma)==null?void 0:u.squat,(h=f==null?void 0:f.wma)==null?void 0:h.deadlift,d.neck,d.waist,d.hip,d.neck1,d.neck2,d.neck3,d.waist1,d.waist2,d.waist3,d.hip1,d.hip2,d.hip3,f==null?void 0:f.bfPct,f==null?void 0:f.lbm])}return r}function m5(){var he,te,fe;const{user:t}=fi(),{profile:e,updateProfile:n,loading:i,profileError:r}=Vm(),[s,o]=O.useState(e.sex||""),[a,l]=O.useState(e.height||""),[u,h]=O.useState(e.targetWeight??""),[d,f]=O.useState(!!e.triplemeasurements),[m,v]=O.useState(((he=e.liftNames)==null?void 0:he[0])||"Bench Press"),[w,E]=O.useState(((te=e.liftNames)==null?void 0:te[1])||"Squat"),[T,S]=O.useState(((fe=e.liftNames)==null?void 0:fe[2])||"Deadlift"),[b,R]=O.useState(!1),[M,D]=O.useState(null),[I,_]=O.useState(""),[k,C]=O.useState(""),[P,N]=O.useState(""),[A,re]=O.useState([]),[ce,_e]=O.useState(!1);Jc.useEffect(()=>{o(e.sex||""),l(e.height||""),h(e.targetWeight??""),f(!!e.triplemeasurements)},[e.sex,e.height,e.targetWeight,e.triplemeasurements]);async function Se(H){H.preventDefault(),D(null),R(!0);try{const oe=Number(a);if(!s)throw new Error("Sex is required.");if(!Number.isFinite(oe)||oe<=0)throw new Error("Height must be a positive number (cm).");let ye=null;if(String(u).trim()!==""&&(ye=Number(u),!Number.isFinite(ye)||ye<=0))throw new Error("Target weight must be a positive number (kg).");await n({sex:s,height:oe,targetWeight:ye,triplemeasurements:!!d}),D({type:"success",text:"Profile saved."})}catch(oe){D({type:"error",text:(oe==null?void 0:oe.message)||"Failed to save profile."})}finally{R(!1)}}async function B(H){if(H.preventDefault(),D(null),!!(t!=null&&t.email)){if(k!==P){D({type:"error",text:"New passwords do not match."});return}R(!0);try{const oe=Zr.credential(t.email,I);await $N(t,oe),await KN(t,k),_(""),C(""),N(""),D({type:"success",text:"Password updated."})}catch(oe){D({type:"error",text:(oe==null?void 0:oe.message)||"Failed to update password."})}finally{R(!1)}}}async function q(){if(!ce)return new Promise((H,oe)=>{const ye=Fm(t.uid,wt=>{re(wt),_e(!0),ye(),H()},wt=>{oe(wt)})})}async function K(){D(null),R(!0);try{await q();const H=gb(A,{...e,sex:s,height:Number(a),triplemeasurements:!!d}),oe=g5({entries:A,derived:H}),ye=`body-recomp-${t.uid}-${new Date().toISOString().slice(0,10)}.csv`;p5(ye,oe),D({type:"success",text:"CSV downloaded."})}catch(H){D({type:"error",text:(H==null?void 0:H.message)||"Failed to export CSV."})}finally{R(!1)}}return y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Profile & Settings"}),y.jsx("div",{className:"muted",children:(t==null?void 0:t.email)||""})]}),r&&y.jsx("div",{className:"notice error",style:{marginTop:12},children:r}),M&&y.jsx("div",{className:`notice ${M.type==="error"?"error":"success"}`,style:{marginTop:12},children:M.text}),y.jsxs("form",{onSubmit:Se,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Sex (required for Navy BF%)"}),y.jsxs("select",{value:s,onChange:H=>o(H.target.value),required:!0,children:[y.jsx("option",{value:"",children:"Select"}),y.jsx("option",{value:"male",children:"Male"}),y.jsx("option",{value:"female",children:"Female"})]})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Height (cm)"}),y.jsx("input",{inputMode:"numeric",value:a,onChange:H=>l(H.target.value),placeholder:"e.g. 175",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Target weight (kg) (optional)"}),y.jsx("input",{inputMode:"numeric",value:u,onChange:H=>h(H.target.value),placeholder:"e.g. 82"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Triple measurements mode"}),y.jsxs("select",{value:d?"1":"0",onChange:H=>f(H.target.value==="1"),children:[y.jsx("option",{value:"0",children:"Off (single value per site)"}),y.jsx("option",{value:"1",children:"On (up to 3 readings per site)"})]})]}),y.jsxs("div",{className:"grid",style:{marginTop:12},children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 1 name"}),y.jsx("input",{value:m,onChange:H=>v(H.target.value),placeholder:"Bench Press"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 2 name"}),y.jsx("input",{value:w,onChange:H=>E(H.target.value),placeholder:"Squat"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 3 name"}),y.jsx("input",{value:T,onChange:H=>S(H.target.value),placeholder:"Deadlift"})]})]})]}),y.jsxs("div",{className:"footer-actions",children:[y.jsx("button",{className:"btn primary",disabled:b||i,children:b?"Saving":"Save profile"}),y.jsx("button",{className:"btn",type:"button",onClick:K,disabled:b,children:"Export CSV"})]})]})]}),y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Change Password"}),y.jsx("div",{className:"muted",children:"Re-auth required."})]}),y.jsxs("form",{onSubmit:B,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Current password"}),y.jsx("input",{type:"password",value:I,onChange:H=>_(H.target.value),required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"New password"}),y.jsx("input",{type:"password",value:k,onChange:H=>C(H.target.value),required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Confirm new password"}),y.jsx("input",{type:"password",value:P,onChange:H=>N(H.target.value),required:!0})]}),y.jsxs("div",{className:"grid",style:{marginTop:12},children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 1 name"}),y.jsx("input",{value:m,onChange:H=>v(H.target.value),placeholder:"Bench Press"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 2 name"}),y.jsx("input",{value:w,onChange:H=>E(H.target.value),placeholder:"Squat"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Lift 3 name"}),y.jsx("input",{value:T,onChange:H=>S(H.target.value),placeholder:"Deadlift"})]})]})]}),y.jsx("div",{className:"footer-actions",children:y.jsx("button",{className:"btn primary",disabled:b,children:"Update password"})})]})]})]})}function hf(t){if(t===""||t===null||t===void 0)return"";const e=Number(t);return Number.isFinite(e)?e:""}function y5({tripleEnabled:t,liftNames:e,onSubmit:n,busy:i}){const[r,s]=O.useState(UV()),[o,a]=O.useState(""),[l,u]=O.useState(""),[h,d]=O.useState(""),[f,m]=O.useState(""),[v,w]=O.useState(""),[E,T]=O.useState(""),[S,b]=O.useState(""),[R,M]=O.useState(""),[D,I]=O.useState(""),[_,k]=O.useState(""),[C,P]=O.useState(""),[N,A]=O.useState(""),[re,ce]=O.useState(""),[_e,Se]=O.useState(""),[B,q]=O.useState(""),[K,he]=O.useState(""),[te,fe]=O.useState(""),[H,oe]=O.useState(""),[ye,wt]=O.useState(""),yo=Array.isArray(e)&&e.length===3?e:["Bench Press","Squat","Deadlift"],Wh=O.useMemo(()=>{const Y=pb({protein:hf(l)||0,carbs:hf(h)||0,fats:hf(f)||0});return Number.isFinite(Y)?Math.round(Y):0},[l,h,f]),ur=()=>r&&Number.isFinite(Number(o))&&Number.isFinite(Number(l))&&Number.isFinite(Number(h))&&Number.isFinite(Number(f));async function is(Y){if(Y.preventDefault(),!ur())return;const Je={dateIso:r,weight:Number(o),protein:Number(l),carbs:Number(h),fats:Number(f),bench:v===""?null:Number(v),squat:E===""?null:Number(E),deadlift:S===""?null:Number(S)};t?(Je.neck1=C===""?null:Number(C),Je.neck2=N===""?null:Number(N),Je.neck3=re===""?null:Number(re),Je.waist1=_e===""?null:Number(_e),Je.waist2=B===""?null:Number(B),Je.waist3=K===""?null:Number(K),Je.hip1=te===""?null:Number(te),Je.hip2=H===""?null:Number(H),Je.hip3=ye===""?null:Number(ye)):(Je.neck=R===""?null:Number(R),Je.waist=D===""?null:Number(D),Je.hip=_===""?null:Number(_)),await n(Je)}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"Daily Entry"}),y.jsxs("div",{className:"muted",children:["Calories preview: ",y.jsx("b",{children:Wh})," kcal"]})]}),y.jsxs("form",{onSubmit:is,style:{marginTop:12},children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Date"}),y.jsx("input",{type:"date",value:r,onChange:Y=>s(Y.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Weight (kg)"}),y.jsx("input",{inputMode:"decimal",value:o,onChange:Y=>a(Y.target.value),placeholder:"e.g. 85.2",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Protein (g)"}),y.jsx("input",{inputMode:"numeric",value:l,onChange:Y=>u(Y.target.value),placeholder:"e.g. 180"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Carbs (g)"}),y.jsx("input",{inputMode:"numeric",value:h,onChange:Y=>d(Y.target.value),placeholder:"e.g. 220",required:!0})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Fats (g)"}),y.jsx("input",{inputMode:"numeric",value:f,onChange:Y=>m(Y.target.value),placeholder:"e.g. 70",required:!0})]})]}),y.jsx("hr",{className:"sep"}),y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[yo[0]," (kg) ",y.jsx("span",{className:"muted",children:"(optional)"})]}),y.jsx("input",{inputMode:"decimal",value:v,onChange:Y=>w(Y.target.value),placeholder:"e.g. 100"})]}),y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[yo[1]," (kg) ",y.jsx("span",{className:"muted",children:"(optional)"})]}),y.jsx("input",{inputMode:"decimal",value:E,onChange:Y=>T(Y.target.value),placeholder:"e.g. 140"})]}),y.jsxs("div",{className:"field",children:[y.jsxs("label",{children:[yo[2]," (kg) ",y.jsx("span",{className:"muted",children:"(optional)"})]}),y.jsx("input",{inputMode:"decimal",value:S,onChange:Y=>b(Y.target.value),placeholder:"e.g. 180"})]})]}),y.jsx("hr",{className:"sep"}),y.jsxs("div",{className:"notice info",children:[y.jsx("b",{children:"Navy measurements (weekly)"}),y.jsxs("div",{className:"small",style:{marginTop:6},children:["Optional. Leave blank on non-measurement days.",t?" Triple mode is ON: enter up to 3 readings per site; averages are used.":""]})]}),y.jsx("div",{style:{height:10}}),t?y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 1 (cm)"}),y.jsx("input",{inputMode:"decimal",value:C,onChange:Y=>P(Y.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 2 (cm)"}),y.jsx("input",{inputMode:"decimal",value:N,onChange:Y=>A(Y.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck 3 (cm)"}),y.jsx("input",{inputMode:"decimal",value:re,onChange:Y=>ce(Y.target.value)})]})]}),y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 1 (cm)"}),y.jsx("input",{inputMode:"decimal",value:_e,onChange:Y=>Se(Y.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 2 (cm)"}),y.jsx("input",{inputMode:"decimal",value:B,onChange:Y=>q(Y.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist 3 (cm)"}),y.jsx("input",{inputMode:"decimal",value:K,onChange:Y=>he(Y.target.value)})]})]}),y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 1 (cm)"}),y.jsx("input",{inputMode:"decimal",value:te,onChange:Y=>fe(Y.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 2 (cm)"}),y.jsx("input",{inputMode:"decimal",value:H,onChange:Y=>oe(Y.target.value)})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip 3 (cm)"}),y.jsx("input",{inputMode:"decimal",value:ye,onChange:Y=>wt(Y.target.value)})]})]})]}):y.jsxs("div",{className:"row",children:[y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Neck (cm)"}),y.jsx("input",{inputMode:"decimal",value:R,onChange:Y=>M(Y.target.value),placeholder:"optional"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Waist (cm)"}),y.jsx("input",{inputMode:"decimal",value:D,onChange:Y=>I(Y.target.value),placeholder:"optional"})]}),y.jsxs("div",{className:"field",children:[y.jsx("label",{children:"Hip (cm)"}),y.jsx("input",{inputMode:"decimal",value:_,onChange:Y=>k(Y.target.value),placeholder:"optional"})]})]}),y.jsx("div",{className:"footer-actions",children:y.jsx("button",{className:"btn primary",type:"submit",disabled:!ur()||i,children:i?"Saving":"Add / Update Entry"})})]})]})}function _5(t){return t==null?"":String(t)}function v5(t){if(t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null}function w5({userId:t,entries:e,tripleEnabled:n,liftNames:i}){const[r,s]=O.useState(!1),o=Array.isArray(i)&&i.length===3?i:["Bench Press","Squat","Deadlift"],[a,l]=O.useState(null),u=O.useMemo(()=>{const f=[{key:"dateIso",label:"Date",readOnly:!0},{key:"weight",label:"Weight"},{key:"protein",label:"Protein"},{key:"carbs",label:"Carbs"},{key:"fats",label:"Fats"},{key:"bench",label:o[0]},{key:"squat",label:o[1]},{key:"deadlift",label:o[2]}];return n?f.push({key:"neck1",label:"Neck1"},{key:"neck2",label:"Neck2"},{key:"neck3",label:"Neck3"},{key:"waist1",label:"Waist1"},{key:"waist2",label:"Waist2"},{key:"waist3",label:"Waist3"},{key:"hip1",label:"Hip1"},{key:"hip2",label:"Hip2"},{key:"hip3",label:"Hip3"}):f.push({key:"neck",label:"Neck"},{key:"waist",label:"Waist"},{key:"hip",label:"Hip"}),f.push({key:"_actions",label:"Actions",readOnly:!0}),f},[n,i]);async function h(f,m,v){if(!(m==="dateIso"||m==="_actions")){l(null),s(!0);try{await $V(t,f,{[m]:v5(v)}),l({type:"success",text:"Saved."})}catch(w){l({type:"error",text:(w==null?void 0:w.message)||"Failed to save."})}finally{s(!1)}}}async function d(f){if(confirm(`Delete entry for ${f}?`)){l(null),s(!0);try{await WV(t,f),l({type:"success",text:"Deleted."})}catch(m){l({type:"error",text:(m==null?void 0:m.message)||"Failed to delete."})}finally{s(!1)}}}return y.jsxs("div",{className:"panel",children:[y.jsxs("div",{className:"panel-header",children:[y.jsx("h2",{children:"All Entries"}),y.jsxs("div",{className:"muted",children:["Inline edit  blur to save. ",r?"Saving":""]})]}),a&&y.jsx("div",{className:`notice ${a.type==="error"?"error":"success"}`,style:{marginTop:12},children:a.text}),y.jsx("div",{className:"table-wrap",style:{marginTop:12},children:y.jsxs("table",{className:"table",children:[y.jsx("thead",{children:y.jsx("tr",{children:u.map(f=>y.jsx("th",{children:f.label},f.key))})}),y.jsx("tbody",{children:e.map(f=>y.jsx("tr",{children:u.map(m=>m.key==="_actions"?y.jsx("td",{children:y.jsx("button",{className:"btn danger",onClick:()=>d(f.dateIso),children:"Delete"})},m.key):m.readOnly?y.jsx("td",{children:f[m.key]},m.key):y.jsx("td",{children:y.jsx("input",{defaultValue:_5(f[m.key]),onBlur:v=>h(f.dateIso,m.key,v.target.value),inputMode:"decimal"})},m.key))},f.dateIso))})]})})]})}function E5(){const{user:t}=fi(),{profile:e}=Vm(),n=Array.isArray(e==null?void 0:e.liftNames)&&e.liftNames.length===3?e.liftNames:["Bench Press","Squat","Deadlift"],[i,r]=O.useState([]),[s,o]=O.useState(!1),[a,l]=O.useState(null);O.useEffect(()=>{if(!t)return;const d=Fm(t.uid,f=>r(f),f=>l({type:"error",text:(f==null?void 0:f.message)||"Failed to load entries."}));return()=>d()},[t]);const u=O.useMemo(()=>!!(e!=null&&e.triplemeasurements),[e==null?void 0:e.triplemeasurements]);async function h(d){l(null),o(!0);try{await zV(t.uid,d),l({type:"success",text:"Entry saved."})}catch(f){l({type:"error",text:(f==null?void 0:f.message)||"Failed to save entry."})}finally{o(!1)}}return y.jsxs(y.Fragment,{children:[a&&y.jsx("div",{className:`notice ${a.type==="error"?"error":"success"}`,style:{marginTop:14},children:a.text}),y.jsx(y5,{tripleEnabled:u,liftNames:n,onSubmit:h,busy:s}),y.jsx(w5,{userId:t.uid,entries:i,tripleEnabled:u,liftNames:n})]})}function T5(){return y.jsxs(y.Fragment,{children:[y.jsx(FV,{}),y.jsx("div",{className:"app-shell",children:y.jsxs(JA,{children:[y.jsx(Tn,{path:"/",element:y.jsx(ap,{to:"/dashboard",replace:!0})}),y.jsx(Tn,{path:"/dashboard",element:y.jsx(nk,{})}),y.jsx(Tn,{path:"/insights",element:y.jsx(u5,{})}),y.jsx(Tn,{path:"/login",element:y.jsx(c5,{})}),y.jsx(Tn,{path:"/signup",element:y.jsx(h5,{})}),y.jsx(Tn,{path:"/reset-password",element:y.jsx(d5,{})}),y.jsx(Tn,{path:"/profile",element:y.jsx(U0,{children:y.jsx(m5,{})})}),y.jsx(Tn,{path:"/entry",element:y.jsx(U0,{children:y.jsx(E5,{})})}),y.jsx(Tn,{path:"*",element:y.jsx(ap,{to:"/dashboard",replace:!0})})]})})]})}class S5 extends Jc.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("App crashed:",e,n)}render(){var e;return this.state.hasError?y.jsxs("div",{style:{padding:16,maxWidth:800,margin:"0 auto",fontFamily:"system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif"},children:[y.jsx("h1",{style:{marginBottom:8},children:"Something went wrong"}),y.jsx("p",{style:{marginTop:0,opacity:.85},children:"The app hit an unexpected error and stopped rendering. Open DevTools  Console to see the exact message."}),y.jsx("pre",{style:{whiteSpace:"pre-wrap",background:"rgba(0,0,0,0.06)",padding:12,borderRadius:12,overflow:"auto"},children:String(((e=this.state.error)==null?void 0:e.message)||this.state.error||"Unknown error")}),y.jsx("button",{onClick:()=>window.location.reload(),style:{marginTop:12,padding:"10px 14px",borderRadius:12,border:"1px solid rgba(0,0,0,0.15)",background:"white",cursor:"pointer"},children:"Reload"})]}):this.props.children}}df.createRoot(document.getElementById("root")).render(y.jsx(Jc.StrictMode,{children:y.jsx(oP,{basename:"/Body-Recomp-Tracker/",children:y.jsx(VV,{children:y.jsx(jV,{children:y.jsx(S5,{children:y.jsx(T5,{})})})})})}));
